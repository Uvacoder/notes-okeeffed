{"expireTime":9007200852878462000,"key":"gatsby-plugin-mdx-entire-payload-9383fb1f407c9c28ab0848e04f2ce90c-","val":{"mdast":{"type":"root","children":[{"type":"import","value":"import DefaultLayout from \"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/gatsby-theme-docz/src/base/Layout.js\"","position":{"start":{"line":3,"column":1,"offset":2},"end":{"line":3,"column":133,"offset":134},"indent":[]}},{"type":"export","default":true,"value":"export default DefaultLayout","position":{"start":{"line":5,"column":1,"offset":136},"end":{"line":5,"column":29,"offset":164},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Chef - Udemy Course","position":{"start":{"line":7,"column":3,"offset":168},"end":{"line":7,"column":22,"offset":187},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":166},"end":{"line":7,"column":22,"offset":187},"indent":[]}},{"type":"jsx","value":"<!-- TOC -->","position":{"start":{"line":9,"column":1,"offset":189},"end":{"line":9,"column":13,"offset":201},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#chef---udemy-course","children":[{"type":"text","value":"Chef - Udemy Course","position":{"start":{"line":11,"column":6,"offset":208},"end":{"line":11,"column":25,"offset":227},"indent":[]}}],"position":{"start":{"line":11,"column":5,"offset":207},"end":{"line":11,"column":48,"offset":250},"indent":[]}}],"position":{"start":{"line":11,"column":5,"offset":207},"end":{"line":11,"column":48,"offset":250},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#configuration-management","children":[{"type":"text","value":"Configuration Management","position":{"start":{"line":12,"column":10,"offset":260},"end":{"line":12,"column":34,"offset":284},"indent":[]}}],"position":{"start":{"line":12,"column":9,"offset":259},"end":{"line":12,"column":62,"offset":312},"indent":[]}}],"position":{"start":{"line":12,"column":9,"offset":259},"end":{"line":12,"column":62,"offset":312},"indent":[]}}],"position":{"start":{"line":12,"column":5,"offset":255},"end":{"line":12,"column":62,"offset":312},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#infrastructure-as-code","children":[{"type":"text","value":"Infrastructure as Code","position":{"start":{"line":13,"column":10,"offset":322},"end":{"line":13,"column":32,"offset":344},"indent":[]}}],"position":{"start":{"line":13,"column":9,"offset":321},"end":{"line":13,"column":58,"offset":370},"indent":[]}}],"position":{"start":{"line":13,"column":9,"offset":321},"end":{"line":13,"column":58,"offset":370},"indent":[]}}],"position":{"start":{"line":13,"column":5,"offset":317},"end":{"line":13,"column":58,"offset":370},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#your-first-chef-recipe","children":[{"type":"text","value":"Your First Chef Recipe","position":{"start":{"line":14,"column":10,"offset":380},"end":{"line":14,"column":32,"offset":402},"indent":[]}}],"position":{"start":{"line":14,"column":9,"offset":379},"end":{"line":14,"column":58,"offset":428},"indent":[]}}],"position":{"start":{"line":14,"column":9,"offset":379},"end":{"line":14,"column":58,"offset":428},"indent":[]}}],"position":{"start":{"line":14,"column":5,"offset":375},"end":{"line":14,"column":58,"offset":428},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#chef-resources","children":[{"type":"text","value":"Chef Resources","position":{"start":{"line":15,"column":10,"offset":438},"end":{"line":15,"column":24,"offset":452},"indent":[]}}],"position":{"start":{"line":15,"column":9,"offset":437},"end":{"line":15,"column":42,"offset":470},"indent":[]}}],"position":{"start":{"line":15,"column":9,"offset":437},"end":{"line":15,"column":42,"offset":470},"indent":[]}}],"position":{"start":{"line":15,"column":5,"offset":433},"end":{"line":15,"column":42,"offset":470},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#exploring-system-resources","children":[{"type":"text","value":"Exploring system resources","position":{"start":{"line":16,"column":10,"offset":480},"end":{"line":16,"column":36,"offset":506},"indent":[]}}],"position":{"start":{"line":16,"column":9,"offset":479},"end":{"line":16,"column":66,"offset":536},"indent":[]}}],"position":{"start":{"line":16,"column":9,"offset":479},"end":{"line":16,"column":66,"offset":536},"indent":[]}}],"position":{"start":{"line":16,"column":5,"offset":475},"end":{"line":16,"column":66,"offset":536},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#convergence-and-desired-state","children":[{"type":"text","value":"Convergence and Desired State","position":{"start":{"line":17,"column":10,"offset":546},"end":{"line":17,"column":39,"offset":575},"indent":[]}}],"position":{"start":{"line":17,"column":9,"offset":545},"end":{"line":17,"column":72,"offset":608},"indent":[]}}],"position":{"start":{"line":17,"column":9,"offset":545},"end":{"line":17,"column":72,"offset":608},"indent":[]}}],"position":{"start":{"line":17,"column":5,"offset":541},"end":{"line":17,"column":72,"offset":608},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#creating-an-exercise-work-station","children":[{"type":"text","value":"Creating an \"Exercise Work Station\"","position":{"start":{"line":18,"column":10,"offset":618},"end":{"line":18,"column":45,"offset":653},"indent":[]}}],"position":{"start":{"line":18,"column":9,"offset":617},"end":{"line":18,"column":82,"offset":690},"indent":[]}}],"position":{"start":{"line":18,"column":9,"offset":617},"end":{"line":18,"column":82,"offset":690},"indent":[]}}],"position":{"start":{"line":18,"column":5,"offset":613},"end":{"line":18,"column":82,"offset":690},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#organising-resources-with-ruby","children":[{"type":"text","value":"Organising Resources with Ruby","position":{"start":{"line":19,"column":10,"offset":700},"end":{"line":19,"column":40,"offset":730},"indent":[]}}],"position":{"start":{"line":19,"column":9,"offset":699},"end":{"line":19,"column":74,"offset":764},"indent":[]}}],"position":{"start":{"line":19,"column":9,"offset":699},"end":{"line":19,"column":74,"offset":764},"indent":[]}}],"position":{"start":{"line":19,"column":5,"offset":695},"end":{"line":19,"column":74,"offset":764},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#cookbooks","children":[{"type":"text","value":"Cookbooks","position":{"start":{"line":20,"column":10,"offset":774},"end":{"line":20,"column":19,"offset":783},"indent":[]}}],"position":{"start":{"line":20,"column":9,"offset":773},"end":{"line":20,"column":32,"offset":796},"indent":[]}}],"position":{"start":{"line":20,"column":9,"offset":773},"end":{"line":20,"column":32,"offset":796},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#how-do-you-keep-track-of-changes-to-the-recipes","children":[{"type":"text","value":"How do you keep track of changes to the recipes?","position":{"start":{"line":21,"column":14,"offset":810},"end":{"line":21,"column":62,"offset":858},"indent":[]}}],"position":{"start":{"line":21,"column":13,"offset":809},"end":{"line":21,"column":113,"offset":909},"indent":[]}}],"position":{"start":{"line":21,"column":13,"offset":809},"end":{"line":21,"column":113,"offset":909},"indent":[]}}],"position":{"start":{"line":21,"column":9,"offset":805},"end":{"line":21,"column":113,"offset":909},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#cookbook-components","children":[{"type":"text","value":"Cookbook Components","position":{"start":{"line":22,"column":14,"offset":923},"end":{"line":22,"column":33,"offset":942},"indent":[]}}],"position":{"start":{"line":22,"column":13,"offset":922},"end":{"line":22,"column":56,"offset":965},"indent":[]}}],"position":{"start":{"line":22,"column":13,"offset":922},"end":{"line":22,"column":56,"offset":965},"indent":[]}}],"position":{"start":{"line":22,"column":9,"offset":918},"end":{"line":22,"column":56,"offset":965},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#tracking-changes-to-the-cookbooks","children":[{"type":"text","value":"Tracking changes to the Cookbooks","position":{"start":{"line":23,"column":14,"offset":979},"end":{"line":23,"column":47,"offset":1012},"indent":[]}}],"position":{"start":{"line":23,"column":13,"offset":978},"end":{"line":23,"column":84,"offset":1049},"indent":[]}}],"position":{"start":{"line":23,"column":13,"offset":978},"end":{"line":23,"column":84,"offset":1049},"indent":[]}}],"position":{"start":{"line":23,"column":9,"offset":974},"end":{"line":23,"column":84,"offset":1049},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#setting-up-an-apache-cookbook","children":[{"type":"text","value":"Setting up an Apache Cookbook","position":{"start":{"line":24,"column":14,"offset":1063},"end":{"line":24,"column":43,"offset":1092},"indent":[]}}],"position":{"start":{"line":24,"column":13,"offset":1062},"end":{"line":24,"column":76,"offset":1125},"indent":[]}}],"position":{"start":{"line":24,"column":13,"offset":1062},"end":{"line":24,"column":76,"offset":1125},"indent":[]}}],"position":{"start":{"line":24,"column":9,"offset":1058},"end":{"line":24,"column":76,"offset":1125},"indent":[]}}],"position":{"start":{"line":21,"column":9,"offset":805},"end":{"line":24,"column":76,"offset":1125},"indent":[9,9,9]}}],"position":{"start":{"line":20,"column":5,"offset":769},"end":{"line":24,"column":76,"offset":1125},"indent":[5,5,5,5]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#chef-client","children":[{"type":"text","value":"Chef Client","position":{"start":{"line":25,"column":10,"offset":1135},"end":{"line":25,"column":21,"offset":1146},"indent":[]}}],"position":{"start":{"line":25,"column":9,"offset":1134},"end":{"line":25,"column":36,"offset":1161},"indent":[]}}],"position":{"start":{"line":25,"column":9,"offset":1134},"end":{"line":25,"column":36,"offset":1161},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#include_recipe","children":[{"type":"text","value":"include_recipe","position":{"start":{"line":26,"column":14,"offset":1175},"end":{"line":26,"column":28,"offset":1189},"indent":[]}}],"position":{"start":{"line":26,"column":13,"offset":1174},"end":{"line":26,"column":46,"offset":1207},"indent":[]}}],"position":{"start":{"line":26,"column":13,"offset":1174},"end":{"line":26,"column":46,"offset":1207},"indent":[]}}],"position":{"start":{"line":26,"column":9,"offset":1170},"end":{"line":26,"column":46,"offset":1207},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#defaultrb-example","children":[{"type":"text","value":"default.rb example","position":{"start":{"line":27,"column":14,"offset":1221},"end":{"line":27,"column":32,"offset":1239},"indent":[]}}],"position":{"start":{"line":27,"column":13,"offset":1220},"end":{"line":27,"column":53,"offset":1260},"indent":[]}}],"position":{"start":{"line":27,"column":13,"offset":1220},"end":{"line":27,"column":53,"offset":1260},"indent":[]}}],"position":{"start":{"line":27,"column":9,"offset":1216},"end":{"line":27,"column":53,"offset":1260},"indent":[]}}],"position":{"start":{"line":26,"column":9,"offset":1170},"end":{"line":27,"column":53,"offset":1260},"indent":[9]}}],"position":{"start":{"line":25,"column":5,"offset":1130},"end":{"line":27,"column":53,"offset":1260},"indent":[5,5]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#ohai","children":[{"type":"text","value":"Ohai","position":{"start":{"line":28,"column":10,"offset":1270},"end":{"line":28,"column":14,"offset":1274},"indent":[]}}],"position":{"start":{"line":28,"column":9,"offset":1269},"end":{"line":28,"column":22,"offset":1282},"indent":[]}}],"position":{"start":{"line":28,"column":9,"offset":1269},"end":{"line":28,"column":22,"offset":1282},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#an-object-called-node","children":[{"type":"text","value":"An object called 'node'","position":{"start":{"line":29,"column":14,"offset":1296},"end":{"line":29,"column":37,"offset":1319},"indent":[]}}],"position":{"start":{"line":29,"column":13,"offset":1295},"end":{"line":29,"column":62,"offset":1344},"indent":[]}}],"position":{"start":{"line":29,"column":13,"offset":1295},"end":{"line":29,"column":62,"offset":1344},"indent":[]}}],"position":{"start":{"line":29,"column":9,"offset":1291},"end":{"line":29,"column":62,"offset":1344},"indent":[]}}],"position":{"start":{"line":29,"column":9,"offset":1291},"end":{"line":29,"column":62,"offset":1344},"indent":[]}}],"position":{"start":{"line":28,"column":5,"offset":1265},"end":{"line":29,"column":62,"offset":1344},"indent":[5]}}],"position":{"start":{"line":12,"column":5,"offset":255},"end":{"line":29,"column":62,"offset":1344},"indent":[5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5]}}],"position":{"start":{"line":11,"column":1,"offset":203},"end":{"line":29,"column":62,"offset":1344},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}}],"position":{"start":{"line":11,"column":1,"offset":203},"end":{"line":29,"column":62,"offset":1344},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"<!-- /TOC -->","position":{"start":{"line":31,"column":1,"offset":1346},"end":{"line":31,"column":14,"offset":1359},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Configuration Management","position":{"start":{"line":33,"column":4,"offset":1364},"end":{"line":33,"column":28,"offset":1388},"indent":[]}}],"position":{"start":{"line":33,"column":1,"offset":1361},"end":{"line":33,"column":28,"offset":1388},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Maintaining consistency for server integrity.","position":{"start":{"line":35,"column":1,"offset":1390},"end":{"line":35,"column":46,"offset":1435},"indent":[]}}],"position":{"start":{"line":35,"column":1,"offset":1390},"end":{"line":35,"column":46,"offset":1435},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The process of configuration can be automated by some extent. When you reach scale, this automation is at the heart of configuration management (IT orchetration).","position":{"start":{"line":37,"column":1,"offset":1437},"end":{"line":37,"column":163,"offset":1599},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":1437},"end":{"line":37,"column":163,"offset":1599},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Imagine we are deploying a web server. If we have a config management solution, this could take minutes instead of hours.","position":{"start":{"line":39,"column":1,"offset":1601},"end":{"line":39,"column":122,"offset":1722},"indent":[]}}],"position":{"start":{"line":39,"column":1,"offset":1601},"end":{"line":39,"column":122,"offset":1722},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"System auditing will also be a hassle for disaster recovery too.","position":{"start":{"line":41,"column":1,"offset":1724},"end":{"line":41,"column":65,"offset":1788},"indent":[]}}],"position":{"start":{"line":41,"column":1,"offset":1724},"end":{"line":41,"column":65,"offset":1788},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Revision control systems can also be version controlled with ","position":{"start":{"line":43,"column":1,"offset":1790},"end":{"line":43,"column":62,"offset":1851},"indent":[]}},{"type":"inlineCode","value":"infrastructure as code","position":{"start":{"line":43,"column":62,"offset":1851},"end":{"line":43,"column":86,"offset":1875},"indent":[]}},{"type":"text","value":" by having these environments scripted.","position":{"start":{"line":43,"column":86,"offset":1875},"end":{"line":43,"column":125,"offset":1914},"indent":[]}}],"position":{"start":{"line":43,"column":1,"offset":1790},"end":{"line":43,"column":125,"offset":1914},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Infrastructure as Code","position":{"start":{"line":45,"column":4,"offset":1919},"end":{"line":45,"column":26,"offset":1941},"indent":[]}}],"position":{"start":{"line":45,"column":1,"offset":1916},"end":{"line":45,"column":26,"offset":1941},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Examples:","position":{"start":{"line":47,"column":1,"offset":1943},"end":{"line":47,"column":10,"offset":1952},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":1943},"end":{"line":47,"column":10,"offset":1952},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"version control","position":{"start":{"line":49,"column":5,"offset":1958},"end":{"line":49,"column":20,"offset":1973},"indent":[]}}],"position":{"start":{"line":49,"column":5,"offset":1958},"end":{"line":49,"column":20,"offset":1973},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":1954},"end":{"line":49,"column":20,"offset":1973},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"testing","position":{"start":{"line":50,"column":5,"offset":1978},"end":{"line":50,"column":12,"offset":1985},"indent":[]}}],"position":{"start":{"line":50,"column":5,"offset":1978},"end":{"line":50,"column":12,"offset":1985},"indent":[]}}],"position":{"start":{"line":50,"column":1,"offset":1974},"end":{"line":50,"column":12,"offset":1985},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":1954},"end":{"line":50,"column":12,"offset":1985},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"These all helps to validate infrastructure code.","position":{"start":{"line":52,"column":1,"offset":1987},"end":{"line":52,"column":49,"offset":2035},"indent":[]}}],"position":{"start":{"line":52,"column":1,"offset":1987},"end":{"line":52,"column":49,"offset":2035},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can manage multiple cloud platforms etc.","position":{"start":{"line":54,"column":1,"offset":2037},"end":{"line":54,"column":45,"offset":2081},"indent":[]}}],"position":{"start":{"line":54,"column":1,"offset":2037},"end":{"line":54,"column":45,"offset":2081},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The three things covered:","position":{"start":{"line":56,"column":1,"offset":2083},"end":{"line":56,"column":26,"offset":2108},"indent":[]}}],"position":{"start":{"line":56,"column":1,"offset":2083},"end":{"line":56,"column":26,"offset":2108},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"chef development kit","position":{"start":{"line":58,"column":5,"offset":2114},"end":{"line":58,"column":25,"offset":2134},"indent":[]}}],"position":{"start":{"line":58,"column":5,"offset":2114},"end":{"line":58,"column":25,"offset":2134},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":2110},"end":{"line":58,"column":25,"offset":2134},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"chef client","position":{"start":{"line":59,"column":5,"offset":2139},"end":{"line":59,"column":16,"offset":2150},"indent":[]}}],"position":{"start":{"line":59,"column":5,"offset":2139},"end":{"line":59,"column":16,"offset":2150},"indent":[]}}],"position":{"start":{"line":59,"column":1,"offset":2135},"end":{"line":59,"column":16,"offset":2150},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"chef server","position":{"start":{"line":60,"column":5,"offset":2155},"end":{"line":60,"column":16,"offset":2166},"indent":[]}}],"position":{"start":{"line":60,"column":5,"offset":2155},"end":{"line":60,"column":16,"offset":2166},"indent":[]}}],"position":{"start":{"line":60,"column":1,"offset":2151},"end":{"line":60,"column":16,"offset":2166},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":2110},"end":{"line":60,"column":16,"offset":2166},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The Chef DK allows you to run local tools to write code and then upload it to a chef server. A node will be a server or machine managed by Chef.","position":{"start":{"line":62,"column":1,"offset":2168},"end":{"line":62,"column":145,"offset":2312},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":2168},"end":{"line":62,"column":145,"offset":2312},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You will get the desired state from the ","position":{"start":{"line":64,"column":1,"offset":2314},"end":{"line":64,"column":41,"offset":2354},"indent":[]}},{"type":"inlineCode","value":"cookbooks","position":{"start":{"line":64,"column":41,"offset":2354},"end":{"line":64,"column":52,"offset":2365},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":64,"column":52,"offset":2365},"end":{"line":64,"column":56,"offset":2369},"indent":[]}},{"type":"inlineCode","value":"recipes","position":{"start":{"line":64,"column":56,"offset":2369},"end":{"line":64,"column":65,"offset":2378},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":64,"column":65,"offset":2378},"end":{"line":64,"column":66,"offset":2379},"indent":[]}}],"position":{"start":{"line":64,"column":1,"offset":2314},"end":{"line":64,"column":66,"offset":2379},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Your First Chef Recipe","position":{"start":{"line":66,"column":4,"offset":2384},"end":{"line":66,"column":26,"offset":2406},"indent":[]}}],"position":{"start":{"line":66,"column":1,"offset":2381},"end":{"line":66,"column":26,"offset":2406},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Create a new file ","position":{"start":{"line":68,"column":1,"offset":2408},"end":{"line":68,"column":19,"offset":2426},"indent":[]}},{"type":"inlineCode","value":"hello.rb","position":{"start":{"line":68,"column":19,"offset":2426},"end":{"line":68,"column":29,"offset":2436},"indent":[]}},{"type":"text","value":" and add ","position":{"start":{"line":68,"column":29,"offset":2436},"end":{"line":68,"column":38,"offset":2445},"indent":[]}},{"type":"inlineCode","value":"hello.txt","position":{"start":{"line":68,"column":38,"offset":2445},"end":{"line":68,"column":49,"offset":2456},"indent":[]}},{"type":"text","value":" with Hello World.","position":{"start":{"line":68,"column":49,"offset":2456},"end":{"line":68,"column":67,"offset":2474},"indent":[]}}],"position":{"start":{"line":68,"column":1,"offset":2408},"end":{"line":68,"column":67,"offset":2474},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"First, give Chef a file.","position":{"start":{"line":70,"column":1,"offset":2476},"end":{"line":70,"column":25,"offset":2500},"indent":[]}}],"position":{"start":{"line":70,"column":1,"offset":2476},"end":{"line":70,"column":25,"offset":2500},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Inside of the file:","position":{"start":{"line":72,"column":1,"offset":2502},"end":{"line":72,"column":20,"offset":2521},"indent":[]}}],"position":{"start":{"line":72,"column":1,"offset":2502},"end":{"line":72,"column":20,"offset":2521},"indent":[]}},{"type":"code","lang":"ruby","meta":null,"value":"file '/hello.txt' do\n\tcontent 'Hello world!'\nend","position":{"start":{"line":74,"column":1,"offset":2523},"end":{"line":78,"column":4,"offset":2583},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Running ","position":{"start":{"line":80,"column":1,"offset":2585},"end":{"line":80,"column":9,"offset":2593},"indent":[]}},{"type":"inlineCode","value":"sudo chef-client --client-mode hello.rb","position":{"start":{"line":80,"column":9,"offset":2593},"end":{"line":80,"column":50,"offset":2634},"indent":[]}},{"type":"text","value":" will then build that file and update the content.","position":{"start":{"line":80,"column":50,"offset":2634},"end":{"line":80,"column":100,"offset":2684},"indent":[]}}],"position":{"start":{"line":80,"column":1,"offset":2585},"end":{"line":80,"column":100,"offset":2684},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Chef Resources","position":{"start":{"line":82,"column":4,"offset":2689},"end":{"line":82,"column":18,"offset":2703},"indent":[]}}],"position":{"start":{"line":82,"column":1,"offset":2686},"end":{"line":82,"column":18,"offset":2703},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Chef Resources are the fundamental building blocks of working with Chef.","position":{"start":{"line":84,"column":1,"offset":2705},"end":{"line":84,"column":73,"offset":2777},"indent":[]}}],"position":{"start":{"line":84,"column":1,"offset":2705},"end":{"line":84,"column":73,"offset":2777},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The aim is to build the load balancer.","position":{"start":{"line":86,"column":1,"offset":2779},"end":{"line":86,"column":39,"offset":2817},"indent":[]}}],"position":{"start":{"line":86,"column":1,"offset":2779},"end":{"line":86,"column":39,"offset":2817},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Resources describe the smallest piece we can configure in the system.","position":{"start":{"line":88,"column":1,"offset":2819},"end":{"line":88,"column":70,"offset":2888},"indent":[]}}],"position":{"start":{"line":88,"column":1,"offset":2819},"end":{"line":88,"column":70,"offset":2888},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Exploring system resources","position":{"start":{"line":90,"column":4,"offset":2893},"end":{"line":90,"column":30,"offset":2919},"indent":[]}}],"position":{"start":{"line":90,"column":1,"offset":2890},"end":{"line":90,"column":30,"offset":2919},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Example 1: Package Resource","position":{"start":{"line":92,"column":3,"offset":2923},"end":{"line":92,"column":30,"offset":2950},"indent":[]}}],"position":{"start":{"line":92,"column":1,"offset":2921},"end":{"line":92,"column":32,"offset":2952},"indent":[]}}],"position":{"start":{"line":92,"column":1,"offset":2921},"end":{"line":92,"column":32,"offset":2952},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"## Install the http package\npackage 'httd' do\n\taction :install\nend","position":{"start":{"line":94,"column":1,"offset":2954},"end":{"line":99,"column":4,"offset":3028},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Example 2: Service Resource","position":{"start":{"line":101,"column":3,"offset":3032},"end":{"line":101,"column":30,"offset":3059},"indent":[]}}],"position":{"start":{"line":101,"column":1,"offset":3030},"end":{"line":101,"column":32,"offset":3061},"indent":[]}}],"position":{"start":{"line":101,"column":1,"offset":3030},"end":{"line":101,"column":32,"offset":3061},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"## Run the ntp service\nservice 'ntp' do\n\taction [ :enable, :start ]\nend","position":{"start":{"line":103,"column":1,"offset":3063},"end":{"line":108,"column":4,"offset":3142},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Example 3: File Resource","position":{"start":{"line":110,"column":3,"offset":3146},"end":{"line":110,"column":27,"offset":3170},"indent":[]}}],"position":{"start":{"line":110,"column":1,"offset":3144},"end":{"line":110,"column":29,"offset":3172},"indent":[]}}],"position":{"start":{"line":110,"column":1,"offset":3144},"end":{"line":110,"column":29,"offset":3172},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"## Create the /etc/motd file\nfile 'etc/motd' do\n\tcontent 'This computer is the property ...'\nend","position":{"start":{"line":112,"column":1,"offset":3174},"end":{"line":117,"column":4,"offset":3278},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Example 4: File Resource","position":{"start":{"line":119,"column":3,"offset":3282},"end":{"line":119,"column":27,"offset":3306},"indent":[]}}],"position":{"start":{"line":119,"column":1,"offset":3280},"end":{"line":119,"column":29,"offset":3308},"indent":[]}}],"position":{"start":{"line":119,"column":1,"offset":3280},"end":{"line":119,"column":29,"offset":3308},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"## Remove a file\nfile 'etc/php.ini.default' do\n\taction :delete\nend","position":{"start":{"line":121,"column":1,"offset":3310},"end":{"line":126,"column":4,"offset":3384},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Looking back at the definition of a recipe. ","position":{"start":{"line":128,"column":1,"offset":3386},"end":{"line":128,"column":45,"offset":3430},"indent":[]}},{"type":"inlineCode","value":"hello.rb","position":{"start":{"line":128,"column":45,"offset":3430},"end":{"line":128,"column":55,"offset":3440},"indent":[]}},{"type":"text","value":" was an example of a recipe file.","position":{"start":{"line":128,"column":55,"offset":3440},"end":{"line":128,"column":88,"offset":3473},"indent":[]}}],"position":{"start":{"line":128,"column":1,"offset":3386},"end":{"line":128,"column":88,"offset":3473},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The \"type\" (eg file, service, package) and \"name\" (filename, filepath) should be action'd with \"properties\" (eg content 'Hello World!'). When we list a resource, we take ","position":{"start":{"line":130,"column":1,"offset":3475},"end":{"line":130,"column":171,"offset":3645},"indent":[]}},{"type":"inlineCode","value":"action","position":{"start":{"line":130,"column":171,"offset":3645},"end":{"line":130,"column":179,"offset":3653},"indent":[]}},{"type":"text","value":" on that resource (eg ","position":{"start":{"line":130,"column":179,"offset":3653},"end":{"line":130,"column":201,"offset":3675},"indent":[]}},{"type":"inlineCode","value":"action :create","position":{"start":{"line":130,"column":201,"offset":3675},"end":{"line":130,"column":217,"offset":3691},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":130,"column":217,"offset":3691},"end":{"line":130,"column":219,"offset":3693},"indent":[]}},{"type":"inlineCode","value":"action :delete","position":{"start":{"line":130,"column":219,"offset":3693},"end":{"line":130,"column":235,"offset":3709},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":130,"column":235,"offset":3709},"end":{"line":130,"column":237,"offset":3711},"indent":[]}},{"type":"inlineCode","value":"action :enable","position":{"start":{"line":130,"column":237,"offset":3711},"end":{"line":130,"column":253,"offset":3727},"indent":[]}},{"type":"text","value":"). The default action is taken if you do not list the action. The default is more of a ","position":{"start":{"line":130,"column":253,"offset":3727},"end":{"line":130,"column":340,"offset":3814},"indent":[]}},{"type":"inlineCode","value":"create","position":{"start":{"line":130,"column":340,"offset":3814},"end":{"line":130,"column":348,"offset":3822},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":130,"column":348,"offset":3822},"end":{"line":130,"column":352,"offset":3826},"indent":[]}},{"type":"inlineCode","value":"install","position":{"start":{"line":130,"column":352,"offset":3826},"end":{"line":130,"column":361,"offset":3835},"indent":[]}},{"type":"text","value":" - it is important to know about what it is as you are writing out recipes.","position":{"start":{"line":130,"column":361,"offset":3835},"end":{"line":130,"column":436,"offset":3910},"indent":[]}}],"position":{"start":{"line":130,"column":1,"offset":3475},"end":{"line":130,"column":436,"offset":3910},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Convergence and Desired State","position":{"start":{"line":132,"column":4,"offset":3915},"end":{"line":132,"column":33,"offset":3944},"indent":[]}}],"position":{"start":{"line":132,"column":1,"offset":3912},"end":{"line":132,"column":33,"offset":3944},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"With the command ","position":{"start":{"line":134,"column":1,"offset":3946},"end":{"line":134,"column":18,"offset":3963},"indent":[]}},{"type":"inlineCode","value":"sudo chef-client --local-mode hello.rb","position":{"start":{"line":134,"column":18,"offset":3963},"end":{"line":134,"column":58,"offset":4003},"indent":[]}},{"type":"text","value":", when we run ","position":{"start":{"line":134,"column":58,"offset":4003},"end":{"line":134,"column":72,"offset":4017},"indent":[]}},{"type":"inlineCode","value":"--local-mode","position":{"start":{"line":134,"column":72,"offset":4017},"end":{"line":134,"column":86,"offset":4031},"indent":[]}},{"type":"text","value":" we did it because the default mode is to talk to a ","position":{"start":{"line":134,"column":86,"offset":4031},"end":{"line":134,"column":138,"offset":4083},"indent":[]}},{"type":"inlineCode","value":"chef server","position":{"start":{"line":134,"column":138,"offset":4083},"end":{"line":134,"column":151,"offset":4096},"indent":[]}},{"type":"text","value":". Once we have a Chef server to work with, we can not use this mode.","position":{"start":{"line":134,"column":151,"offset":4096},"end":{"line":134,"column":219,"offset":4164},"indent":[]}}],"position":{"start":{"line":134,"column":1,"offset":3946},"end":{"line":134,"column":219,"offset":4164},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"What happens if you modify the content of the file that we create directly, what happens when Chef runs again?","position":{"start":{"line":136,"column":1,"offset":4166},"end":{"line":136,"column":111,"offset":4276},"indent":[]}}],"position":{"start":{"line":136,"column":1,"offset":4166},"end":{"line":136,"column":111,"offset":4276},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Chef will then attempt to ","position":{"start":{"line":138,"column":1,"offset":4278},"end":{"line":138,"column":27,"offset":4304},"indent":[]}},{"type":"inlineCode","value":"repair","position":{"start":{"line":138,"column":27,"offset":4304},"end":{"line":138,"column":35,"offset":4312},"indent":[]}},{"type":"text","value":" the file changes.","position":{"start":{"line":138,"column":35,"offset":4312},"end":{"line":138,"column":53,"offset":4330},"indent":[]}}],"position":{"start":{"line":138,"column":1,"offset":4278},"end":{"line":138,"column":53,"offset":4330},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If we change the ownership for a file, Chef will only take action when it needs to. It will only take action if something is \"out of policy\".","position":{"start":{"line":140,"column":1,"offset":4332},"end":{"line":140,"column":142,"offset":4473},"indent":[]}}],"position":{"start":{"line":140,"column":1,"offset":4332},"end":{"line":140,"column":142,"offset":4473},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Creating an \"Exercise Work Station\"","position":{"start":{"line":142,"column":4,"offset":4478},"end":{"line":142,"column":39,"offset":4513},"indent":[]}}],"position":{"start":{"line":142,"column":1,"offset":4475},"end":{"line":142,"column":39,"offset":4513},"indent":[]}},{"type":"code","lang":"ruby","meta":null,"value":"# creating tree and ntp\npackage 'tree' do\n\taction :install\nend\n\npackage 'ntp'\n\n# /etc/motd - content ownership\nfile '/etc/motd' do\n\tcontent 'This is the property of me'\n\taction :create\n\towner 'root'\n\tgroup 'root'\nend","position":{"start":{"line":144,"column":1,"offset":4515},"end":{"line":159,"column":4,"offset":4743},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"You can also build an array and pass it into a package resource, but if we do that we won't have access to things like versions etc.","position":{"start":{"line":161,"column":1,"offset":4745},"end":{"line":161,"column":133,"offset":4877},"indent":[]}}],"position":{"start":{"line":161,"column":1,"offset":4745},"end":{"line":161,"column":133,"offset":4877},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Then we can just run ","position":{"start":{"line":163,"column":1,"offset":4879},"end":{"line":163,"column":22,"offset":4900},"indent":[]}},{"type":"inlineCode","value":"sudo chef-client -z setup.rb","position":{"start":{"line":163,"column":22,"offset":4900},"end":{"line":163,"column":52,"offset":4930},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":163,"column":52,"offset":4930},"end":{"line":163,"column":53,"offset":4931},"indent":[]}}],"position":{"start":{"line":163,"column":1,"offset":4879},"end":{"line":163,"column":53,"offset":4931},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If we re-run the script, no actions will be taken if nothing needs to be modified.","position":{"start":{"line":165,"column":1,"offset":4933},"end":{"line":165,"column":83,"offset":5015},"indent":[]}}],"position":{"start":{"line":165,"column":1,"offset":4933},"end":{"line":165,"column":83,"offset":5015},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Organising Resources with Ruby","position":{"start":{"line":167,"column":4,"offset":5020},"end":{"line":167,"column":34,"offset":5050},"indent":[]}}],"position":{"start":{"line":167,"column":1,"offset":5017},"end":{"line":167,"column":34,"offset":5050},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can also call recipes from other recipes.","position":{"start":{"line":169,"column":1,"offset":5052},"end":{"line":169,"column":46,"offset":5097},"indent":[]}}],"position":{"start":{"line":169,"column":1,"offset":5052},"end":{"line":169,"column":46,"offset":5097},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Chef also runs the Ruby files synchronously.","position":{"start":{"line":171,"column":1,"offset":5099},"end":{"line":171,"column":45,"offset":5143},"indent":[]}}],"position":{"start":{"line":171,"column":1,"offset":5099},"end":{"line":171,"column":45,"offset":5143},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Cookbooks","position":{"start":{"line":173,"column":4,"offset":5148},"end":{"line":173,"column":13,"offset":5157},"indent":[]}}],"position":{"start":{"line":173,"column":1,"offset":5145},"end":{"line":173,"column":13,"offset":5157},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Ways to group recipes and put them into useful configurations.","position":{"start":{"line":175,"column":1,"offset":5159},"end":{"line":175,"column":63,"offset":5221},"indent":[]}}],"position":{"start":{"line":175,"column":1,"offset":5159},"end":{"line":175,"column":63,"offset":5221},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Instead of a single recipe being sent to a server, we send a ","position":{"start":{"line":177,"column":1,"offset":5223},"end":{"line":177,"column":62,"offset":5284},"indent":[]}},{"type":"inlineCode","value":"cookbook","position":{"start":{"line":177,"column":62,"offset":5284},"end":{"line":177,"column":72,"offset":5294},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":177,"column":72,"offset":5294},"end":{"line":177,"column":73,"offset":5295},"indent":[]}}],"position":{"start":{"line":177,"column":1,"offset":5223},"end":{"line":177,"column":73,"offset":5295},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"How do you keep track of changes to the recipes?","position":{"start":{"line":179,"column":5,"offset":5301},"end":{"line":179,"column":53,"offset":5349},"indent":[]}}],"position":{"start":{"line":179,"column":1,"offset":5297},"end":{"line":179,"column":53,"offset":5349},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cookbooks allow a way to package up the recipes and give it a version number and track changes.","position":{"start":{"line":181,"column":1,"offset":5351},"end":{"line":181,"column":96,"offset":5446},"indent":[]}}],"position":{"start":{"line":181,"column":1,"offset":5351},"end":{"line":181,"column":96,"offset":5446},"indent":[]}},{"type":"paragraph","children":[{"type":"inlineCode","value":"A fundamental unit of configuration and policy distribution","position":{"start":{"line":183,"column":1,"offset":5448},"end":{"line":183,"column":62,"offset":5509},"indent":[]}}],"position":{"start":{"line":183,"column":1,"offset":5448},"end":{"line":183,"column":62,"offset":5509},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When creating the cookbook, is describes a config for a particular scenario.","position":{"start":{"line":185,"column":1,"offset":5511},"end":{"line":185,"column":77,"offset":5587},"indent":[]}}],"position":{"start":{"line":185,"column":1,"offset":5511},"end":{"line":185,"column":77,"offset":5587},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"What to use cookbooks for:","position":{"start":{"line":187,"column":1,"offset":5589},"end":{"line":187,"column":27,"offset":5615},"indent":[]}}],"position":{"start":{"line":187,"column":1,"offset":5589},"end":{"line":187,"column":27,"offset":5615},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Specifiy resources to use and in which order they are applied","position":{"start":{"line":189,"column":5,"offset":5621},"end":{"line":189,"column":66,"offset":5682},"indent":[]}}],"position":{"start":{"line":189,"column":5,"offset":5621},"end":{"line":189,"column":66,"offset":5682},"indent":[]}}],"position":{"start":{"line":189,"column":1,"offset":5617},"end":{"line":189,"column":66,"offset":5682},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Attribute values","position":{"start":{"line":190,"column":5,"offset":5687},"end":{"line":190,"column":21,"offset":5703},"indent":[]}}],"position":{"start":{"line":190,"column":5,"offset":5687},"end":{"line":190,"column":21,"offset":5703},"indent":[]}}],"position":{"start":{"line":190,"column":1,"offset":5683},"end":{"line":190,"column":21,"offset":5703},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"File distributions","position":{"start":{"line":191,"column":5,"offset":5708},"end":{"line":191,"column":23,"offset":5726},"indent":[]}}],"position":{"start":{"line":191,"column":5,"offset":5708},"end":{"line":191,"column":23,"offset":5726},"indent":[]}}],"position":{"start":{"line":191,"column":1,"offset":5704},"end":{"line":191,"column":23,"offset":5726},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Templates","position":{"start":{"line":192,"column":5,"offset":5731},"end":{"line":192,"column":14,"offset":5740},"indent":[]}}],"position":{"start":{"line":192,"column":5,"offset":5731},"end":{"line":192,"column":14,"offset":5740},"indent":[]}}],"position":{"start":{"line":192,"column":1,"offset":5727},"end":{"line":192,"column":14,"offset":5740},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Extensions to Chef (lib, definitions and custom resources)","position":{"start":{"line":193,"column":5,"offset":5745},"end":{"line":193,"column":63,"offset":5803},"indent":[]}}],"position":{"start":{"line":193,"column":5,"offset":5745},"end":{"line":193,"column":63,"offset":5803},"indent":[]}}],"position":{"start":{"line":193,"column":1,"offset":5741},"end":{"line":193,"column":63,"offset":5803},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Version Control","position":{"start":{"line":194,"column":5,"offset":5808},"end":{"line":194,"column":20,"offset":5823},"indent":[]}}],"position":{"start":{"line":194,"column":5,"offset":5808},"end":{"line":194,"column":20,"offset":5823},"indent":[]}}],"position":{"start":{"line":194,"column":1,"offset":5804},"end":{"line":194,"column":20,"offset":5823},"indent":[]}}],"position":{"start":{"line":189,"column":1,"offset":5617},"end":{"line":194,"column":20,"offset":5823},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Cookbook components:","position":{"start":{"line":196,"column":1,"offset":5825},"end":{"line":196,"column":21,"offset":5845},"indent":[]}}],"position":{"start":{"line":196,"column":1,"offset":5825},"end":{"line":196,"column":21,"offset":5845},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"README","position":{"start":{"line":198,"column":5,"offset":5851},"end":{"line":198,"column":11,"offset":5857},"indent":[]}}],"position":{"start":{"line":198,"column":5,"offset":5851},"end":{"line":198,"column":11,"offset":5857},"indent":[]}}],"position":{"start":{"line":198,"column":1,"offset":5847},"end":{"line":198,"column":11,"offset":5857},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"metadata","position":{"start":{"line":199,"column":5,"offset":5862},"end":{"line":199,"column":13,"offset":5870},"indent":[]}}],"position":{"start":{"line":199,"column":5,"offset":5862},"end":{"line":199,"column":13,"offset":5870},"indent":[]}}],"position":{"start":{"line":199,"column":1,"offset":5858},"end":{"line":199,"column":13,"offset":5870},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"recipes","position":{"start":{"line":200,"column":5,"offset":5875},"end":{"line":200,"column":12,"offset":5882},"indent":[]}}],"position":{"start":{"line":200,"column":5,"offset":5875},"end":{"line":200,"column":12,"offset":5882},"indent":[]}}],"position":{"start":{"line":200,"column":1,"offset":5871},"end":{"line":200,"column":12,"offset":5882},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"testing directories (spec + test)","position":{"start":{"line":201,"column":5,"offset":5887},"end":{"line":201,"column":38,"offset":5920},"indent":[]}}],"position":{"start":{"line":201,"column":5,"offset":5887},"end":{"line":201,"column":38,"offset":5920},"indent":[]}}],"position":{"start":{"line":201,"column":1,"offset":5883},"end":{"line":201,"column":38,"offset":5920},"indent":[]}}],"position":{"start":{"line":198,"column":1,"offset":5847},"end":{"line":201,"column":38,"offset":5920},"indent":[1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Cookbook Components","position":{"start":{"line":203,"column":5,"offset":5926},"end":{"line":203,"column":24,"offset":5945},"indent":[]}}],"position":{"start":{"line":203,"column":1,"offset":5922},"end":{"line":203,"column":24,"offset":5945},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We can create cookbooks by using ","position":{"start":{"line":205,"column":1,"offset":5947},"end":{"line":205,"column":34,"offset":5980},"indent":[]}},{"type":"inlineCode","value":"chef generate [cookbook|other]","position":{"start":{"line":205,"column":34,"offset":5980},"end":{"line":205,"column":66,"offset":6012},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":205,"column":66,"offset":6012},"end":{"line":205,"column":67,"offset":6013},"indent":[]}}],"position":{"start":{"line":205,"column":1,"offset":5947},"end":{"line":205,"column":67,"offset":6013},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When we generate a cookbook, we should give the cookbook a relevant name. Example ","position":{"start":{"line":207,"column":1,"offset":6015},"end":{"line":207,"column":83,"offset":6097},"indent":[]}},{"type":"inlineCode","value":"chef generate cookbooks/workstation","position":{"start":{"line":207,"column":83,"offset":6097},"end":{"line":207,"column":120,"offset":6134},"indent":[]}},{"type":"text","value":" to create a ","position":{"start":{"line":207,"column":120,"offset":6134},"end":{"line":207,"column":133,"offset":6147},"indent":[]}},{"type":"inlineCode","value":"workstation","position":{"start":{"line":207,"column":133,"offset":6147},"end":{"line":207,"column":146,"offset":6160},"indent":[]}},{"type":"text","value":" book in the ","position":{"start":{"line":207,"column":146,"offset":6160},"end":{"line":207,"column":159,"offset":6173},"indent":[]}},{"type":"inlineCode","value":"cookbooks","position":{"start":{"line":207,"column":159,"offset":6173},"end":{"line":207,"column":170,"offset":6184},"indent":[]}},{"type":"text","value":" folder.","position":{"start":{"line":207,"column":170,"offset":6184},"end":{"line":207,"column":178,"offset":6192},"indent":[]}}],"position":{"start":{"line":207,"column":1,"offset":6015},"end":{"line":207,"column":178,"offset":6192},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Tracking changes to the Cookbooks","position":{"start":{"line":209,"column":5,"offset":6198},"end":{"line":209,"column":38,"offset":6231},"indent":[]}}],"position":{"start":{"line":209,"column":1,"offset":6194},"end":{"line":209,"column":38,"offset":6231},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Inside of a single repository, changes are generally tracked for a single cook book.","position":{"start":{"line":211,"column":1,"offset":6233},"end":{"line":211,"column":85,"offset":6317},"indent":[]}}],"position":{"start":{"line":211,"column":1,"offset":6233},"end":{"line":211,"column":85,"offset":6317},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Setting up an Apache Cookbook","position":{"start":{"line":213,"column":5,"offset":6323},"end":{"line":213,"column":34,"offset":6352},"indent":[]}}],"position":{"start":{"line":213,"column":1,"offset":6319},"end":{"line":213,"column":34,"offset":6352},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"First, create a new cookbook in the cookbooks foler using ","position":{"start":{"line":215,"column":1,"offset":6354},"end":{"line":215,"column":59,"offset":6412},"indent":[]}},{"type":"inlineCode","value":"chef generate cookbook cookbooks/apache","position":{"start":{"line":215,"column":59,"offset":6412},"end":{"line":215,"column":100,"offset":6453},"indent":[]}}],"position":{"start":{"line":215,"column":1,"offset":6354},"end":{"line":215,"column":100,"offset":6453},"indent":[]}},{"type":"code","lang":"ruby","meta":null,"value":"# Server\n\n# 1. http package install (redhat)\npackage 'httpd' do\n\taction :install\nend\n\n# 2. configure default apache server file /var/www/html\nfile '/var/www/html/index.html' do\n\tcontent '<h1>Hello from Apache</h1>'\nend\n\n# 3. download apache, enable and start the apache service\npackage 'apache' do\n\taction :install\nend\n\nservice 'httpd' do\n\taction [ :enable, :start ]\nend","position":{"start":{"line":217,"column":1,"offset":6455},"end":{"line":238,"column":4,"offset":6837},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Chef Client","position":{"start":{"line":240,"column":4,"offset":6842},"end":{"line":240,"column":15,"offset":6853},"indent":[]}}],"position":{"start":{"line":240,"column":1,"offset":6839},"end":{"line":240,"column":15,"offset":6853},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"How do we apply the recipes from the cookbooks from the Chef client? How do we call multiple recipes at once?","position":{"start":{"line":242,"column":1,"offset":6855},"end":{"line":242,"column":110,"offset":6964},"indent":[]}}],"position":{"start":{"line":242,"column":1,"offset":6855},"end":{"line":242,"column":110,"offset":6964},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We can use a cook book to define the scenarios here.","position":{"start":{"line":244,"column":1,"offset":6966},"end":{"line":244,"column":53,"offset":7018},"indent":[]}}],"position":{"start":{"line":244,"column":1,"offset":6966},"end":{"line":244,"column":53,"offset":7018},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Say we want to call a cookbook from a particular recipe.","position":{"start":{"line":246,"column":1,"offset":7020},"end":{"line":246,"column":57,"offset":7076},"indent":[]}}],"position":{"start":{"line":246,"column":1,"offset":7020},"end":{"line":246,"column":57,"offset":7076},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We can also do ","position":{"start":{"line":248,"column":1,"offset":7078},"end":{"line":248,"column":16,"offset":7093},"indent":[]}},{"type":"inlineCode","value":"sudo chef-client -z --runlist \"recipe[cookbook::recipe]\"","position":{"start":{"line":248,"column":16,"offset":7093},"end":{"line":248,"column":74,"offset":7151},"indent":[]}},{"type":"text","value":" to run a particular recipe.","position":{"start":{"line":248,"column":74,"offset":7151},"end":{"line":248,"column":102,"offset":7179},"indent":[]}}],"position":{"start":{"line":248,"column":1,"offset":7078},"end":{"line":248,"column":102,"offset":7179},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For running multiple cookbook recipes, we could do ","position":{"start":{"line":250,"column":1,"offset":7181},"end":{"line":250,"column":52,"offset":7232},"indent":[]}},{"type":"inlineCode","value":"sudo chef-client -z --runlist \"recipe[cookbook::recipe],recipe[another-cookbook::recipe]\"","position":{"start":{"line":250,"column":52,"offset":7232},"end":{"line":250,"column":143,"offset":7323},"indent":[]}},{"type":"text","value":". This will do a ","position":{"start":{"line":250,"column":143,"offset":7323},"end":{"line":250,"column":160,"offset":7340},"indent":[]}},{"type":"inlineCode","value":"chef-client","position":{"start":{"line":250,"column":160,"offset":7340},"end":{"line":250,"column":173,"offset":7353},"indent":[]}},{"type":"text","value":" run in order.","position":{"start":{"line":250,"column":173,"offset":7353},"end":{"line":250,"column":187,"offset":7367},"indent":[]}}],"position":{"start":{"line":250,"column":1,"offset":7181},"end":{"line":250,"column":187,"offset":7367},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The runlist DOES NOT HAVE A SPACE between recipe declarations.","position":{"start":{"line":252,"column":1,"offset":7369},"end":{"line":252,"column":63,"offset":7431},"indent":[]}}],"position":{"start":{"line":252,"column":1,"offset":7369},"end":{"line":252,"column":63,"offset":7431},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"include_recipe","position":{"start":{"line":254,"column":5,"offset":7437},"end":{"line":254,"column":19,"offset":7451},"indent":[]}}],"position":{"start":{"line":254,"column":1,"offset":7433},"end":{"line":254,"column":19,"offset":7451},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":256,"column":1,"offset":7453},"end":{"line":256,"column":5,"offset":7457},"indent":[]}},{"type":"inlineCode","value":"include_recipe","position":{"start":{"line":256,"column":5,"offset":7457},"end":{"line":256,"column":21,"offset":7473},"indent":[]}},{"type":"text","value":" method allows you to include a recipe from either the online cookbook stores or from one of our own cookbooks.","position":{"start":{"line":256,"column":21,"offset":7473},"end":{"line":256,"column":132,"offset":7584},"indent":[]}}],"position":{"start":{"line":256,"column":1,"offset":7453},"end":{"line":256,"column":132,"offset":7584},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This is a great way to ","position":{"start":{"line":258,"column":1,"offset":7586},"end":{"line":258,"column":24,"offset":7609},"indent":[]}},{"type":"inlineCode","value":"wrap","position":{"start":{"line":258,"column":24,"offset":7609},"end":{"line":258,"column":30,"offset":7615},"indent":[]}},{"type":"text","value":" cookbooks.","position":{"start":{"line":258,"column":30,"offset":7615},"end":{"line":258,"column":41,"offset":7626},"indent":[]}}],"position":{"start":{"line":258,"column":1,"offset":7586},"end":{"line":258,"column":41,"offset":7626},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Each of the cookbooks that we generate come with a ","position":{"start":{"line":260,"column":1,"offset":7628},"end":{"line":260,"column":52,"offset":7679},"indent":[]}},{"type":"inlineCode","value":"default.rb","position":{"start":{"line":260,"column":52,"offset":7679},"end":{"line":260,"column":64,"offset":7691},"indent":[]}},{"type":"text","value":" recipe. This default recipe can help us call other recipes.","position":{"start":{"line":260,"column":64,"offset":7691},"end":{"line":260,"column":124,"offset":7751},"indent":[]}}],"position":{"start":{"line":260,"column":1,"offset":7628},"end":{"line":260,"column":124,"offset":7751},"indent":[]}},{"type":"code","lang":"ruby","meta":null,"value":"# in the default.rb file for a recipe\n\n# example 'cookbook::recipe'\ninclude_recipe 'workstation::setup'","position":{"start":{"line":262,"column":1,"offset":7753},"end":{"line":267,"column":4,"offset":7868},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If we now run ","position":{"start":{"line":269,"column":1,"offset":7870},"end":{"line":269,"column":15,"offset":7884},"indent":[]}},{"type":"inlineCode","value":"sudo chef-client -z -r \"recipe[workstation]\"","position":{"start":{"line":269,"column":15,"offset":7884},"end":{"line":269,"column":61,"offset":7930},"indent":[]}},{"type":"text","value":" and omit the specific recipe, then the ","position":{"start":{"line":269,"column":61,"offset":7930},"end":{"line":269,"column":101,"offset":7970},"indent":[]}},{"type":"inlineCode","value":"default.rb","position":{"start":{"line":269,"column":101,"offset":7970},"end":{"line":269,"column":113,"offset":7982},"indent":[]}},{"type":"text","value":" recipe will be used.","position":{"start":{"line":269,"column":113,"offset":7982},"end":{"line":269,"column":134,"offset":8003},"indent":[]}}],"position":{"start":{"line":269,"column":1,"offset":7870},"end":{"line":269,"column":134,"offset":8003},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"default.rb example","position":{"start":{"line":271,"column":5,"offset":8009},"end":{"line":271,"column":23,"offset":8027},"indent":[]}}],"position":{"start":{"line":271,"column":1,"offset":8005},"end":{"line":271,"column":23,"offset":8027},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Including the server recipe from the apache cookbook.","position":{"start":{"line":273,"column":1,"offset":8029},"end":{"line":273,"column":54,"offset":8082},"indent":[]}}],"position":{"start":{"line":273,"column":1,"offset":8029},"end":{"line":273,"column":54,"offset":8082},"indent":[]}},{"type":"code","lang":"ruby","meta":null,"value":"include_recipe 'apache::server'","position":{"start":{"line":275,"column":1,"offset":8084},"end":{"line":277,"column":4,"offset":8127},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Now we can call sudo chef-client -z -r \"recipe","position":{"start":{"line":279,"column":1,"offset":8129},"end":{"line":279,"column":47,"offset":8175},"indent":[]}},{"type":"linkReference","identifier":"apache","label":"apache","referenceType":"shortcut","children":[{"type":"text","value":"apache","position":{"start":{"line":279,"column":48,"offset":8176},"end":{"line":279,"column":54,"offset":8182},"indent":[]}}],"position":{"start":{"line":279,"column":47,"offset":8175},"end":{"line":279,"column":55,"offset":8183},"indent":[]}},{"type":"text","value":"\"`.","position":{"start":{"line":279,"column":55,"offset":8183},"end":{"line":279,"column":58,"offset":8186},"indent":[]}}],"position":{"start":{"line":279,"column":1,"offset":8129},"end":{"line":279,"column":58,"offset":8186},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Ohai","position":{"start":{"line":281,"column":4,"offset":8191},"end":{"line":281,"column":8,"offset":8195},"indent":[]}}],"position":{"start":{"line":281,"column":1,"offset":8188},"end":{"line":281,"column":8,"offset":8195},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We need to think about distribution of the cookbooks to many different nodes.","position":{"start":{"line":283,"column":1,"offset":8197},"end":{"line":283,"column":78,"offset":8274},"indent":[]}}],"position":{"start":{"line":283,"column":1,"offset":8197},"end":{"line":283,"column":78,"offset":8274},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We may need to know a bit of information about that ","position":{"start":{"line":285,"column":1,"offset":8276},"end":{"line":285,"column":53,"offset":8328},"indent":[]}},{"type":"inlineCode","value":"node","position":{"start":{"line":285,"column":53,"offset":8328},"end":{"line":285,"column":59,"offset":8334},"indent":[]}},{"type":"text","value":". That's where ","position":{"start":{"line":285,"column":59,"offset":8334},"end":{"line":285,"column":74,"offset":8349},"indent":[]}},{"type":"inlineCode","value":"ohai","position":{"start":{"line":285,"column":74,"offset":8349},"end":{"line":285,"column":80,"offset":8355},"indent":[]}},{"type":"text","value":" comes in.","position":{"start":{"line":285,"column":80,"offset":8355},"end":{"line":285,"column":90,"offset":8365},"indent":[]}}],"position":{"start":{"line":285,"column":1,"offset":8276},"end":{"line":285,"column":90,"offset":8365},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"An object called 'node'","position":{"start":{"line":287,"column":5,"offset":8371},"end":{"line":287,"column":28,"offset":8394},"indent":[]}}],"position":{"start":{"line":287,"column":1,"offset":8367},"end":{"line":287,"column":28,"offset":8394},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We can now begin to start thinking of scale - how to deal with 100s or 1000s or similar servers.","position":{"start":{"line":289,"column":1,"offset":8396},"end":{"line":289,"column":97,"offset":8492},"indent":[]}}],"position":{"start":{"line":289,"column":1,"offset":8396},"end":{"line":289,"column":97,"offset":8492},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This webserver code that we have could be distributed to thousands of nodes, but the config might need to be different on each of these nodes.","position":{"start":{"line":291,"column":1,"offset":8494},"end":{"line":291,"column":143,"offset":8636},"indent":[]}}],"position":{"start":{"line":291,"column":1,"offset":8494},"end":{"line":291,"column":143,"offset":8636},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"What happens if a host specific config needs to be different? Eg. hostname, memory available, IP address etc. These things may very from system to system.","position":{"start":{"line":293,"column":1,"offset":8638},"end":{"line":293,"column":155,"offset":8792},"indent":[]}}],"position":{"start":{"line":293,"column":1,"offset":8638},"end":{"line":293,"column":155,"offset":8792},"indent":[]}},{"type":"paragraph","children":[{"type":"inlineCode","value":"Ohai","position":{"start":{"line":295,"column":1,"offset":8794},"end":{"line":295,"column":7,"offset":8800},"indent":[]}},{"type":"text","value":" is a system discovery tool. It's a command line tool that is required by ","position":{"start":{"line":295,"column":7,"offset":8800},"end":{"line":295,"column":81,"offset":8874},"indent":[]}},{"type":"inlineCode","value":"chef-client","position":{"start":{"line":295,"column":81,"offset":8874},"end":{"line":295,"column":94,"offset":8887},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":295,"column":94,"offset":8887},"end":{"line":295,"column":95,"offset":8888},"indent":[]}}],"position":{"start":{"line":295,"column":1,"offset":8794},"end":{"line":295,"column":95,"offset":8888},"indent":[]}},{"type":"paragraph","children":[{"type":"inlineCode","value":"ohai","position":{"start":{"line":297,"column":1,"offset":8890},"end":{"line":297,"column":7,"offset":8896},"indent":[]}},{"type":"text","value":" gives back all the node system data in JSON. Everytime ","position":{"start":{"line":297,"column":7,"offset":8896},"end":{"line":297,"column":63,"offset":8952},"indent":[]}},{"type":"inlineCode","value":"chef-client","position":{"start":{"line":297,"column":63,"offset":8952},"end":{"line":297,"column":76,"offset":8965},"indent":[]}},{"type":"text","value":" is run, it automatically executes an ","position":{"start":{"line":297,"column":76,"offset":8965},"end":{"line":297,"column":114,"offset":9003},"indent":[]}},{"type":"inlineCode","value":"ohai","position":{"start":{"line":297,"column":114,"offset":9003},"end":{"line":297,"column":120,"offset":9009},"indent":[]}},{"type":"text","value":" and allows this object (known as the node object) to be accessed. We call these attributes available as ","position":{"start":{"line":297,"column":120,"offset":9009},"end":{"line":297,"column":225,"offset":9114},"indent":[]}},{"type":"inlineCode","value":"node attributes","position":{"start":{"line":297,"column":225,"offset":9114},"end":{"line":297,"column":242,"offset":9131},"indent":[]}},{"type":"text","value":". Each ","position":{"start":{"line":297,"column":242,"offset":9131},"end":{"line":297,"column":249,"offset":9138},"indent":[]}},{"type":"inlineCode","value":"attribute","position":{"start":{"line":297,"column":249,"offset":9138},"end":{"line":297,"column":260,"offset":9149},"indent":[]}},{"type":"text","value":" also has ","position":{"start":{"line":297,"column":260,"offset":9149},"end":{"line":297,"column":270,"offset":9159},"indent":[]}},{"type":"inlineCode","value":"sub-attributes","position":{"start":{"line":297,"column":270,"offset":9159},"end":{"line":297,"column":286,"offset":9175},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":297,"column":286,"offset":9175},"end":{"line":297,"column":287,"offset":9176},"indent":[]}}],"position":{"start":{"line":297,"column":1,"offset":8890},"end":{"line":297,"column":287,"offset":9176},"indent":[]}},{"type":"export","value":"export const _frontmatter = {}","position":{"start":{"line":300,"column":1,"offset":9179},"end":{"line":300,"column":31,"offset":9209},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":300,"column":31,"offset":9209}}},"scopeImports":[],"scopeIdentifiers":[],"rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\nimport DefaultLayout from \"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/gatsby-theme-docz/src/base/Layout.js\"\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"chef---udemy-course\"\n    }}>{`Chef - Udemy Course`}</h1>\n    {\n      /* TOC */\n    }\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#chef---udemy-course\"\n        }}>{`Chef - Udemy Course`}</a><ul parentName=\"li\">\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#configuration-management\"\n            }}>{`Configuration Management`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#infrastructure-as-code\"\n            }}>{`Infrastructure as Code`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#your-first-chef-recipe\"\n            }}>{`Your First Chef Recipe`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#chef-resources\"\n            }}>{`Chef Resources`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#exploring-system-resources\"\n            }}>{`Exploring system resources`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#convergence-and-desired-state\"\n            }}>{`Convergence and Desired State`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#creating-an-exercise-work-station\"\n            }}>{`Creating an \"Exercise Work Station\"`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#organising-resources-with-ruby\"\n            }}>{`Organising Resources with Ruby`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#cookbooks\"\n            }}>{`Cookbooks`}</a><ul parentName=\"li\">\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#how-do-you-keep-track-of-changes-to-the-recipes\"\n                }}>{`How do you keep track of changes to the recipes?`}</a></li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#cookbook-components\"\n                }}>{`Cookbook Components`}</a></li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#tracking-changes-to-the-cookbooks\"\n                }}>{`Tracking changes to the Cookbooks`}</a></li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#setting-up-an-apache-cookbook\"\n                }}>{`Setting up an Apache Cookbook`}</a></li>\n            </ul></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#chef-client\"\n            }}>{`Chef Client`}</a><ul parentName=\"li\">\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#include_recipe\"\n                }}>{`include_recipe`}</a></li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#defaultrb-example\"\n                }}>{`default.rb example`}</a></li>\n            </ul></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#ohai\"\n            }}>{`Ohai`}</a><ul parentName=\"li\">\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#an-object-called-node\"\n                }}>{`An object called 'node'`}</a></li>\n            </ul></li>\n        </ul></li>\n    </ul>\n    {\n      /* /TOC */\n    }\n    <h2 {...{\n      \"id\": \"configuration-management\"\n    }}>{`Configuration Management`}</h2>\n    <p>{`Maintaining consistency for server integrity.`}</p>\n    <p>{`The process of configuration can be automated by some extent. When you reach scale, this automation is at the heart of configuration management (IT orchetration).`}</p>\n    <p>{`Imagine we are deploying a web server. If we have a config management solution, this could take minutes instead of hours.`}</p>\n    <p>{`System auditing will also be a hassle for disaster recovery too.`}</p>\n    <p>{`Revision control systems can also be version controlled with `}<inlineCode parentName=\"p\">{`infrastructure as code`}</inlineCode>{` by having these environments scripted.`}</p>\n    <h2 {...{\n      \"id\": \"infrastructure-as-code\"\n    }}>{`Infrastructure as Code`}</h2>\n    <p>{`Examples:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`version control`}</li>\n      <li parentName=\"ul\">{`testing`}</li>\n    </ul>\n    <p>{`These all helps to validate infrastructure code.`}</p>\n    <p>{`You can manage multiple cloud platforms etc.`}</p>\n    <p>{`The three things covered:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`chef development kit`}</li>\n      <li parentName=\"ul\">{`chef client`}</li>\n      <li parentName=\"ul\">{`chef server`}</li>\n    </ul>\n    <p>{`The Chef DK allows you to run local tools to write code and then upload it to a chef server. A node will be a server or machine managed by Chef.`}</p>\n    <p>{`You will get the desired state from the `}<inlineCode parentName=\"p\">{`cookbooks`}</inlineCode>{` or `}<inlineCode parentName=\"p\">{`recipes`}</inlineCode>{`.`}</p>\n    <h2 {...{\n      \"id\": \"your-first-chef-recipe\"\n    }}>{`Your First Chef Recipe`}</h2>\n    <p>{`Create a new file `}<inlineCode parentName=\"p\">{`hello.rb`}</inlineCode>{` and add `}<inlineCode parentName=\"p\">{`hello.txt`}</inlineCode>{` with Hello World.`}</p>\n    <p>{`First, give Chef a file.`}</p>\n    <p>{`Inside of the file:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-ruby\"\n      }}>{`file '/hello.txt' do\n    content 'Hello world!'\nend\n`}</code></pre>\n    <p>{`Running `}<inlineCode parentName=\"p\">{`sudo chef-client --client-mode hello.rb`}</inlineCode>{` will then build that file and update the content.`}</p>\n    <h2 {...{\n      \"id\": \"chef-resources\"\n    }}>{`Chef Resources`}</h2>\n    <p>{`Chef Resources are the fundamental building blocks of working with Chef.`}</p>\n    <p>{`The aim is to build the load balancer.`}</p>\n    <p>{`Resources describe the smallest piece we can configure in the system.`}</p>\n    <h2 {...{\n      \"id\": \"exploring-system-resources\"\n    }}>{`Exploring system resources`}</h2>\n    <p><strong parentName=\"p\">{`Example 1: Package Resource`}</strong></p>\n    <pre><code parentName=\"pre\" {...{}}>{`## Install the http package\npackage 'httd' do\n    action :install\nend\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Example 2: Service Resource`}</strong></p>\n    <pre><code parentName=\"pre\" {...{}}>{`## Run the ntp service\nservice 'ntp' do\n    action [ :enable, :start ]\nend\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Example 3: File Resource`}</strong></p>\n    <pre><code parentName=\"pre\" {...{}}>{`## Create the /etc/motd file\nfile 'etc/motd' do\n    content 'This computer is the property ...'\nend\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Example 4: File Resource`}</strong></p>\n    <pre><code parentName=\"pre\" {...{}}>{`## Remove a file\nfile 'etc/php.ini.default' do\n    action :delete\nend\n`}</code></pre>\n    <p>{`Looking back at the definition of a recipe. `}<inlineCode parentName=\"p\">{`hello.rb`}</inlineCode>{` was an example of a recipe file.`}</p>\n    <p>{`The \"type\" (eg file, service, package) and \"name\" (filename, filepath) should be action'd with \"properties\" (eg content 'Hello World!'). When we list a resource, we take `}<inlineCode parentName=\"p\">{`action`}</inlineCode>{` on that resource (eg `}<inlineCode parentName=\"p\">{`action :create`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`action :delete`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`action :enable`}</inlineCode>{`). The default action is taken if you do not list the action. The default is more of a `}<inlineCode parentName=\"p\">{`create`}</inlineCode>{` or `}<inlineCode parentName=\"p\">{`install`}</inlineCode>{` - it is important to know about what it is as you are writing out recipes.`}</p>\n    <h2 {...{\n      \"id\": \"convergence-and-desired-state\"\n    }}>{`Convergence and Desired State`}</h2>\n    <p>{`With the command `}<inlineCode parentName=\"p\">{`sudo chef-client --local-mode hello.rb`}</inlineCode>{`, when we run `}<inlineCode parentName=\"p\">{`--local-mode`}</inlineCode>{` we did it because the default mode is to talk to a `}<inlineCode parentName=\"p\">{`chef server`}</inlineCode>{`. Once we have a Chef server to work with, we can not use this mode.`}</p>\n    <p>{`What happens if you modify the content of the file that we create directly, what happens when Chef runs again?`}</p>\n    <p>{`Chef will then attempt to `}<inlineCode parentName=\"p\">{`repair`}</inlineCode>{` the file changes.`}</p>\n    <p>{`If we change the ownership for a file, Chef will only take action when it needs to. It will only take action if something is \"out of policy\".`}</p>\n    <h2 {...{\n      \"id\": \"creating-an-exercise-work-station\"\n    }}>{`Creating an \"Exercise Work Station\"`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-ruby\"\n      }}>{`# creating tree and ntp\npackage 'tree' do\n    action :install\nend\n\npackage 'ntp'\n\n# /etc/motd - content ownership\nfile '/etc/motd' do\n    content 'This is the property of me'\n    action :create\n    owner 'root'\n    group 'root'\nend\n`}</code></pre>\n    <p>{`You can also build an array and pass it into a package resource, but if we do that we won't have access to things like versions etc.`}</p>\n    <p>{`Then we can just run `}<inlineCode parentName=\"p\">{`sudo chef-client -z setup.rb`}</inlineCode>{`.`}</p>\n    <p>{`If we re-run the script, no actions will be taken if nothing needs to be modified.`}</p>\n    <h2 {...{\n      \"id\": \"organising-resources-with-ruby\"\n    }}>{`Organising Resources with Ruby`}</h2>\n    <p>{`You can also call recipes from other recipes.`}</p>\n    <p>{`Chef also runs the Ruby files synchronously.`}</p>\n    <h2 {...{\n      \"id\": \"cookbooks\"\n    }}>{`Cookbooks`}</h2>\n    <p>{`Ways to group recipes and put them into useful configurations.`}</p>\n    <p>{`Instead of a single recipe being sent to a server, we send a `}<inlineCode parentName=\"p\">{`cookbook`}</inlineCode>{`.`}</p>\n    <h3 {...{\n      \"id\": \"how-do-you-keep-track-of-changes-to-the-recipes\"\n    }}>{`How do you keep track of changes to the recipes?`}</h3>\n    <p>{`Cookbooks allow a way to package up the recipes and give it a version number and track changes.`}</p>\n    <p><inlineCode parentName=\"p\">{`A fundamental unit of configuration and policy distribution`}</inlineCode></p>\n    <p>{`When creating the cookbook, is describes a config for a particular scenario.`}</p>\n    <p>{`What to use cookbooks for:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Specifiy resources to use and in which order they are applied`}</li>\n      <li parentName=\"ul\">{`Attribute values`}</li>\n      <li parentName=\"ul\">{`File distributions`}</li>\n      <li parentName=\"ul\">{`Templates`}</li>\n      <li parentName=\"ul\">{`Extensions to Chef (lib, definitions and custom resources)`}</li>\n      <li parentName=\"ul\">{`Version Control`}</li>\n    </ul>\n    <p>{`Cookbook components:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`README`}</li>\n      <li parentName=\"ul\">{`metadata`}</li>\n      <li parentName=\"ul\">{`recipes`}</li>\n      <li parentName=\"ul\">{`testing directories (spec + test)`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"cookbook-components\"\n    }}>{`Cookbook Components`}</h3>\n    <p>{`We can create cookbooks by using `}<inlineCode parentName=\"p\">{`chef generate [cookbook|other]`}</inlineCode>{`.`}</p>\n    <p>{`When we generate a cookbook, we should give the cookbook a relevant name. Example `}<inlineCode parentName=\"p\">{`chef generate cookbooks/workstation`}</inlineCode>{` to create a `}<inlineCode parentName=\"p\">{`workstation`}</inlineCode>{` book in the `}<inlineCode parentName=\"p\">{`cookbooks`}</inlineCode>{` folder.`}</p>\n    <h3 {...{\n      \"id\": \"tracking-changes-to-the-cookbooks\"\n    }}>{`Tracking changes to the Cookbooks`}</h3>\n    <p>{`Inside of a single repository, changes are generally tracked for a single cook book.`}</p>\n    <h3 {...{\n      \"id\": \"setting-up-an-apache-cookbook\"\n    }}>{`Setting up an Apache Cookbook`}</h3>\n    <p>{`First, create a new cookbook in the cookbooks foler using `}<inlineCode parentName=\"p\">{`chef generate cookbook cookbooks/apache`}</inlineCode></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-ruby\"\n      }}>{`# Server\n\n# 1. http package install (redhat)\npackage 'httpd' do\n    action :install\nend\n\n# 2. configure default apache server file /var/www/html\nfile '/var/www/html/index.html' do\n    content '<h1>Hello from Apache</h1>'\nend\n\n# 3. download apache, enable and start the apache service\npackage 'apache' do\n    action :install\nend\n\nservice 'httpd' do\n    action [ :enable, :start ]\nend\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"chef-client\"\n    }}>{`Chef Client`}</h2>\n    <p>{`How do we apply the recipes from the cookbooks from the Chef client? How do we call multiple recipes at once?`}</p>\n    <p>{`We can use a cook book to define the scenarios here.`}</p>\n    <p>{`Say we want to call a cookbook from a particular recipe.`}</p>\n    <p>{`We can also do `}<inlineCode parentName=\"p\">{`sudo chef-client -z --runlist \"recipe[cookbook::recipe]\"`}</inlineCode>{` to run a particular recipe.`}</p>\n    <p>{`For running multiple cookbook recipes, we could do `}<inlineCode parentName=\"p\">{`sudo chef-client -z --runlist \"recipe[cookbook::recipe],recipe[another-cookbook::recipe]\"`}</inlineCode>{`. This will do a `}<inlineCode parentName=\"p\">{`chef-client`}</inlineCode>{` run in order.`}</p>\n    <p>{`The runlist DOES NOT HAVE A SPACE between recipe declarations.`}</p>\n    <h3 {...{\n      \"id\": \"include_recipe\"\n    }}>{`include_recipe`}</h3>\n    <p>{`The `}<inlineCode parentName=\"p\">{`include_recipe`}</inlineCode>{` method allows you to include a recipe from either the online cookbook stores or from one of our own cookbooks.`}</p>\n    <p>{`This is a great way to `}<inlineCode parentName=\"p\">{`wrap`}</inlineCode>{` cookbooks.`}</p>\n    <p>{`Each of the cookbooks that we generate come with a `}<inlineCode parentName=\"p\">{`default.rb`}</inlineCode>{` recipe. This default recipe can help us call other recipes.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-ruby\"\n      }}>{`# in the default.rb file for a recipe\n\n# example 'cookbook::recipe'\ninclude_recipe 'workstation::setup'\n`}</code></pre>\n    <p>{`If we now run `}<inlineCode parentName=\"p\">{`sudo chef-client -z -r \"recipe[workstation]\"`}</inlineCode>{` and omit the specific recipe, then the `}<inlineCode parentName=\"p\">{`default.rb`}</inlineCode>{` recipe will be used.`}</p>\n    <h3 {...{\n      \"id\": \"defaultrb-example\"\n    }}>{`default.rb example`}</h3>\n    <p>{`Including the server recipe from the apache cookbook.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-ruby\"\n      }}>{`include_recipe 'apache::server'\n`}</code></pre>\n    <p>{`Now we can call sudo chef-client -z -r \"recipe`}{`[apache]`}{`\"\\`.`}</p>\n    <h2 {...{\n      \"id\": \"ohai\"\n    }}>{`Ohai`}</h2>\n    <p>{`We need to think about distribution of the cookbooks to many different nodes.`}</p>\n    <p>{`We may need to know a bit of information about that `}<inlineCode parentName=\"p\">{`node`}</inlineCode>{`. That's where `}<inlineCode parentName=\"p\">{`ohai`}</inlineCode>{` comes in.`}</p>\n    <h3 {...{\n      \"id\": \"an-object-called-node\"\n    }}>{`An object called 'node'`}</h3>\n    <p>{`We can now begin to start thinking of scale - how to deal with 100s or 1000s or similar servers.`}</p>\n    <p>{`This webserver code that we have could be distributed to thousands of nodes, but the config might need to be different on each of these nodes.`}</p>\n    <p>{`What happens if a host specific config needs to be different? Eg. hostname, memory available, IP address etc. These things may very from system to system.`}</p>\n    <p><inlineCode parentName=\"p\">{`Ohai`}</inlineCode>{` is a system discovery tool. It's a command line tool that is required by `}<inlineCode parentName=\"p\">{`chef-client`}</inlineCode>{`.`}</p>\n    <p><inlineCode parentName=\"p\">{`ohai`}</inlineCode>{` gives back all the node system data in JSON. Everytime `}<inlineCode parentName=\"p\">{`chef-client`}</inlineCode>{` is run, it automatically executes an `}<inlineCode parentName=\"p\">{`ohai`}</inlineCode>{` and allows this object (known as the node object) to be accessed. We call these attributes available as `}<inlineCode parentName=\"p\">{`node attributes`}</inlineCode>{`. Each `}<inlineCode parentName=\"p\">{`attribute`}</inlineCode>{` also has `}<inlineCode parentName=\"p\">{`sub-attributes`}</inlineCode>{`.`}</p>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}