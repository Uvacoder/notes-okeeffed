{"expireTime":9007200867335933000,"key":"gatsby-plugin-mdx-entire-payload-1c6b7ca1669c3298a2140c573af97442-","val":{"mdast":{"type":"root","children":[{"type":"import","value":"import DefaultLayout from \"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/gatsby-theme-docz/src/base/Layout.js\"","position":{"start":{"line":3,"column":1,"offset":2},"end":{"line":3,"column":133,"offset":134},"indent":[]}},{"type":"export","default":true,"value":"export default DefaultLayout","position":{"start":{"line":5,"column":1,"offset":136},"end":{"line":5,"column":29,"offset":164},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"AWS EKS Starter","position":{"start":{"line":8,"column":3,"offset":169},"end":{"line":8,"column":18,"offset":184},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":167},"end":{"line":8,"column":18,"offset":184},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#aws-eks-starter","children":[{"type":"text","value":"AWS EKS Starter","position":{"start":{"line":10,"column":4,"offset":189},"end":{"line":10,"column":19,"offset":204},"indent":[]}}],"position":{"start":{"line":10,"column":3,"offset":188},"end":{"line":10,"column":38,"offset":223},"indent":[]}}],"position":{"start":{"line":10,"column":3,"offset":188},"end":{"line":10,"column":38,"offset":223},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#eks-setup-process","children":[{"type":"text","value":"EKS Setup Process","position":{"start":{"line":11,"column":6,"offset":229},"end":{"line":11,"column":23,"offset":246},"indent":[]}}],"position":{"start":{"line":11,"column":5,"offset":228},"end":{"line":11,"column":44,"offset":267},"indent":[]}}],"position":{"start":{"line":11,"column":5,"offset":228},"end":{"line":11,"column":44,"offset":267},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#eks-use-cases","children":[{"type":"text","value":"EKS Use cases","position":{"start":{"line":12,"column":8,"offset":275},"end":{"line":12,"column":21,"offset":288},"indent":[]}}],"position":{"start":{"line":12,"column":7,"offset":274},"end":{"line":12,"column":38,"offset":305},"indent":[]}}],"position":{"start":{"line":12,"column":7,"offset":274},"end":{"line":12,"column":38,"offset":305},"indent":[]}}],"position":{"start":{"line":12,"column":5,"offset":272},"end":{"line":12,"column":38,"offset":305},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#the-course","children":[{"type":"text","value":"The Course","position":{"start":{"line":13,"column":8,"offset":313},"end":{"line":13,"column":18,"offset":323},"indent":[]}}],"position":{"start":{"line":13,"column":7,"offset":312},"end":{"line":13,"column":32,"offset":337},"indent":[]}}],"position":{"start":{"line":13,"column":7,"offset":312},"end":{"line":13,"column":32,"offset":337},"indent":[]}}],"position":{"start":{"line":13,"column":5,"offset":310},"end":{"line":13,"column":32,"offset":337},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#eks-architecture","children":[{"type":"text","value":"EKS Architecture","position":{"start":{"line":14,"column":8,"offset":345},"end":{"line":14,"column":24,"offset":361},"indent":[]}}],"position":{"start":{"line":14,"column":7,"offset":344},"end":{"line":14,"column":44,"offset":381},"indent":[]}}],"position":{"start":{"line":14,"column":7,"offset":344},"end":{"line":14,"column":44,"offset":381},"indent":[]}}],"position":{"start":{"line":14,"column":5,"offset":342},"end":{"line":14,"column":44,"offset":381},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#basic-eks-setup","children":[{"type":"text","value":"Basic EKS Setup","position":{"start":{"line":15,"column":8,"offset":389},"end":{"line":15,"column":23,"offset":404},"indent":[]}}],"position":{"start":{"line":15,"column":7,"offset":388},"end":{"line":15,"column":42,"offset":423},"indent":[]}}],"position":{"start":{"line":15,"column":7,"offset":388},"end":{"line":15,"column":42,"offset":423},"indent":[]}}],"position":{"start":{"line":15,"column":5,"offset":386},"end":{"line":15,"column":42,"offset":423},"indent":[]}}],"position":{"start":{"line":12,"column":5,"offset":272},"end":{"line":15,"column":42,"offset":423},"indent":[5,5,5]}}],"position":{"start":{"line":11,"column":3,"offset":226},"end":{"line":15,"column":42,"offset":423},"indent":[3,3,3,3]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#setup-for-the-eks-cluster","children":[{"type":"text","value":"Setup for the EKS cluster","position":{"start":{"line":16,"column":6,"offset":429},"end":{"line":16,"column":31,"offset":454},"indent":[]}}],"position":{"start":{"line":16,"column":5,"offset":428},"end":{"line":16,"column":60,"offset":483},"indent":[]}}],"position":{"start":{"line":16,"column":5,"offset":428},"end":{"line":16,"column":60,"offset":483},"indent":[]}}],"position":{"start":{"line":16,"column":3,"offset":426},"end":{"line":16,"column":60,"offset":483},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#iam-user-roles","children":[{"type":"text","value":"IAM User roles","position":{"start":{"line":17,"column":6,"offset":489},"end":{"line":17,"column":20,"offset":503},"indent":[]}}],"position":{"start":{"line":17,"column":5,"offset":488},"end":{"line":17,"column":38,"offset":521},"indent":[]}}],"position":{"start":{"line":17,"column":5,"offset":488},"end":{"line":17,"column":38,"offset":521},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#iam-user-and-permissions","children":[{"type":"text","value":"IAM user and permissions","position":{"start":{"line":18,"column":10,"offset":531},"end":{"line":18,"column":34,"offset":555},"indent":[]}}],"position":{"start":{"line":18,"column":9,"offset":530},"end":{"line":18,"column":62,"offset":583},"indent":[]}}],"position":{"start":{"line":18,"column":9,"offset":530},"end":{"line":18,"column":62,"offset":583},"indent":[]}}],"position":{"start":{"line":18,"column":5,"offset":526},"end":{"line":18,"column":62,"offset":583},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#create-iam-role","children":[{"type":"text","value":"Create IAM role","position":{"start":{"line":19,"column":8,"offset":591},"end":{"line":19,"column":23,"offset":606},"indent":[]}}],"position":{"start":{"line":19,"column":7,"offset":590},"end":{"line":19,"column":42,"offset":625},"indent":[]}}],"position":{"start":{"line":19,"column":7,"offset":590},"end":{"line":19,"column":42,"offset":625},"indent":[]}}],"position":{"start":{"line":19,"column":5,"offset":588},"end":{"line":19,"column":42,"offset":625},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#create-keypair","children":[{"type":"text","value":"Create keypair","position":{"start":{"line":20,"column":8,"offset":633},"end":{"line":20,"column":22,"offset":647},"indent":[]}}],"position":{"start":{"line":20,"column":7,"offset":632},"end":{"line":20,"column":40,"offset":665},"indent":[]}}],"position":{"start":{"line":20,"column":7,"offset":632},"end":{"line":20,"column":40,"offset":665},"indent":[]}}],"position":{"start":{"line":20,"column":5,"offset":630},"end":{"line":20,"column":40,"offset":665},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#create-api-access-key-secret","children":[{"type":"text","value":"Create API Access key/-secret","position":{"start":{"line":21,"column":8,"offset":673},"end":{"line":21,"column":37,"offset":702},"indent":[]}}],"position":{"start":{"line":21,"column":7,"offset":672},"end":{"line":21,"column":69,"offset":734},"indent":[]}}],"position":{"start":{"line":21,"column":7,"offset":672},"end":{"line":21,"column":69,"offset":734},"indent":[]}}],"position":{"start":{"line":21,"column":5,"offset":670},"end":{"line":21,"column":69,"offset":734},"indent":[]}}],"position":{"start":{"line":18,"column":5,"offset":526},"end":{"line":21,"column":69,"offset":734},"indent":[5,5,5]}}],"position":{"start":{"line":17,"column":3,"offset":486},"end":{"line":21,"column":69,"offset":734},"indent":[3,3,3,3]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#create-base-aws-infrastructure","children":[{"type":"text","value":"Create base AWS infrastructure","position":{"start":{"line":22,"column":6,"offset":740},"end":{"line":22,"column":36,"offset":770},"indent":[]}}],"position":{"start":{"line":22,"column":5,"offset":739},"end":{"line":22,"column":70,"offset":804},"indent":[]}}],"position":{"start":{"line":22,"column":5,"offset":739},"end":{"line":22,"column":70,"offset":804},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#create-vpc-subnets-and-security-group-for-your-k8s-cluster","children":[{"type":"text","value":"Create VPC, subnets and security group for your K8s cluster","position":{"start":{"line":23,"column":8,"offset":812},"end":{"line":23,"column":67,"offset":871},"indent":[]}}],"position":{"start":{"line":23,"column":7,"offset":811},"end":{"line":23,"column":129,"offset":933},"indent":[]}}],"position":{"start":{"line":23,"column":7,"offset":811},"end":{"line":23,"column":129,"offset":933},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#working-on-the-console","children":[{"type":"text","value":"Working on the console","position":{"start":{"line":24,"column":10,"offset":943},"end":{"line":24,"column":32,"offset":965},"indent":[]}}],"position":{"start":{"line":24,"column":9,"offset":942},"end":{"line":24,"column":58,"offset":991},"indent":[]}}],"position":{"start":{"line":24,"column":9,"offset":942},"end":{"line":24,"column":58,"offset":991},"indent":[]}}],"position":{"start":{"line":24,"column":7,"offset":940},"end":{"line":24,"column":58,"offset":991},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#setting-stack-name","children":[{"type":"text","value":"Setting stack name","position":{"start":{"line":25,"column":10,"offset":1001},"end":{"line":25,"column":28,"offset":1019},"indent":[]}}],"position":{"start":{"line":25,"column":9,"offset":1000},"end":{"line":25,"column":50,"offset":1041},"indent":[]}}],"position":{"start":{"line":25,"column":9,"offset":1000},"end":{"line":25,"column":50,"offset":1041},"indent":[]}}],"position":{"start":{"line":25,"column":7,"offset":998},"end":{"line":25,"column":50,"offset":1041},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#continuing-on","children":[{"type":"text","value":"Continuing on","position":{"start":{"line":26,"column":10,"offset":1051},"end":{"line":26,"column":23,"offset":1064},"indent":[]}}],"position":{"start":{"line":26,"column":9,"offset":1050},"end":{"line":26,"column":40,"offset":1081},"indent":[]}}],"position":{"start":{"line":26,"column":9,"offset":1050},"end":{"line":26,"column":40,"offset":1081},"indent":[]}}],"position":{"start":{"line":26,"column":7,"offset":1048},"end":{"line":26,"column":40,"offset":1081},"indent":[]}}],"position":{"start":{"line":24,"column":7,"offset":940},"end":{"line":26,"column":40,"offset":1081},"indent":[7,7]}}],"position":{"start":{"line":23,"column":5,"offset":809},"end":{"line":26,"column":40,"offset":1081},"indent":[5,5,5]}}],"position":{"start":{"line":23,"column":5,"offset":809},"end":{"line":26,"column":40,"offset":1081},"indent":[5,5,5]}}],"position":{"start":{"line":22,"column":3,"offset":737},"end":{"line":26,"column":40,"offset":1081},"indent":[3,3,3,3]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#creating-the-eks-control-plane","children":[{"type":"text","value":"Creating the EKS control plane","position":{"start":{"line":27,"column":6,"offset":1087},"end":{"line":27,"column":36,"offset":1117},"indent":[]}}],"position":{"start":{"line":27,"column":5,"offset":1086},"end":{"line":27,"column":70,"offset":1151},"indent":[]}}],"position":{"start":{"line":27,"column":5,"offset":1086},"end":{"line":27,"column":70,"offset":1151},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#via-cli","children":[{"type":"text","value":"Via CLI","position":{"start":{"line":28,"column":8,"offset":1159},"end":{"line":28,"column":15,"offset":1166},"indent":[]}}],"position":{"start":{"line":28,"column":7,"offset":1158},"end":{"line":28,"column":26,"offset":1177},"indent":[]}}],"position":{"start":{"line":28,"column":7,"offset":1158},"end":{"line":28,"column":26,"offset":1177},"indent":[]}}],"position":{"start":{"line":28,"column":5,"offset":1156},"end":{"line":28,"column":26,"offset":1177},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#via-gui","children":[{"type":"text","value":"Via GUI","position":{"start":{"line":29,"column":8,"offset":1185},"end":{"line":29,"column":15,"offset":1192},"indent":[]}}],"position":{"start":{"line":29,"column":7,"offset":1184},"end":{"line":29,"column":26,"offset":1203},"indent":[]}}],"position":{"start":{"line":29,"column":7,"offset":1184},"end":{"line":29,"column":26,"offset":1203},"indent":[]}}],"position":{"start":{"line":29,"column":5,"offset":1182},"end":{"line":29,"column":26,"offset":1203},"indent":[]}}],"position":{"start":{"line":28,"column":5,"offset":1156},"end":{"line":29,"column":26,"offset":1203},"indent":[5]}}],"position":{"start":{"line":27,"column":3,"offset":1084},"end":{"line":29,"column":26,"offset":1203},"indent":[3,3]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#setting-up-local-kubectl-for-eks","children":[{"type":"text","value":"Setting up local kubectl for EKS","position":{"start":{"line":30,"column":6,"offset":1209},"end":{"line":30,"column":38,"offset":1241},"indent":[]}}],"position":{"start":{"line":30,"column":5,"offset":1208},"end":{"line":30,"column":74,"offset":1277},"indent":[]}}],"position":{"start":{"line":30,"column":5,"offset":1208},"end":{"line":30,"column":74,"offset":1277},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#recap-on-the-kubectl-setup","children":[{"type":"text","value":"Recap on the kubectl setup","position":{"start":{"line":31,"column":8,"offset":1285},"end":{"line":31,"column":34,"offset":1311},"indent":[]}}],"position":{"start":{"line":31,"column":7,"offset":1284},"end":{"line":31,"column":64,"offset":1341},"indent":[]}}],"position":{"start":{"line":31,"column":7,"offset":1284},"end":{"line":31,"column":64,"offset":1341},"indent":[]}}],"position":{"start":{"line":31,"column":5,"offset":1282},"end":{"line":31,"column":64,"offset":1341},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#install-kubectl--aws-iamauthenticator","children":[{"type":"text","value":"Install kubectl & aws-iam_authenticator","position":{"start":{"line":32,"column":8,"offset":1349},"end":{"line":32,"column":47,"offset":1388},"indent":[]}}],"position":{"start":{"line":32,"column":7,"offset":1348},"end":{"line":32,"column":88,"offset":1429},"indent":[]}}],"position":{"start":{"line":32,"column":7,"offset":1348},"end":{"line":32,"column":88,"offset":1429},"indent":[]}}],"position":{"start":{"line":32,"column":5,"offset":1346},"end":{"line":32,"column":88,"offset":1429},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#configure-kubectl","children":[{"type":"text","value":"Configure ","position":{"start":{"line":33,"column":8,"offset":1437},"end":{"line":33,"column":18,"offset":1447},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"kubectl","position":{"start":{"line":33,"column":19,"offset":1448},"end":{"line":33,"column":26,"offset":1455},"indent":[]}}],"position":{"start":{"line":33,"column":18,"offset":1447},"end":{"line":33,"column":27,"offset":1456},"indent":[]}}],"position":{"start":{"line":33,"column":7,"offset":1436},"end":{"line":33,"column":48,"offset":1477},"indent":[]}}],"position":{"start":{"line":33,"column":7,"offset":1436},"end":{"line":33,"column":48,"offset":1477},"indent":[]}}],"position":{"start":{"line":33,"column":5,"offset":1434},"end":{"line":33,"column":48,"offset":1477},"indent":[]}}],"position":{"start":{"line":31,"column":5,"offset":1282},"end":{"line":33,"column":48,"offset":1477},"indent":[5,5]}}],"position":{"start":{"line":30,"column":3,"offset":1206},"end":{"line":33,"column":48,"offset":1477},"indent":[3,3,3]}}],"position":{"start":{"line":11,"column":3,"offset":226},"end":{"line":33,"column":48,"offset":1477},"indent":[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3]}}],"position":{"start":{"line":10,"column":1,"offset":186},"end":{"line":33,"column":48,"offset":1477},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}}],"position":{"start":{"line":10,"column":1,"offset":186},"end":{"line":33,"column":48,"offset":1477},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"EKS Setup Process","position":{"start":{"line":35,"column":4,"offset":1482},"end":{"line":35,"column":21,"offset":1499},"indent":[]}}],"position":{"start":{"line":35,"column":1,"offset":1479},"end":{"line":35,"column":21,"offset":1499},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"EKS will setup and manage our Kubernetes clusters:","position":{"start":{"line":37,"column":1,"offset":1501},"end":{"line":37,"column":51,"offset":1551},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":1501},"end":{"line":37,"column":51,"offset":1551},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"This will create K8s master in high availability","position":{"start":{"line":39,"column":3,"offset":1555},"end":{"line":39,"column":51,"offset":1603},"indent":[]}}],"position":{"start":{"line":39,"column":3,"offset":1555},"end":{"line":39,"column":51,"offset":1603},"indent":[]}}],"position":{"start":{"line":39,"column":1,"offset":1553},"end":{"line":39,"column":51,"offset":1603},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Etcd in high availability","position":{"start":{"line":40,"column":3,"offset":1606},"end":{"line":40,"column":28,"offset":1631},"indent":[]}}],"position":{"start":{"line":40,"column":3,"offset":1606},"end":{"line":40,"column":28,"offset":1631},"indent":[]}}],"position":{"start":{"line":40,"column":1,"offset":1604},"end":{"line":40,"column":28,"offset":1631},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"IAM plugin setup","position":{"start":{"line":41,"column":3,"offset":1634},"end":{"line":41,"column":19,"offset":1650},"indent":[]}}],"position":{"start":{"line":41,"column":3,"offset":1634},"end":{"line":41,"column":19,"offset":1650},"indent":[]}}],"position":{"start":{"line":41,"column":1,"offset":1632},"end":{"line":41,"column":19,"offset":1650},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"CA setup (for TLS)","position":{"start":{"line":42,"column":3,"offset":1653},"end":{"line":42,"column":21,"offset":1671},"indent":[]}}],"position":{"start":{"line":42,"column":3,"offset":1653},"end":{"line":42,"column":21,"offset":1671},"indent":[]}}],"position":{"start":{"line":42,"column":1,"offset":1651},"end":{"line":42,"column":21,"offset":1671},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Auto scaling done","position":{"start":{"line":43,"column":3,"offset":1674},"end":{"line":43,"column":20,"offset":1691},"indent":[]}}],"position":{"start":{"line":43,"column":3,"offset":1674},"end":{"line":43,"column":20,"offset":1691},"indent":[]}}],"position":{"start":{"line":43,"column":1,"offset":1672},"end":{"line":43,"column":20,"offset":1691},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Load Balancers done (NLB and ELB)","position":{"start":{"line":44,"column":3,"offset":1694},"end":{"line":44,"column":36,"offset":1727},"indent":[]}}],"position":{"start":{"line":44,"column":3,"offset":1694},"end":{"line":44,"column":36,"offset":1727},"indent":[]}}],"position":{"start":{"line":44,"column":1,"offset":1692},"end":{"line":44,"column":36,"offset":1727},"indent":[]}}],"position":{"start":{"line":39,"column":1,"offset":1553},"end":{"line":44,"column":36,"offset":1727},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"In short, you will get an EKS control plane and you'll just need to setup the worker nodes in the availability zones.","position":{"start":{"line":46,"column":1,"offset":1729},"end":{"line":46,"column":118,"offset":1846},"indent":[]}}],"position":{"start":{"line":46,"column":1,"offset":1729},"end":{"line":46,"column":118,"offset":1846},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The from the laptop, you can use kubectl to talk to AWS.","position":{"start":{"line":48,"column":1,"offset":1848},"end":{"line":48,"column":57,"offset":1904},"indent":[]}}],"position":{"start":{"line":48,"column":1,"offset":1848},"end":{"line":48,"column":57,"offset":1904},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"There is also deep integration with AWS:","position":{"start":{"line":50,"column":1,"offset":1906},"end":{"line":50,"column":41,"offset":1946},"indent":[]}}],"position":{"start":{"line":50,"column":1,"offset":1906},"end":{"line":50,"column":41,"offset":1946},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"API calls can be audited in CloudTrail","position":{"start":{"line":52,"column":3,"offset":1950},"end":{"line":52,"column":41,"offset":1988},"indent":[]}}],"position":{"start":{"line":52,"column":3,"offset":1950},"end":{"line":52,"column":41,"offset":1988},"indent":[]}}],"position":{"start":{"line":52,"column":1,"offset":1948},"end":{"line":52,"column":41,"offset":1988},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Authetication through IAM while authorization through RBAC.","position":{"start":{"line":53,"column":3,"offset":1991},"end":{"line":53,"column":62,"offset":2050},"indent":[]}}],"position":{"start":{"line":53,"column":3,"offset":1991},"end":{"line":53,"column":62,"offset":2050},"indent":[]}}],"position":{"start":{"line":53,"column":1,"offset":1989},"end":{"line":53,"column":62,"offset":2050},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"CloudFormation to manage clusteres","position":{"start":{"line":54,"column":3,"offset":2053},"end":{"line":54,"column":37,"offset":2087},"indent":[]}}],"position":{"start":{"line":54,"column":3,"offset":2053},"end":{"line":54,"column":37,"offset":2087},"indent":[]}}],"position":{"start":{"line":54,"column":1,"offset":2051},"end":{"line":54,"column":37,"offset":2087},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Customize AMI","position":{"start":{"line":55,"column":3,"offset":2090},"end":{"line":55,"column":16,"offset":2103},"indent":[]}}],"position":{"start":{"line":55,"column":3,"offset":2090},"end":{"line":55,"column":16,"offset":2103},"indent":[]}}],"position":{"start":{"line":55,"column":1,"offset":2088},"end":{"line":55,"column":16,"offset":2103},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Load Balancers, EBS Volumes, EFS, etc...","position":{"start":{"line":56,"column":3,"offset":2106},"end":{"line":56,"column":43,"offset":2146},"indent":[]}}],"position":{"start":{"line":56,"column":3,"offset":2106},"end":{"line":56,"column":43,"offset":2146},"indent":[]}}],"position":{"start":{"line":56,"column":1,"offset":2104},"end":{"line":56,"column":43,"offset":2146},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Container registies on ECR","position":{"start":{"line":57,"column":3,"offset":2149},"end":{"line":57,"column":29,"offset":2175},"indent":[]}}],"position":{"start":{"line":57,"column":3,"offset":2149},"end":{"line":57,"column":29,"offset":2175},"indent":[]}}],"position":{"start":{"line":57,"column":1,"offset":2147},"end":{"line":57,"column":29,"offset":2175},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Networking is handled with a per-pod IP address with attached ENI","position":{"start":{"line":58,"column":3,"offset":2178},"end":{"line":58,"column":68,"offset":2243},"indent":[]}}],"position":{"start":{"line":58,"column":3,"offset":2178},"end":{"line":58,"column":68,"offset":2243},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":2176},"end":{"line":58,"column":68,"offset":2243},"indent":[]}}],"position":{"start":{"line":52,"column":1,"offset":1948},"end":{"line":58,"column":68,"offset":2243},"indent":[1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"EKS Use cases","position":{"start":{"line":60,"column":5,"offset":2249},"end":{"line":60,"column":18,"offset":2262},"indent":[]}}],"position":{"start":{"line":60,"column":1,"offset":2245},"end":{"line":60,"column":18,"offset":2262},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Can create a cluster easily","position":{"start":{"line":62,"column":3,"offset":2266},"end":{"line":62,"column":30,"offset":2293},"indent":[]}}],"position":{"start":{"line":62,"column":3,"offset":2266},"end":{"line":62,"column":30,"offset":2293},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":2264},"end":{"line":62,"column":30,"offset":2293},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Microservices in containers","position":{"start":{"line":63,"column":3,"offset":2296},"end":{"line":63,"column":30,"offset":2323},"indent":[]}}],"position":{"start":{"line":63,"column":3,"offset":2296},"end":{"line":63,"column":30,"offset":2323},"indent":[]}}],"position":{"start":{"line":63,"column":1,"offset":2294},"end":{"line":63,"column":30,"offset":2323},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Paas/Website","position":{"start":{"line":64,"column":3,"offset":2326},"end":{"line":64,"column":15,"offset":2338},"indent":[]}}],"position":{"start":{"line":64,"column":3,"offset":2326},"end":{"line":64,"column":15,"offset":2338},"indent":[]}}],"position":{"start":{"line":64,"column":1,"offset":2324},"end":{"line":64,"column":15,"offset":2338},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Migrate from on-prem to cloud","position":{"start":{"line":65,"column":3,"offset":2341},"end":{"line":65,"column":32,"offset":2370},"indent":[]}}],"position":{"start":{"line":65,"column":3,"offset":2341},"end":{"line":65,"column":32,"offset":2370},"indent":[]}}],"position":{"start":{"line":65,"column":1,"offset":2339},"end":{"line":65,"column":32,"offset":2370},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"ML cluster (support for GPU instances)","position":{"start":{"line":66,"column":3,"offset":2373},"end":{"line":66,"column":41,"offset":2411},"indent":[]}}],"position":{"start":{"line":66,"column":3,"offset":2373},"end":{"line":66,"column":41,"offset":2411},"indent":[]}}],"position":{"start":{"line":66,"column":1,"offset":2371},"end":{"line":66,"column":41,"offset":2411},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":2264},"end":{"line":66,"column":41,"offset":2411},"indent":[1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"The Course","position":{"start":{"line":68,"column":5,"offset":2417},"end":{"line":68,"column":15,"offset":2427},"indent":[]}}],"position":{"start":{"line":68,"column":1,"offset":2413},"end":{"line":68,"column":15,"offset":2427},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Deploy EKS cluster using CF","position":{"start":{"line":70,"column":3,"offset":2431},"end":{"line":70,"column":30,"offset":2458},"indent":[]}}],"position":{"start":{"line":70,"column":3,"offset":2431},"end":{"line":70,"column":30,"offset":2458},"indent":[]}}],"position":{"start":{"line":70,"column":1,"offset":2429},"end":{"line":70,"column":30,"offset":2458},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Scale Kubernetes cluster","position":{"start":{"line":71,"column":3,"offset":2461},"end":{"line":71,"column":27,"offset":2485},"indent":[]}}],"position":{"start":{"line":71,"column":3,"offset":2461},"end":{"line":71,"column":27,"offset":2485},"indent":[]}}],"position":{"start":{"line":71,"column":1,"offset":2459},"end":{"line":71,"column":27,"offset":2485},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Setup ","position":{"start":{"line":72,"column":3,"offset":2488},"end":{"line":72,"column":9,"offset":2494},"indent":[]}},{"type":"inlineCode","value":"kubectl","position":{"start":{"line":72,"column":9,"offset":2494},"end":{"line":72,"column":18,"offset":2503},"indent":[]}},{"type":"text","value":" properly","position":{"start":{"line":72,"column":18,"offset":2503},"end":{"line":72,"column":27,"offset":2512},"indent":[]}}],"position":{"start":{"line":72,"column":3,"offset":2488},"end":{"line":72,"column":27,"offset":2512},"indent":[]}}],"position":{"start":{"line":72,"column":1,"offset":2486},"end":{"line":72,"column":27,"offset":2512},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Learn how EKS works under the hood","position":{"start":{"line":73,"column":3,"offset":2515},"end":{"line":73,"column":37,"offset":2549},"indent":[]}}],"position":{"start":{"line":73,"column":3,"offset":2515},"end":{"line":73,"column":37,"offset":2549},"indent":[]}}],"position":{"start":{"line":73,"column":1,"offset":2513},"end":{"line":73,"column":37,"offset":2549},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Setup admin using Kubernetes dashboard","position":{"start":{"line":74,"column":3,"offset":2552},"end":{"line":74,"column":41,"offset":2590},"indent":[]}}],"position":{"start":{"line":74,"column":3,"offset":2552},"end":{"line":74,"column":41,"offset":2590},"indent":[]}}],"position":{"start":{"line":74,"column":1,"offset":2550},"end":{"line":74,"column":41,"offset":2590},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Deploy stateless app on EKS and expose it with public ELB","position":{"start":{"line":75,"column":3,"offset":2593},"end":{"line":75,"column":60,"offset":2650},"indent":[]}}],"position":{"start":{"line":75,"column":3,"offset":2593},"end":{"line":75,"column":60,"offset":2650},"indent":[]}}],"position":{"start":{"line":75,"column":1,"offset":2591},"end":{"line":75,"column":60,"offset":2650},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Deploy stateful app on EKS and bind it with EBS volumes","position":{"start":{"line":76,"column":3,"offset":2653},"end":{"line":76,"column":58,"offset":2708},"indent":[]}}],"position":{"start":{"line":76,"column":3,"offset":2653},"end":{"line":76,"column":58,"offset":2708},"indent":[]}}],"position":{"start":{"line":76,"column":1,"offset":2651},"end":{"line":76,"column":58,"offset":2708},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Deploy stateful app (like WordPress) with EFS","position":{"start":{"line":77,"column":3,"offset":2711},"end":{"line":77,"column":48,"offset":2756},"indent":[]}}],"position":{"start":{"line":77,"column":3,"offset":2711},"end":{"line":77,"column":48,"offset":2756},"indent":[]}}],"position":{"start":{"line":77,"column":1,"offset":2709},"end":{"line":77,"column":48,"offset":2756},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Manage Kubernetes cluster using AWS CLI and ","position":{"start":{"line":78,"column":3,"offset":2759},"end":{"line":78,"column":47,"offset":2803},"indent":[]}},{"type":"inlineCode","value":"eksctl","position":{"start":{"line":78,"column":47,"offset":2803},"end":{"line":78,"column":55,"offset":2811},"indent":[]}},{"type":"text","value":" CLI","position":{"start":{"line":78,"column":55,"offset":2811},"end":{"line":78,"column":59,"offset":2815},"indent":[]}}],"position":{"start":{"line":78,"column":3,"offset":2759},"end":{"line":78,"column":59,"offset":2815},"indent":[]}}],"position":{"start":{"line":78,"column":1,"offset":2757},"end":{"line":78,"column":59,"offset":2815},"indent":[]}}],"position":{"start":{"line":70,"column":1,"offset":2429},"end":{"line":78,"column":59,"offset":2815},"indent":[1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"EKS Architecture","position":{"start":{"line":80,"column":5,"offset":2821},"end":{"line":80,"column":21,"offset":2837},"indent":[]}}],"position":{"start":{"line":80,"column":1,"offset":2817},"end":{"line":80,"column":21,"offset":2837},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"3 AZs","position":{"start":{"line":82,"column":3,"offset":2841},"end":{"line":82,"column":8,"offset":2846},"indent":[]}}],"position":{"start":{"line":82,"column":3,"offset":2841},"end":{"line":82,"column":8,"offset":2846},"indent":[]}}],"position":{"start":{"line":82,"column":1,"offset":2839},"end":{"line":82,"column":8,"offset":2846},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Master node in each","position":{"start":{"line":83,"column":3,"offset":2849},"end":{"line":83,"column":22,"offset":2868},"indent":[]}}],"position":{"start":{"line":83,"column":3,"offset":2849},"end":{"line":83,"column":22,"offset":2868},"indent":[]}}],"position":{"start":{"line":83,"column":1,"offset":2847},"end":{"line":83,"column":22,"offset":2868},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Etcd in each","position":{"start":{"line":84,"column":3,"offset":2871},"end":{"line":84,"column":15,"offset":2883},"indent":[]}}],"position":{"start":{"line":84,"column":3,"offset":2871},"end":{"line":84,"column":15,"offset":2883},"indent":[]}}],"position":{"start":{"line":84,"column":1,"offset":2869},"end":{"line":84,"column":15,"offset":2883},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"K8s worker nodes","position":{"start":{"line":85,"column":3,"offset":2886},"end":{"line":85,"column":19,"offset":2902},"indent":[]}}],"position":{"start":{"line":85,"column":3,"offset":2886},"end":{"line":85,"column":19,"offset":2902},"indent":[]}}],"position":{"start":{"line":85,"column":1,"offset":2884},"end":{"line":85,"column":19,"offset":2902},"indent":[]}}],"position":{"start":{"line":82,"column":1,"offset":2839},"end":{"line":85,"column":19,"offset":2902},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"https://res.cloudinary.com/gitgoodclub/image/upload/v1548135634/eks-course/Screen_Shot_2019-01-22_at_4.39.24_pm.png","alt":"EKS Architecture","position":{"start":{"line":87,"column":1,"offset":2904},"end":{"line":87,"column":137,"offset":3040},"indent":[]}}],"position":{"start":{"line":87,"column":1,"offset":2904},"end":{"line":87,"column":137,"offset":3040},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"EKS itself will manage all the load and master nodes and etcd as needed.","position":{"start":{"line":89,"column":1,"offset":3042},"end":{"line":89,"column":73,"offset":3114},"indent":[]}}],"position":{"start":{"line":89,"column":1,"offset":3042},"end":{"line":89,"column":73,"offset":3114},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Basic EKS Setup","position":{"start":{"line":91,"column":5,"offset":3120},"end":{"line":91,"column":20,"offset":3135},"indent":[]}}],"position":{"start":{"line":91,"column":1,"offset":3116},"end":{"line":91,"column":20,"offset":3135},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"https://res.cloudinary.com/gitgoodclub/image/upload/v1548135634/eks-course/Screen_Shot_2019-01-22_at_4.39.24_pm.png","alt":"Basic setup","position":{"start":{"line":93,"column":1,"offset":3137},"end":{"line":93,"column":132,"offset":3268},"indent":[]}}],"position":{"start":{"line":93,"column":1,"offset":3137},"end":{"line":93,"column":132,"offset":3268},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Setup for the EKS cluster","position":{"start":{"line":95,"column":4,"offset":3273},"end":{"line":95,"column":29,"offset":3298},"indent":[]}}],"position":{"start":{"line":95,"column":1,"offset":3270},"end":{"line":95,"column":29,"offset":3298},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"IAM User roles","position":{"start":{"line":97,"column":4,"offset":3303},"end":{"line":97,"column":18,"offset":3317},"indent":[]}}],"position":{"start":{"line":97,"column":1,"offset":3300},"end":{"line":97,"column":18,"offset":3317},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"IAM user and permissions","position":{"start":{"line":99,"column":6,"offset":3324},"end":{"line":99,"column":30,"offset":3348},"indent":[]}}],"position":{"start":{"line":99,"column":1,"offset":3319},"end":{"line":99,"column":30,"offset":3348},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To be able to run through this course your IAM user needs to have certain privileges to e.g. create all the required resources and objects. According AWS Best Practices you should ","position":{"start":{"line":101,"column":1,"offset":3350},"end":{"line":101,"column":181,"offset":3530},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"never","position":{"start":{"line":101,"column":182,"offset":3531},"end":{"line":101,"column":187,"offset":3536},"indent":[]}}],"position":{"start":{"line":101,"column":181,"offset":3530},"end":{"line":101,"column":188,"offset":3537},"indent":[]}},{"type":"text","value":" use your root account for working with AWS services. E.g. to demonstrate the Hands-On lectures, the user ","position":{"start":{"line":101,"column":188,"offset":3537},"end":{"line":101,"column":294,"offset":3643},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"eks-course","position":{"start":{"line":101,"column":295,"offset":3644},"end":{"line":101,"column":305,"offset":3654},"indent":[]}}],"position":{"start":{"line":101,"column":294,"offset":3643},"end":{"line":101,"column":306,"offset":3655},"indent":[]}},{"type":"text","value":" has been used.","position":{"start":{"line":101,"column":306,"offset":3655},"end":{"line":101,"column":321,"offset":3670},"indent":[]}}],"position":{"start":{"line":101,"column":1,"offset":3350},"end":{"line":101,"column":321,"offset":3670},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"There are 2 attempts to follow:","position":{"start":{"line":103,"column":1,"offset":3672},"end":{"line":103,"column":32,"offset":3703},"indent":[]}}],"position":{"start":{"line":103,"column":1,"offset":3672},"end":{"line":103,"column":32,"offset":3703},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Provide admin access\nlogin with an admin of your AWS account\ngo to \"IAM\" => \"users\" => click on your user => \"Permissions\" => \"Add permission\" => then search for ","position":{"start":{"line":105,"column":4,"offset":3708},"end":{"line":107,"column":105,"offset":3876},"indent":[4,4]}},{"type":"emphasis","children":[{"type":"text","value":"AdministratorAccess","position":{"start":{"line":107,"column":106,"offset":3877},"end":{"line":107,"column":125,"offset":3896},"indent":[]}}],"position":{"start":{"line":107,"column":105,"offset":3876},"end":{"line":107,"column":126,"offset":3897},"indent":[]}},{"type":"text","value":" and attach this policy\nBasically your user just requires ","position":{"start":{"line":107,"column":126,"offset":3897},"end":{"line":108,"column":38,"offset":3958},"indent":[4]}},{"type":"emphasis","children":[{"type":"text","value":"one","position":{"start":{"line":108,"column":39,"offset":3959},"end":{"line":108,"column":42,"offset":3962},"indent":[]}}],"position":{"start":{"line":108,"column":38,"offset":3958},"end":{"line":108,"column":43,"offset":3963},"indent":[]}},{"type":"text","value":" policy being attached","position":{"start":{"line":108,"column":43,"offset":3963},"end":{"line":108,"column":65,"offset":3985},"indent":[]}}],"position":{"start":{"line":105,"column":4,"offset":3708},"end":{"line":108,"column":65,"offset":3985},"indent":[4,4,4]}}],"position":{"start":{"line":105,"column":1,"offset":3705},"end":{"line":108,"column":65,"offset":3985},"indent":[1,1,1]}}],"position":{"start":{"line":105,"column":1,"offset":3705},"end":{"line":108,"column":65,"offset":3985},"indent":[1,1,1]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"AdministratorAccess","position":{"start":{"line":110,"column":3,"offset":3989},"end":{"line":110,"column":22,"offset":4008},"indent":[]}}],"position":{"start":{"line":110,"column":3,"offset":3989},"end":{"line":110,"column":22,"offset":4008},"indent":[]}}],"position":{"start":{"line":110,"column":1,"offset":3987},"end":{"line":110,"column":22,"offset":4008},"indent":[]}}],"position":{"start":{"line":110,"column":1,"offset":3987},"end":{"line":110,"column":22,"offset":4008},"indent":[]}},{"type":"list","ordered":true,"start":2,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Provide a dedicated list of privileges/policies\nto cover all the required privileges, first you have to create additional policies\nEKS-Admin-policy:","position":{"start":{"line":112,"column":4,"offset":4013},"end":{"line":114,"column":21,"offset":4167},"indent":[4,4]}}],"position":{"start":{"line":112,"column":4,"offset":4013},"end":{"line":114,"column":21,"offset":4167},"indent":[4,4]}}],"position":{"start":{"line":112,"column":1,"offset":4010},"end":{"line":114,"column":21,"offset":4167},"indent":[1,1]}}],"position":{"start":{"line":112,"column":1,"offset":4010},"end":{"line":114,"column":21,"offset":4167},"indent":[1,1]}},{"type":"code","lang":"javascript","meta":null,"value":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\"eks:*\"],\n      \"Resource\": \"*\"\n    }\n  ]\n}","position":{"start":{"line":116,"column":1,"offset":4169},"end":{"line":127,"column":4,"offset":4324},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"CloudFormation-Admin-policy:","position":{"start":{"line":129,"column":1,"offset":4326},"end":{"line":129,"column":29,"offset":4354},"indent":[]}}],"position":{"start":{"line":129,"column":1,"offset":4326},"end":{"line":129,"column":29,"offset":4354},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\"cloudformation:*\"],\n      \"Resource\": \"*\"\n    }\n  ]\n}","position":{"start":{"line":131,"column":1,"offset":4356},"end":{"line":142,"column":4,"offset":4522},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Finally, assign the following policies to your IAM user you are going to use throughout the course:","position":{"start":{"line":144,"column":1,"offset":4524},"end":{"line":144,"column":100,"offset":4623},"indent":[]}}],"position":{"start":{"line":144,"column":1,"offset":4524},"end":{"line":144,"column":100,"offset":4623},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"AmazonEC2FullAccess","position":{"start":{"line":146,"column":3,"offset":4627},"end":{"line":146,"column":22,"offset":4646},"indent":[]}}],"position":{"start":{"line":146,"column":3,"offset":4627},"end":{"line":146,"column":22,"offset":4646},"indent":[]}}],"position":{"start":{"line":146,"column":1,"offset":4625},"end":{"line":146,"column":22,"offset":4646},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"IAMFullAccess","position":{"start":{"line":147,"column":3,"offset":4649},"end":{"line":147,"column":16,"offset":4662},"indent":[]}}],"position":{"start":{"line":147,"column":3,"offset":4649},"end":{"line":147,"column":16,"offset":4662},"indent":[]}}],"position":{"start":{"line":147,"column":1,"offset":4647},"end":{"line":147,"column":16,"offset":4662},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"AmazonVPCFullAccess","position":{"start":{"line":148,"column":3,"offset":4665},"end":{"line":148,"column":22,"offset":4684},"indent":[]}}],"position":{"start":{"line":148,"column":3,"offset":4665},"end":{"line":148,"column":22,"offset":4684},"indent":[]}}],"position":{"start":{"line":148,"column":1,"offset":4663},"end":{"line":148,"column":22,"offset":4684},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"CloudFormation-Admin-policy","position":{"start":{"line":149,"column":3,"offset":4687},"end":{"line":149,"column":30,"offset":4714},"indent":[]}}],"position":{"start":{"line":149,"column":3,"offset":4687},"end":{"line":149,"column":30,"offset":4714},"indent":[]}}],"position":{"start":{"line":149,"column":1,"offset":4685},"end":{"line":149,"column":30,"offset":4714},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"EKS-Admin-policy\nwhere the last 2 policies are the ones you created above","position":{"start":{"line":150,"column":3,"offset":4717},"end":{"line":151,"column":59,"offset":4792},"indent":[3]}}],"position":{"start":{"line":150,"column":3,"offset":4717},"end":{"line":151,"column":59,"offset":4792},"indent":[3]}}],"position":{"start":{"line":150,"column":1,"offset":4715},"end":{"line":151,"column":59,"offset":4792},"indent":[1]}}],"position":{"start":{"line":146,"column":1,"offset":4625},"end":{"line":151,"column":59,"offset":4792},"indent":[1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Create IAM role","position":{"start":{"line":153,"column":5,"offset":4798},"end":{"line":153,"column":20,"offset":4813},"indent":[]}}],"position":{"start":{"line":153,"column":1,"offset":4794},"end":{"line":153,"column":20,"offset":4813},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"open ","position":{"start":{"line":155,"column":3,"offset":4817},"end":{"line":155,"column":8,"offset":4822},"indent":[]}},{"type":"inlineCode","value":"https://console.aws.amazon.com/iam/","position":{"start":{"line":155,"column":8,"offset":4822},"end":{"line":155,"column":45,"offset":4859},"indent":[]}},{"type":"text","value":" and choose ","position":{"start":{"line":155,"column":45,"offset":4859},"end":{"line":155,"column":57,"offset":4871},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Roles","position":{"start":{"line":155,"column":58,"offset":4872},"end":{"line":155,"column":63,"offset":4877},"indent":[]}}],"position":{"start":{"line":155,"column":57,"offset":4871},"end":{"line":155,"column":64,"offset":4878},"indent":[]}},{"type":"text","value":" => ","position":{"start":{"line":155,"column":64,"offset":4878},"end":{"line":155,"column":68,"offset":4882},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"create role","position":{"start":{"line":155,"column":69,"offset":4883},"end":{"line":155,"column":80,"offset":4894},"indent":[]}}],"position":{"start":{"line":155,"column":68,"offset":4882},"end":{"line":155,"column":81,"offset":4895},"indent":[]}}],"position":{"start":{"line":155,"column":3,"offset":4817},"end":{"line":155,"column":81,"offset":4895},"indent":[]}}],"position":{"start":{"line":155,"column":1,"offset":4815},"end":{"line":155,"column":81,"offset":4895},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"choose ","position":{"start":{"line":156,"column":3,"offset":4898},"end":{"line":156,"column":10,"offset":4905},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"EKS","position":{"start":{"line":156,"column":11,"offset":4906},"end":{"line":156,"column":14,"offset":4909},"indent":[]}}],"position":{"start":{"line":156,"column":10,"offset":4905},"end":{"line":156,"column":15,"offset":4910},"indent":[]}},{"type":"text","value":" service followed by ","position":{"start":{"line":156,"column":15,"offset":4910},"end":{"line":156,"column":36,"offset":4931},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Allows Amazon EKS to manage your clusters on your behalf","position":{"start":{"line":156,"column":37,"offset":4932},"end":{"line":156,"column":93,"offset":4988},"indent":[]}}],"position":{"start":{"line":156,"column":36,"offset":4931},"end":{"line":156,"column":94,"offset":4989},"indent":[]}}],"position":{"start":{"line":156,"column":3,"offset":4898},"end":{"line":156,"column":94,"offset":4989},"indent":[]}}],"position":{"start":{"line":156,"column":1,"offset":4896},"end":{"line":156,"column":94,"offset":4989},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"choose ","position":{"start":{"line":157,"column":3,"offset":4992},"end":{"line":157,"column":10,"offset":4999},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Next: Permissions","position":{"start":{"line":157,"column":11,"offset":5000},"end":{"line":157,"column":28,"offset":5017},"indent":[]}}],"position":{"start":{"line":157,"column":10,"offset":4999},"end":{"line":157,"column":29,"offset":5018},"indent":[]}}],"position":{"start":{"line":157,"column":3,"offset":4992},"end":{"line":157,"column":29,"offset":5018},"indent":[]}}],"position":{"start":{"line":157,"column":1,"offset":4990},"end":{"line":157,"column":29,"offset":5018},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"click ","position":{"start":{"line":158,"column":3,"offset":5021},"end":{"line":158,"column":9,"offset":5027},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Next: Review","position":{"start":{"line":158,"column":10,"offset":5028},"end":{"line":158,"column":22,"offset":5040},"indent":[]}}],"position":{"start":{"line":158,"column":9,"offset":5027},"end":{"line":158,"column":23,"offset":5041},"indent":[]}}],"position":{"start":{"line":158,"column":3,"offset":5021},"end":{"line":158,"column":23,"offset":5041},"indent":[]}}],"position":{"start":{"line":158,"column":1,"offset":5019},"end":{"line":158,"column":23,"offset":5041},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"enter a ","position":{"start":{"line":159,"column":3,"offset":5044},"end":{"line":159,"column":11,"offset":5052},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"unique","position":{"start":{"line":159,"column":12,"offset":5053},"end":{"line":159,"column":18,"offset":5059},"indent":[]}}],"position":{"start":{"line":159,"column":11,"offset":5052},"end":{"line":159,"column":19,"offset":5060},"indent":[]}},{"type":"text","value":" Role name, ","position":{"start":{"line":159,"column":19,"offset":5060},"end":{"line":159,"column":31,"offset":5072},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"EKS-course-role","position":{"start":{"line":159,"column":32,"offset":5073},"end":{"line":159,"column":47,"offset":5088},"indent":[]}}],"position":{"start":{"line":159,"column":31,"offset":5072},"end":{"line":159,"column":48,"offset":5089},"indent":[]}},{"type":"text","value":" and click ","position":{"start":{"line":159,"column":48,"offset":5089},"end":{"line":159,"column":59,"offset":5100},"indent":[]}},{"type":"emphasis","children":[{"type":"emphasis","children":[{"type":"text","value":"Create Role","position":{"start":{"line":159,"column":61,"offset":5102},"end":{"line":159,"column":72,"offset":5113},"indent":[]}}],"position":{"start":{"line":159,"column":60,"offset":5101},"end":{"line":159,"column":73,"offset":5114},"indent":[]}}],"position":{"start":{"line":159,"column":59,"offset":5100},"end":{"line":159,"column":74,"offset":5115},"indent":[]}}],"position":{"start":{"line":159,"column":3,"offset":5044},"end":{"line":159,"column":74,"offset":5115},"indent":[]}}],"position":{"start":{"line":159,"column":1,"offset":5042},"end":{"line":159,"column":74,"offset":5115},"indent":[]}}],"position":{"start":{"line":155,"column":1,"offset":4815},"end":{"line":159,"column":74,"offset":5115},"indent":[1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Create keypair","position":{"start":{"line":161,"column":5,"offset":5121},"end":{"line":161,"column":19,"offset":5135},"indent":[]}}],"position":{"start":{"line":161,"column":1,"offset":5117},"end":{"line":161,"column":19,"offset":5135},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"open EC2 dashboard ","position":{"start":{"line":163,"column":3,"offset":5139},"end":{"line":163,"column":22,"offset":5158},"indent":[]}},{"type":"inlineCode","value":"https://console.aws.amazon.com/ec2","position":{"start":{"line":163,"column":22,"offset":5158},"end":{"line":163,"column":58,"offset":5194},"indent":[]}}],"position":{"start":{"line":163,"column":3,"offset":5139},"end":{"line":163,"column":58,"offset":5194},"indent":[]}}],"position":{"start":{"line":163,"column":1,"offset":5137},"end":{"line":163,"column":58,"offset":5194},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"click ","position":{"start":{"line":164,"column":3,"offset":5197},"end":{"line":164,"column":9,"offset":5203},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"KeyPairs","position":{"start":{"line":164,"column":10,"offset":5204},"end":{"line":164,"column":18,"offset":5212},"indent":[]}}],"position":{"start":{"line":164,"column":9,"offset":5203},"end":{"line":164,"column":19,"offset":5213},"indent":[]}},{"type":"text","value":" in left navigation bar under section \"Network&Security\"","position":{"start":{"line":164,"column":19,"offset":5213},"end":{"line":164,"column":75,"offset":5269},"indent":[]}}],"position":{"start":{"line":164,"column":3,"offset":5197},"end":{"line":164,"column":75,"offset":5269},"indent":[]}}],"position":{"start":{"line":164,"column":1,"offset":5195},"end":{"line":164,"column":75,"offset":5269},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"click ","position":{"start":{"line":165,"column":3,"offset":5272},"end":{"line":165,"column":9,"offset":5278},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Create Key Pair","position":{"start":{"line":165,"column":10,"offset":5279},"end":{"line":165,"column":25,"offset":5294},"indent":[]}}],"position":{"start":{"line":165,"column":9,"offset":5278},"end":{"line":165,"column":26,"offset":5295},"indent":[]}}],"position":{"start":{"line":165,"column":3,"offset":5272},"end":{"line":165,"column":26,"offset":5295},"indent":[]}}],"position":{"start":{"line":165,"column":1,"offset":5270},"end":{"line":165,"column":26,"offset":5295},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"provide name for keypair, ","position":{"start":{"line":166,"column":3,"offset":5298},"end":{"line":166,"column":29,"offset":5324},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"eks-course","position":{"start":{"line":166,"column":30,"offset":5325},"end":{"line":166,"column":40,"offset":5335},"indent":[]}}],"position":{"start":{"line":166,"column":29,"offset":5324},"end":{"line":166,"column":41,"offset":5336},"indent":[]}},{"type":"text","value":" and click ","position":{"start":{"line":166,"column":41,"offset":5336},"end":{"line":166,"column":52,"offset":5347},"indent":[]}},{"type":"emphasis","children":[{"type":"emphasis","children":[{"type":"text","value":"Create","position":{"start":{"line":166,"column":54,"offset":5349},"end":{"line":166,"column":60,"offset":5355},"indent":[]}}],"position":{"start":{"line":166,"column":53,"offset":5348},"end":{"line":166,"column":61,"offset":5356},"indent":[]}}],"position":{"start":{"line":166,"column":52,"offset":5347},"end":{"line":166,"column":62,"offset":5357},"indent":[]}}],"position":{"start":{"line":166,"column":3,"offset":5298},"end":{"line":166,"column":62,"offset":5357},"indent":[]}}],"position":{"start":{"line":166,"column":1,"offset":5296},"end":{"line":166,"column":62,"offset":5357},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"!! the keypair will be downloaded immediately => file ","position":{"start":{"line":167,"column":3,"offset":5360},"end":{"line":167,"column":57,"offset":5414},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"eks-course.pem","position":{"start":{"line":167,"column":58,"offset":5415},"end":{"line":167,"column":72,"offset":5429},"indent":[]}}],"position":{"start":{"line":167,"column":57,"offset":5414},"end":{"line":167,"column":73,"offset":5430},"indent":[]}},{"type":"text","value":" !!","position":{"start":{"line":167,"column":73,"offset":5430},"end":{"line":167,"column":76,"offset":5433},"indent":[]}}],"position":{"start":{"line":167,"column":3,"offset":5360},"end":{"line":167,"column":76,"offset":5433},"indent":[]}}],"position":{"start":{"line":167,"column":1,"offset":5358},"end":{"line":167,"column":76,"offset":5433},"indent":[]}}],"position":{"start":{"line":163,"column":1,"offset":5137},"end":{"line":167,"column":76,"offset":5433},"indent":[1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Create API Access key/-secret","position":{"start":{"line":169,"column":5,"offset":5439},"end":{"line":169,"column":34,"offset":5468},"indent":[]}}],"position":{"start":{"line":169,"column":1,"offset":5435},"end":{"line":169,"column":34,"offset":5468},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"create key+secret via AWS console","position":{"start":{"line":171,"column":3,"offset":5472},"end":{"line":171,"column":36,"offset":5505},"indent":[]}}],"position":{"start":{"line":171,"column":3,"offset":5472},"end":{"line":171,"column":36,"offset":5505},"indent":[]}}],"position":{"start":{"line":171,"column":1,"offset":5470},"end":{"line":171,"column":36,"offset":5505},"indent":[]}}],"position":{"start":{"line":171,"column":1,"offset":5470},"end":{"line":171,"column":36,"offset":5505},"indent":[]}},{"type":"code","lang":"bash","meta":null,"value":"AWS-console => IAM => Users => <your user> => tab _Security credentials_ => button _Create access key_","position":{"start":{"line":173,"column":1,"offset":5507},"end":{"line":175,"column":4,"offset":5621},"indent":[1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Create base AWS infrastructure","position":{"start":{"line":177,"column":4,"offset":5626},"end":{"line":177,"column":34,"offset":5656},"indent":[]}}],"position":{"start":{"line":177,"column":1,"offset":5623},"end":{"line":177,"column":34,"offset":5656},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Create VPC, subnets and security group for your K8s cluster","position":{"start":{"line":179,"column":5,"offset":5662},"end":{"line":179,"column":64,"offset":5721},"indent":[]}}],"position":{"start":{"line":179,"column":1,"offset":5658},"end":{"line":179,"column":64,"offset":5721},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"https://res.cloudinary.com/gitgoodclub/image/upload/v1548137228/eks-course/Screen_Shot_2019-01-22_at_5.06.52_pm.png","alt":"AWS EKS Cluster setup","position":{"start":{"line":181,"column":1,"offset":5723},"end":{"line":181,"column":142,"offset":5864},"indent":[]}}],"position":{"start":{"line":181,"column":1,"offset":5723},"end":{"line":181,"column":142,"offset":5864},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To create a VPC there is a prepared CloudFormation template to use. It creates a VPC including 3 Subnets\nAt the moment EKS is only available in the following 2 regions:","position":{"start":{"line":183,"column":1,"offset":5866},"end":{"line":184,"column":64,"offset":6034},"indent":[1]}}],"position":{"start":{"line":183,"column":1,"offset":5866},"end":{"line":184,"column":64,"offset":6034},"indent":[1]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"US West (Oregon), ","position":{"start":{"line":186,"column":3,"offset":6038},"end":{"line":186,"column":21,"offset":6056},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"us-west-2","position":{"start":{"line":186,"column":22,"offset":6057},"end":{"line":186,"column":31,"offset":6066},"indent":[]}}],"position":{"start":{"line":186,"column":21,"offset":6056},"end":{"line":186,"column":32,"offset":6067},"indent":[]}}],"position":{"start":{"line":186,"column":3,"offset":6038},"end":{"line":186,"column":32,"offset":6067},"indent":[]}}],"position":{"start":{"line":186,"column":1,"offset":6036},"end":{"line":186,"column":32,"offset":6067},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"US East (N.Virginia), ","position":{"start":{"line":187,"column":3,"offset":6070},"end":{"line":187,"column":25,"offset":6092},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"us-east-1","position":{"start":{"line":187,"column":26,"offset":6093},"end":{"line":187,"column":35,"offset":6102},"indent":[]}}],"position":{"start":{"line":187,"column":25,"offset":6092},"end":{"line":187,"column":36,"offset":6103},"indent":[]}}],"position":{"start":{"line":187,"column":3,"offset":6070},"end":{"line":187,"column":36,"offset":6103},"indent":[]}}],"position":{"start":{"line":187,"column":1,"offset":6068},"end":{"line":187,"column":36,"offset":6103},"indent":[]}}],"position":{"start":{"line":186,"column":1,"offset":6036},"end":{"line":187,"column":36,"offset":6103},"indent":[1]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Working on the console","position":{"start":{"line":189,"column":6,"offset":6110},"end":{"line":189,"column":28,"offset":6132},"indent":[]}}],"position":{"start":{"line":189,"column":1,"offset":6105},"end":{"line":189,"column":28,"offset":6132},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"open ","position":{"start":{"line":191,"column":3,"offset":6136},"end":{"line":191,"column":8,"offset":6141},"indent":[]}},{"type":"inlineCode","value":"https://console.aws.amazon.com/cloudformation/","position":{"start":{"line":191,"column":8,"offset":6141},"end":{"line":191,"column":56,"offset":6189},"indent":[]}},{"type":"text","value":" and select one of the above mentioned regions","position":{"start":{"line":191,"column":56,"offset":6189},"end":{"line":191,"column":102,"offset":6235},"indent":[]}}],"position":{"start":{"line":191,"column":3,"offset":6136},"end":{"line":191,"column":102,"offset":6235},"indent":[]}}],"position":{"start":{"line":191,"column":1,"offset":6134},"end":{"line":191,"column":102,"offset":6235},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"click ","position":{"start":{"line":192,"column":3,"offset":6238},"end":{"line":192,"column":9,"offset":6244},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Create Stack","position":{"start":{"line":192,"column":10,"offset":6245},"end":{"line":192,"column":22,"offset":6257},"indent":[]}}],"position":{"start":{"line":192,"column":9,"offset":6244},"end":{"line":192,"column":23,"offset":6258},"indent":[]}}],"position":{"start":{"line":192,"column":3,"offset":6238},"end":{"line":192,"column":23,"offset":6258},"indent":[]}}],"position":{"start":{"line":192,"column":1,"offset":6236},"end":{"line":192,"column":23,"offset":6258},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"select ","position":{"start":{"line":193,"column":3,"offset":6261},"end":{"line":193,"column":10,"offset":6268},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Upload a template to Amazon S3","position":{"start":{"line":193,"column":11,"offset":6269},"end":{"line":193,"column":41,"offset":6299},"indent":[]}}],"position":{"start":{"line":193,"column":10,"offset":6268},"end":{"line":193,"column":42,"offset":6300},"indent":[]}},{"type":"text","value":" , click ","position":{"start":{"line":193,"column":42,"offset":6300},"end":{"line":193,"column":51,"offset":6309},"indent":[]}},{"type":"emphasis","children":[{"type":"emphasis","children":[{"type":"text","value":"Upload file","position":{"start":{"line":193,"column":53,"offset":6311},"end":{"line":193,"column":64,"offset":6322},"indent":[]}}],"position":{"start":{"line":193,"column":52,"offset":6310},"end":{"line":193,"column":65,"offset":6323},"indent":[]}}],"position":{"start":{"line":193,"column":51,"offset":6309},"end":{"line":193,"column":66,"offset":6324},"indent":[]}},{"type":"text","value":" and select ","position":{"start":{"line":193,"column":66,"offset":6324},"end":{"line":193,"column":78,"offset":6336},"indent":[]}},{"type":"inlineCode","value":"eks-course-vpc.yaml","position":{"start":{"line":193,"column":78,"offset":6336},"end":{"line":193,"column":99,"offset":6357},"indent":[]}}],"position":{"start":{"line":193,"column":3,"offset":6261},"end":{"line":193,"column":99,"offset":6357},"indent":[]}}],"position":{"start":{"line":193,"column":1,"offset":6259},"end":{"line":193,"column":99,"offset":6357},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"click ","position":{"start":{"line":194,"column":3,"offset":6360},"end":{"line":194,"column":9,"offset":6366},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Next","position":{"start":{"line":194,"column":10,"offset":6367},"end":{"line":194,"column":14,"offset":6371},"indent":[]}}],"position":{"start":{"line":194,"column":9,"offset":6366},"end":{"line":194,"column":15,"offset":6372},"indent":[]}}],"position":{"start":{"line":194,"column":3,"offset":6360},"end":{"line":194,"column":15,"offset":6372},"indent":[]}}],"position":{"start":{"line":194,"column":1,"offset":6358},"end":{"line":194,"column":15,"offset":6372},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"provide data in the ","position":{"start":{"line":195,"column":3,"offset":6375},"end":{"line":195,"column":23,"offset":6395},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Specify Details","position":{"start":{"line":195,"column":24,"offset":6396},"end":{"line":195,"column":39,"offset":6411},"indent":[]}}],"position":{"start":{"line":195,"column":23,"offset":6395},"end":{"line":195,"column":40,"offset":6412},"indent":[]}},{"type":"text","value":" overview:","position":{"start":{"line":195,"column":40,"offset":6412},"end":{"line":195,"column":50,"offset":6422},"indent":[]}}],"position":{"start":{"line":195,"column":3,"offset":6375},"end":{"line":195,"column":50,"offset":6422},"indent":[]}}],"position":{"start":{"line":195,"column":1,"offset":6373},"end":{"line":195,"column":50,"offset":6422},"indent":[]}}],"position":{"start":{"line":191,"column":1,"offset":6134},"end":{"line":195,"column":50,"offset":6422},"indent":[1,1,1,1]}},{"type":"code","lang":"yaml","meta":null,"value":"# eks-course-vpc.yaml\n---\nAWSTemplateFormatVersion: '2010-09-09'\nDescription: 'AWS EKS course'\n\nParameters:\n  VpcBlock:\n    Type: String\n    Default: 192.168.0.0/16\n    Description: CIDR range for VPC\n\n  Subnet01Block:\n    Type: String\n    Default: 192.168.64.0/18\n    Description: CIDR for first subnet within VPC\n\n  Subnet02Block:\n    Type: String\n    Default: 192.168.128.0/18\n    Description: CIDR for second subnet within VPC\n\n  Subnet03Block:\n    Type: String\n    Default: 192.168.192.0/18\n    Description: CIDR for third subnet within VPC\n\nResources:\n  VPC:\n    Type: AWS::EC2::VPC\n    Properties:\n      CidrBlock: !Ref VpcBlock\n      EnableDnsSupport: true\n      EnableDnsHostnames: true\n      Tags:\n        - Key: Name\n          Value: !Sub '${AWS::StackName}-VPC'\n\n  InternetGateway:\n    Type: 'AWS::EC2::InternetGateway'\n\n  VPCGatewayAttachment:\n    Type: 'AWS::EC2::VPCGatewayAttachment'\n    Properties:\n      InternetGatewayId: !Ref InternetGateway\n      VpcId: !Ref VPC\n\n  RouteTable:\n    Type: AWS::EC2::RouteTable\n    Properties:\n      VpcId: !Ref VPC\n      Tags:\n        - Key: Name\n          Value: Public Subnets\n        - Key: Network\n          Value: Public\n\n  Route:\n    DependsOn: VPCGatewayAttachment\n    Type: AWS::EC2::Route\n    Properties:\n      RouteTableId: !Ref RouteTable\n      DestinationCidrBlock: 0.0.0.0/0\n      GatewayId: !Ref InternetGateway\n\n  Subnet01:\n    Type: AWS::EC2::Subnet\n    Properties:\n      AvailabilityZone:\n        Fn::Select:\n          - '0'\n          - Fn::GetAZs:\n              Ref: AWS::Region\n      CidrBlock:\n        Ref: Subnet01Block\n      VpcId:\n        Ref: VPC\n      Tags:\n        - Key: Name\n          Value: !Sub '${AWS::StackName}-Subnet1'\n\n  Subnet02:\n    Type: AWS::EC2::Subnet\n    Properties:\n      AvailabilityZone:\n        Fn::Select:\n          - '1'\n          - Fn::GetAZs:\n              Ref: AWS::Region\n      CidrBlock:\n        Ref: Subnet02Block\n      VpcId:\n        Ref: VPC\n      Tags:\n        - Key: Name\n          Value: !Sub '${AWS::StackName}-Subnet2'\n\n  Subnet03:\n    Type: AWS::EC2::Subnet\n\n    Properties:\n      AvailabilityZone:\n        Fn::Select:\n          - '2'\n          - Fn::GetAZs:\n              Ref: AWS::Region\n      CidrBlock:\n        Ref: Subnet03Block\n      VpcId:\n        Ref: VPC\n      Tags:\n        - Key: Name\n          Value: !Sub '${AWS::StackName}-Subnet3'\n\n  Subnet01RouteTableAssociation:\n    Type: AWS::EC2::SubnetRouteTableAssociation\n    Properties:\n      SubnetId: !Ref Subnet01\n      RouteTableId: !Ref RouteTable\n\n  Subnet02RouteTableAssociation:\n    Type: AWS::EC2::SubnetRouteTableAssociation\n    Properties:\n      SubnetId: !Ref Subnet02\n      RouteTableId: !Ref RouteTable\n\n  Subnet03RouteTableAssociation:\n    Type: AWS::EC2::SubnetRouteTableAssociation\n    Properties:\n      SubnetId: !Ref Subnet03\n      RouteTableId: !Ref RouteTable\n\n  ControlPlaneSecurityGroup:\n    Type: AWS::EC2::SecurityGroup\n    Properties:\n      GroupDescription: Cluster communication with worker nodes\n      VpcId: !Ref VPC\n\nOutputs:\n  SubnetIds:\n    Description: Your subnets\n    Value: !Join [',', [!Ref Subnet01, !Ref Subnet02, !Ref Subnet03]]\n\n  SecurityGroups:\n    Description: SecGroup for communication betw controlplane and workernodes\n    Value: !Join [',', [!Ref ControlPlaneSecurityGroup]]\n\n  VpcId:\n    Description: The VPC Id\n    Value: !Ref VPC","position":{"start":{"line":197,"column":1,"offset":6424},"end":{"line":347,"column":4,"offset":9789},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Setting stack name","position":{"start":{"line":349,"column":6,"offset":9796},"end":{"line":349,"column":24,"offset":9814},"indent":[]}}],"position":{"start":{"line":349,"column":1,"offset":9791},"end":{"line":349,"column":24,"offset":9814},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Stack name : set stack name ","position":{"start":{"line":351,"column":3,"offset":9818},"end":{"line":351,"column":31,"offset":9846},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"EKS-course-stack","position":{"start":{"line":351,"column":32,"offset":9847},"end":{"line":351,"column":48,"offset":9863},"indent":[]}}],"position":{"start":{"line":351,"column":31,"offset":9846},"end":{"line":351,"column":49,"offset":9864},"indent":[]}}],"position":{"start":{"line":351,"column":3,"offset":9818},"end":{"line":351,"column":49,"offset":9864},"indent":[]}}],"position":{"start":{"line":351,"column":1,"offset":9816},"end":{"line":351,"column":49,"offset":9864},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"VPC Block : set CIDR range for your VPC, or leave the default from the CloudFormation template","position":{"start":{"line":352,"column":3,"offset":9867},"end":{"line":352,"column":97,"offset":9961},"indent":[]}}],"position":{"start":{"line":352,"column":3,"offset":9867},"end":{"line":352,"column":97,"offset":9961},"indent":[]}}],"position":{"start":{"line":352,"column":1,"offset":9865},"end":{"line":352,"column":97,"offset":9961},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Subnet01Block : set CIDR range for this subnet, or leave the default from the CloudFormation template","position":{"start":{"line":353,"column":3,"offset":9964},"end":{"line":353,"column":104,"offset":10065},"indent":[]}}],"position":{"start":{"line":353,"column":3,"offset":9964},"end":{"line":353,"column":104,"offset":10065},"indent":[]}}],"position":{"start":{"line":353,"column":1,"offset":9962},"end":{"line":353,"column":104,"offset":10065},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Subnet02Block : set CIDR range for this subnet, or leave the default from the CloudFormation template","position":{"start":{"line":354,"column":3,"offset":10068},"end":{"line":354,"column":104,"offset":10169},"indent":[]}}],"position":{"start":{"line":354,"column":3,"offset":10068},"end":{"line":354,"column":104,"offset":10169},"indent":[]}}],"position":{"start":{"line":354,"column":1,"offset":10066},"end":{"line":354,"column":104,"offset":10169},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Subnet03Block : set CIDR range for this subnet, or leave the default from the CloudFormation template","position":{"start":{"line":355,"column":3,"offset":10172},"end":{"line":355,"column":104,"offset":10273},"indent":[]}}],"position":{"start":{"line":355,"column":3,"offset":10172},"end":{"line":355,"column":104,"offset":10273},"indent":[]}}],"position":{"start":{"line":355,"column":1,"offset":10170},"end":{"line":355,"column":104,"offset":10273},"indent":[]}}],"position":{"start":{"line":351,"column":1,"offset":9816},"end":{"line":355,"column":104,"offset":10273},"indent":[1,1,1,1]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Continuing on","position":{"start":{"line":357,"column":6,"offset":10280},"end":{"line":357,"column":19,"offset":10293},"indent":[]}}],"position":{"start":{"line":357,"column":1,"offset":10275},"end":{"line":357,"column":19,"offset":10293},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Click ","position":{"start":{"line":359,"column":3,"offset":10297},"end":{"line":359,"column":9,"offset":10303},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Next","position":{"start":{"line":359,"column":10,"offset":10304},"end":{"line":359,"column":14,"offset":10308},"indent":[]}}],"position":{"start":{"line":359,"column":9,"offset":10303},"end":{"line":359,"column":15,"offset":10309},"indent":[]}}],"position":{"start":{"line":359,"column":3,"offset":10297},"end":{"line":359,"column":15,"offset":10309},"indent":[]}}],"position":{"start":{"line":359,"column":1,"offset":10295},"end":{"line":359,"column":15,"offset":10309},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Click ","position":{"start":{"line":360,"column":3,"offset":10312},"end":{"line":360,"column":9,"offset":10318},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Create","position":{"start":{"line":360,"column":10,"offset":10319},"end":{"line":360,"column":16,"offset":10325},"indent":[]}}],"position":{"start":{"line":360,"column":9,"offset":10318},"end":{"line":360,"column":17,"offset":10326},"indent":[]}}],"position":{"start":{"line":360,"column":3,"offset":10312},"end":{"line":360,"column":17,"offset":10326},"indent":[]}}],"position":{"start":{"line":360,"column":1,"offset":10310},"end":{"line":360,"column":17,"offset":10326},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Observe the progress of the stack creation. After the stack is created, open tab ","position":{"start":{"line":361,"column":3,"offset":10329},"end":{"line":361,"column":84,"offset":10410},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Outputs","position":{"start":{"line":361,"column":85,"offset":10411},"end":{"line":361,"column":92,"offset":10418},"indent":[]}}],"position":{"start":{"line":361,"column":84,"offset":10410},"end":{"line":361,"column":93,"offset":10419},"indent":[]}},{"type":"text","value":" and record the ","position":{"start":{"line":361,"column":93,"offset":10419},"end":{"line":361,"column":109,"offset":10435},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"VPC-ID","position":{"start":{"line":361,"column":110,"offset":10436},"end":{"line":361,"column":116,"offset":10442},"indent":[]}}],"position":{"start":{"line":361,"column":109,"offset":10435},"end":{"line":361,"column":117,"offset":10443},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":361,"column":117,"offset":10443},"end":{"line":361,"column":119,"offset":10445},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"SecurityGroup","position":{"start":{"line":361,"column":120,"offset":10446},"end":{"line":361,"column":133,"offset":10459},"indent":[]}}],"position":{"start":{"line":361,"column":119,"offset":10445},"end":{"line":361,"column":134,"offset":10460},"indent":[]}},{"type":"text","value":" and the ","position":{"start":{"line":361,"column":134,"offset":10460},"end":{"line":361,"column":143,"offset":10469},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Subnet_IDs","position":{"start":{"line":361,"column":144,"offset":10470},"end":{"line":361,"column":154,"offset":10480},"indent":[]}}],"position":{"start":{"line":361,"column":143,"offset":10469},"end":{"line":361,"column":155,"offset":10481},"indent":[]}},{"type":"text","value":" for all 3 subnets. You'll need those at worker launch time.","position":{"start":{"line":361,"column":155,"offset":10481},"end":{"line":361,"column":215,"offset":10541},"indent":[]}}],"position":{"start":{"line":361,"column":3,"offset":10329},"end":{"line":361,"column":215,"offset":10541},"indent":[]}}],"position":{"start":{"line":361,"column":1,"offset":10327},"end":{"line":361,"column":215,"offset":10541},"indent":[]}}],"position":{"start":{"line":359,"column":1,"offset":10295},"end":{"line":361,"column":215,"offset":10541},"indent":[1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Creating the EKS control plane","position":{"start":{"line":363,"column":4,"offset":10546},"end":{"line":363,"column":34,"offset":10576},"indent":[]}}],"position":{"start":{"line":363,"column":1,"offset":10543},"end":{"line":363,"column":34,"offset":10576},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Via CLI","position":{"start":{"line":365,"column":5,"offset":10582},"end":{"line":365,"column":12,"offset":10589},"indent":[]}}],"position":{"start":{"line":365,"column":1,"offset":10578},"end":{"line":365,"column":12,"offset":10589},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"aws eks create-cluster --name prod --role-arn arn:aws:iam::012345678910:role/eks-service-role-AWSServiceRoleForAmazonEKS-J7ONKE3BQ4PI --resources-vpc-config subnetIds=subnet-6782e71e,subnet-e7e761ac,securityGroupIds=sg-6979fe18","position":{"start":{"line":367,"column":1,"offset":10591},"end":{"line":369,"column":4,"offset":10826},"indent":[1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Via GUI","position":{"start":{"line":371,"column":5,"offset":10832},"end":{"line":371,"column":12,"offset":10839},"indent":[]}}],"position":{"start":{"line":371,"column":1,"offset":10828},"end":{"line":371,"column":12,"offset":10839},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"https://res.cloudinary.com/gitgoodclub/image/upload/v1548137849/eks-course/Screen_Shot_2019-01-22_at_5.17.00_pm.png","alt":"EKS Control Plane","position":{"start":{"line":373,"column":1,"offset":10841},"end":{"line":373,"column":138,"offset":10978},"indent":[]}}],"position":{"start":{"line":373,"column":1,"offset":10841},"end":{"line":373,"column":138,"offset":10978},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Kubernetes API server is a AWS service, hence it doesn't need dedicated EC2 instances to run.","position":{"start":{"line":375,"column":1,"offset":10980},"end":{"line":375,"column":94,"offset":11073},"indent":[]}}],"position":{"start":{"line":375,"column":1,"offset":10980},"end":{"line":375,"column":94,"offset":11073},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Open the EKS overview page in AWS Management console, ","position":{"start":{"line":377,"column":3,"offset":11077},"end":{"line":377,"column":57,"offset":11131},"indent":[]}},{"type":"inlineCode","value":"https://console.aws.amazon.com/eks/home#/clusters","position":{"start":{"line":377,"column":57,"offset":11131},"end":{"line":377,"column":108,"offset":11182},"indent":[]}},{"type":"text","value":" and click ","position":{"start":{"line":377,"column":108,"offset":11182},"end":{"line":377,"column":119,"offset":11193},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Create Cluster","position":{"start":{"line":377,"column":120,"offset":11194},"end":{"line":377,"column":134,"offset":11208},"indent":[]}}],"position":{"start":{"line":377,"column":119,"offset":11193},"end":{"line":377,"column":135,"offset":11209},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":377,"column":135,"offset":11209},"end":{"line":377,"column":136,"offset":11210},"indent":[]}}],"position":{"start":{"line":377,"column":3,"offset":11077},"end":{"line":377,"column":136,"offset":11210},"indent":[]}}],"position":{"start":{"line":377,"column":1,"offset":11075},"end":{"line":377,"column":136,"offset":11210},"indent":[]}}],"position":{"start":{"line":377,"column":1,"offset":11075},"end":{"line":377,"column":136,"offset":11210},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Populate the following fields:","position":{"start":{"line":379,"column":1,"offset":11212},"end":{"line":379,"column":31,"offset":11242},"indent":[]}}],"position":{"start":{"line":379,"column":1,"offset":11212},"end":{"line":379,"column":31,"offset":11242},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Cluster name : enter a unique name, ","position":{"start":{"line":381,"column":3,"offset":11246},"end":{"line":381,"column":39,"offset":11282},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"EKS-course-cluster","position":{"start":{"line":381,"column":40,"offset":11283},"end":{"line":381,"column":58,"offset":11301},"indent":[]}}],"position":{"start":{"line":381,"column":39,"offset":11282},"end":{"line":381,"column":59,"offset":11302},"indent":[]}}],"position":{"start":{"line":381,"column":3,"offset":11246},"end":{"line":381,"column":59,"offset":11302},"indent":[]}}],"position":{"start":{"line":381,"column":1,"offset":11244},"end":{"line":381,"column":59,"offset":11302},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Kubernetes version : by default the latest available version is preselected","position":{"start":{"line":382,"column":3,"offset":11305},"end":{"line":382,"column":78,"offset":11380},"indent":[]}}],"position":{"start":{"line":382,"column":3,"offset":11305},"end":{"line":382,"column":78,"offset":11380},"indent":[]}}],"position":{"start":{"line":382,"column":1,"offset":11303},"end":{"line":382,"column":78,"offset":11380},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Role ARN : select the IAM Role you created in the first Hands-On lesson ","position":{"start":{"line":383,"column":3,"offset":11383},"end":{"line":383,"column":75,"offset":11455},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Part I: cover prerequisites","position":{"start":{"line":383,"column":76,"offset":11456},"end":{"line":383,"column":103,"offset":11483},"indent":[]}}],"position":{"start":{"line":383,"column":75,"offset":11455},"end":{"line":383,"column":104,"offset":11484},"indent":[]}}],"position":{"start":{"line":383,"column":3,"offset":11383},"end":{"line":383,"column":104,"offset":11484},"indent":[]}}],"position":{"start":{"line":383,"column":1,"offset":11381},"end":{"line":383,"column":104,"offset":11484},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"VPC : select the VPC-ID from the dropdown box which was created in the first Hands-On lesson ","position":{"start":{"line":384,"column":3,"offset":11487},"end":{"line":384,"column":96,"offset":11580},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Part II: create base AWS infrastructure","position":{"start":{"line":384,"column":97,"offset":11581},"end":{"line":384,"column":136,"offset":11620},"indent":[]}}],"position":{"start":{"line":384,"column":96,"offset":11580},"end":{"line":384,"column":137,"offset":11621},"indent":[]}}],"position":{"start":{"line":384,"column":3,"offset":11487},"end":{"line":384,"column":137,"offset":11621},"indent":[]}}],"position":{"start":{"line":384,"column":1,"offset":11485},"end":{"line":384,"column":137,"offset":11621},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Subnets : provide the comma separated Subnet-IDs you recorded in the previous step","position":{"start":{"line":385,"column":3,"offset":11624},"end":{"line":385,"column":85,"offset":11706},"indent":[]}}],"position":{"start":{"line":385,"column":3,"offset":11624},"end":{"line":385,"column":85,"offset":11706},"indent":[]}}],"position":{"start":{"line":385,"column":1,"offset":11622},"end":{"line":385,"column":85,"offset":11706},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"SecurityGroup : select the security group (it has name ","position":{"start":{"line":386,"column":3,"offset":11709},"end":{"line":386,"column":58,"offset":11764},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"ControlPlaneSecurityGroup","position":{"start":{"line":386,"column":59,"offset":11765},"end":{"line":386,"column":84,"offset":11790},"indent":[]}}],"position":{"start":{"line":386,"column":58,"offset":11764},"end":{"line":386,"column":85,"offset":11791},"indent":[]}},{"type":"text","value":" ) which has been created in Hands-On ","position":{"start":{"line":386,"column":85,"offset":11791},"end":{"line":386,"column":123,"offset":11829},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Part II: create base AWS infrastructure","position":{"start":{"line":386,"column":124,"offset":11830},"end":{"line":386,"column":163,"offset":11869},"indent":[]}}],"position":{"start":{"line":386,"column":123,"offset":11829},"end":{"line":386,"column":164,"offset":11870},"indent":[]}}],"position":{"start":{"line":386,"column":3,"offset":11709},"end":{"line":386,"column":164,"offset":11870},"indent":[]}}],"position":{"start":{"line":386,"column":1,"offset":11707},"end":{"line":386,"column":164,"offset":11870},"indent":[]}}],"position":{"start":{"line":381,"column":1,"offset":11244},"end":{"line":386,"column":164,"offset":11870},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Then for creation:","position":{"start":{"line":388,"column":1,"offset":11872},"end":{"line":388,"column":19,"offset":11890},"indent":[]}}],"position":{"start":{"line":388,"column":1,"offset":11872},"end":{"line":388,"column":19,"offset":11890},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"click ","position":{"start":{"line":390,"column":3,"offset":11894},"end":{"line":390,"column":9,"offset":11900},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Create","position":{"start":{"line":390,"column":10,"offset":11901},"end":{"line":390,"column":16,"offset":11907},"indent":[]}}],"position":{"start":{"line":390,"column":9,"offset":11900},"end":{"line":390,"column":17,"offset":11908},"indent":[]}}],"position":{"start":{"line":390,"column":3,"offset":11894},"end":{"line":390,"column":17,"offset":11908},"indent":[]}}],"position":{"start":{"line":390,"column":1,"offset":11892},"end":{"line":390,"column":17,"offset":11908},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"on the ","position":{"start":{"line":391,"column":3,"offset":11911},"end":{"line":391,"column":10,"offset":11918},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Clusters","position":{"start":{"line":391,"column":11,"offset":11919},"end":{"line":391,"column":19,"offset":11927},"indent":[]}}],"position":{"start":{"line":391,"column":10,"offset":11918},"end":{"line":391,"column":20,"offset":11928},"indent":[]}},{"type":"text","value":" overview page, observe field ","position":{"start":{"line":391,"column":20,"offset":11928},"end":{"line":391,"column":50,"offset":11958},"indent":[]}},{"type":"emphasis","children":[{"type":"emphasis","children":[{"type":"text","value":"Status","position":{"start":{"line":391,"column":52,"offset":11960},"end":{"line":391,"column":58,"offset":11966},"indent":[]}}],"position":{"start":{"line":391,"column":51,"offset":11959},"end":{"line":391,"column":59,"offset":11967},"indent":[]}}],"position":{"start":{"line":391,"column":50,"offset":11958},"end":{"line":391,"column":60,"offset":11968},"indent":[]}},{"type":"text","value":" until cluster creation is finished.","position":{"start":{"line":391,"column":60,"offset":11968},"end":{"line":391,"column":96,"offset":12004},"indent":[]}}],"position":{"start":{"line":391,"column":3,"offset":11911},"end":{"line":391,"column":96,"offset":12004},"indent":[]}}],"position":{"start":{"line":391,"column":1,"offset":11909},"end":{"line":391,"column":96,"offset":12004},"indent":[]}}],"position":{"start":{"line":390,"column":1,"offset":11892},"end":{"line":391,"column":96,"offset":12004},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"Click on your clustername, and record the ","position":{"start":{"line":393,"column":1,"offset":12006},"end":{"line":393,"column":43,"offset":12048},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"API server endpoint","position":{"start":{"line":393,"column":44,"offset":12049},"end":{"line":393,"column":63,"offset":12068},"indent":[]}}],"position":{"start":{"line":393,"column":43,"offset":12048},"end":{"line":393,"column":64,"offset":12069},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":393,"column":64,"offset":12069},"end":{"line":393,"column":69,"offset":12074},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Certificate authority","position":{"start":{"line":393,"column":70,"offset":12075},"end":{"line":393,"column":91,"offset":12096},"indent":[]}}],"position":{"start":{"line":393,"column":69,"offset":12074},"end":{"line":393,"column":92,"offset":12097},"indent":[]}},{"type":"text","value":" values to configure ","position":{"start":{"line":393,"column":92,"offset":12097},"end":{"line":393,"column":113,"offset":12118},"indent":[]}},{"type":"inlineCode","value":"kubectl","position":{"start":{"line":393,"column":113,"offset":12118},"end":{"line":393,"column":122,"offset":12127},"indent":[]}},{"type":"text","value":" in the next Hands-On ","position":{"start":{"line":393,"column":122,"offset":12127},"end":{"line":393,"column":144,"offset":12149},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Part IV: install & configure kubectl","position":{"start":{"line":393,"column":145,"offset":12150},"end":{"line":393,"column":181,"offset":12186},"indent":[]}}],"position":{"start":{"line":393,"column":144,"offset":12149},"end":{"line":393,"column":182,"offset":12187},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":393,"column":182,"offset":12187},"end":{"line":393,"column":183,"offset":12188},"indent":[]}}],"position":{"start":{"line":393,"column":1,"offset":12006},"end":{"line":393,"column":183,"offset":12188},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Setting up local kubectl for EKS","position":{"start":{"line":395,"column":4,"offset":12193},"end":{"line":395,"column":36,"offset":12225},"indent":[]}}],"position":{"start":{"line":395,"column":1,"offset":12190},"end":{"line":395,"column":36,"offset":12225},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Recap on the kubectl setup","position":{"start":{"line":397,"column":5,"offset":12231},"end":{"line":397,"column":31,"offset":12257},"indent":[]}}],"position":{"start":{"line":397,"column":1,"offset":12227},"end":{"line":397,"column":31,"offset":12257},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"kubectl","position":{"start":{"line":399,"column":3,"offset":12261},"end":{"line":399,"column":12,"offset":12270},"indent":[]}},{"type":"text","value":" relies on the ","position":{"start":{"line":399,"column":12,"offset":12270},"end":{"line":399,"column":27,"offset":12285},"indent":[]}},{"type":"inlineCode","value":"kubectl config file","position":{"start":{"line":399,"column":27,"offset":12285},"end":{"line":399,"column":48,"offset":12306},"indent":[]}}],"position":{"start":{"line":399,"column":3,"offset":12261},"end":{"line":399,"column":48,"offset":12306},"indent":[]}}],"position":{"start":{"line":399,"column":1,"offset":12259},"end":{"line":399,"column":48,"offset":12306},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"That relies on the EKS endpoint and User authentication","position":{"start":{"line":400,"column":3,"offset":12309},"end":{"line":400,"column":58,"offset":12364},"indent":[]}}],"position":{"start":{"line":400,"column":3,"offset":12309},"end":{"line":400,"column":58,"offset":12364},"indent":[]}}],"position":{"start":{"line":400,"column":1,"offset":12307},"end":{"line":400,"column":58,"offset":12364},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Use auth depends on ","position":{"start":{"line":401,"column":3,"offset":12367},"end":{"line":401,"column":23,"offset":12387},"indent":[]}},{"type":"inlineCode","value":"aws-iam-authenticator","position":{"start":{"line":401,"column":23,"offset":12387},"end":{"line":401,"column":46,"offset":12410},"indent":[]}},{"type":"text","value":" executable","position":{"start":{"line":401,"column":46,"offset":12410},"end":{"line":401,"column":57,"offset":12421},"indent":[]}}],"position":{"start":{"line":401,"column":3,"offset":12367},"end":{"line":401,"column":57,"offset":12421},"indent":[]}}],"position":{"start":{"line":401,"column":1,"offset":12365},"end":{"line":401,"column":57,"offset":12421},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"This generates an auth token based on the ","position":{"start":{"line":402,"column":3,"offset":12424},"end":{"line":402,"column":45,"offset":12466},"indent":[]}},{"type":"inlineCode","value":"aws credentials file","position":{"start":{"line":402,"column":45,"offset":12466},"end":{"line":402,"column":67,"offset":12488},"indent":[]}}],"position":{"start":{"line":402,"column":3,"offset":12424},"end":{"line":402,"column":67,"offset":12488},"indent":[]}}],"position":{"start":{"line":402,"column":1,"offset":12422},"end":{"line":402,"column":67,"offset":12488},"indent":[]}}],"position":{"start":{"line":399,"column":1,"offset":12259},"end":{"line":402,"column":67,"offset":12488},"indent":[1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Install kubectl & aws-iam_authenticator","position":{"start":{"line":404,"column":5,"offset":12494},"end":{"line":404,"column":44,"offset":12533},"indent":[]}}],"position":{"start":{"line":404,"column":1,"offset":12490},"end":{"line":404,"column":44,"offset":12533},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":true,"children":[{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"kubectl","position":{"start":{"line":406,"column":3,"offset":12537},"end":{"line":406,"column":10,"offset":12544},"indent":[]}}],"position":{"start":{"line":406,"column":3,"offset":12537},"end":{"line":406,"column":10,"offset":12544},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"on RH based Linux: ","position":{"start":{"line":408,"column":5,"offset":12550},"end":{"line":408,"column":24,"offset":12569},"indent":[]}},{"type":"inlineCode","value":"sudo dnf install kubernetes-client","position":{"start":{"line":408,"column":24,"offset":12569},"end":{"line":408,"column":60,"offset":12605},"indent":[]}}],"position":{"start":{"line":408,"column":5,"offset":12550},"end":{"line":408,"column":60,"offset":12605},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"check: ","position":{"start":{"line":409,"column":7,"offset":12612},"end":{"line":409,"column":14,"offset":12619},"indent":[]}},{"type":"inlineCode","value":"kubectl version --short --client","position":{"start":{"line":409,"column":14,"offset":12619},"end":{"line":409,"column":48,"offset":12653},"indent":[]}}],"position":{"start":{"line":409,"column":7,"offset":12612},"end":{"line":409,"column":48,"offset":12653},"indent":[]}}],"position":{"start":{"line":409,"column":5,"offset":12610},"end":{"line":409,"column":48,"offset":12653},"indent":[]}}],"position":{"start":{"line":409,"column":5,"offset":12610},"end":{"line":409,"column":48,"offset":12653},"indent":[]}}],"position":{"start":{"line":408,"column":3,"offset":12548},"end":{"line":409,"column":48,"offset":12653},"indent":[3]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"on Windows, open a terminal emulator, preferrably MobaXterm:","position":{"start":{"line":410,"column":5,"offset":12658},"end":{"line":410,"column":65,"offset":12718},"indent":[]}}],"position":{"start":{"line":410,"column":5,"offset":12658},"end":{"line":410,"column":65,"offset":12718},"indent":[]}}],"position":{"start":{"line":410,"column":3,"offset":12656},"end":{"line":410,"column":65,"offset":12718},"indent":[]}}],"position":{"start":{"line":408,"column":3,"offset":12548},"end":{"line":410,"column":65,"offset":12718},"indent":[3,3]}},{"type":"code","lang":null,"meta":null,"value":"curl -k -# -o kubectl.exe https://amazon-eks.s3-us-west-2.amazonaws.com/1.10.3/2018-07-26/bin/windows/amd64/kubectl.exe\nchmod +x kubectl.exe\nmkdir $HOME/bin\nmv kubectl.exe $HOME/bin\necho 'export PATH=$HOME/bin:$PATH' >> ~/.bashrc\nsource .bashrc","position":{"start":{"line":412,"column":3,"offset":12722},"end":{"line":419,"column":6,"offset":12988},"indent":[3,3,3,3,3,3,3]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"check: ","position":{"start":{"line":421,"column":5,"offset":12994},"end":{"line":421,"column":12,"offset":13001},"indent":[]}},{"type":"inlineCode","value":"kubectl.exe version --short --client","position":{"start":{"line":421,"column":12,"offset":13001},"end":{"line":421,"column":50,"offset":13039},"indent":[]}}],"position":{"start":{"line":421,"column":5,"offset":12994},"end":{"line":421,"column":50,"offset":13039},"indent":[]}}],"position":{"start":{"line":421,"column":3,"offset":12992},"end":{"line":421,"column":50,"offset":13039},"indent":[]}}],"position":{"start":{"line":421,"column":3,"offset":12992},"end":{"line":421,"column":50,"offset":13039},"indent":[]}}],"position":{"start":{"line":406,"column":1,"offset":12535},"end":{"line":422,"column":1,"offset":13040},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"aws-iam-authenticator","position":{"start":{"line":423,"column":3,"offset":13043},"end":{"line":423,"column":24,"offset":13064},"indent":[]}}],"position":{"start":{"line":423,"column":3,"offset":13043},"end":{"line":423,"column":24,"offset":13064},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"on Linux:","position":{"start":{"line":425,"column":5,"offset":13070},"end":{"line":425,"column":14,"offset":13079},"indent":[]}}],"position":{"start":{"line":425,"column":5,"offset":13070},"end":{"line":425,"column":14,"offset":13079},"indent":[]}}],"position":{"start":{"line":425,"column":3,"offset":13068},"end":{"line":425,"column":14,"offset":13079},"indent":[]}}],"position":{"start":{"line":425,"column":3,"offset":13068},"end":{"line":425,"column":14,"offset":13079},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"curl -o aws-iam-authenticator https://amazon-eks.s3-us-west-2.amazonaws.com/1.10.3/2018-07-26/bin/linux/amd64/aws-iam-authenticator\nchmod +x ./aws-iam-authenticator\ncp ./aws-iam-authenticator /usr/local/bin/","position":{"start":{"line":427,"column":3,"offset":13083},"end":{"line":431,"column":6,"offset":13306},"indent":[3,3,3,3]}},{"type":"list","ordered":false,"start":null,"spread":true,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Test: ","position":{"start":{"line":433,"column":5,"offset":13312},"end":{"line":433,"column":11,"offset":13318},"indent":[]}},{"type":"inlineCode","value":"aws-iam-authenticator help","position":{"start":{"line":433,"column":11,"offset":13318},"end":{"line":433,"column":39,"offset":13346},"indent":[]}}],"position":{"start":{"line":433,"column":5,"offset":13312},"end":{"line":433,"column":39,"offset":13346},"indent":[]}}],"position":{"start":{"line":433,"column":3,"offset":13310},"end":{"line":434,"column":1,"offset":13347},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"on Windows, open a terminal emulator, preferrably MobaXterm:","position":{"start":{"line":435,"column":5,"offset":13352},"end":{"line":435,"column":65,"offset":13412},"indent":[]}}],"position":{"start":{"line":435,"column":5,"offset":13352},"end":{"line":435,"column":65,"offset":13412},"indent":[]}}],"position":{"start":{"line":435,"column":3,"offset":13350},"end":{"line":435,"column":65,"offset":13412},"indent":[]}}],"position":{"start":{"line":433,"column":3,"offset":13310},"end":{"line":435,"column":65,"offset":13412},"indent":[1,3]}},{"type":"code","lang":null,"meta":null,"value":"curl -k -# -o aws-iam-authenticator.exe  https://amazon-eks.s3-us-west-2.amazonaws.com/1.10.3/2018-07-26/bin/windows/amd64/aws-iam-authenticator.exe\nchmod +x aws-iam-authenticator.exe\nmv aws-iam-authenticator.exe $HOME/bin","position":{"start":{"line":437,"column":3,"offset":13416},"end":{"line":441,"column":6,"offset":13654},"indent":[3,3,3,3]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Test: ","position":{"start":{"line":443,"column":5,"offset":13660},"end":{"line":443,"column":11,"offset":13666},"indent":[]}},{"type":"inlineCode","value":"aws-iam-authenticator.exe help","position":{"start":{"line":443,"column":11,"offset":13666},"end":{"line":443,"column":43,"offset":13698},"indent":[]}}],"position":{"start":{"line":443,"column":5,"offset":13660},"end":{"line":443,"column":43,"offset":13698},"indent":[]}}],"position":{"start":{"line":443,"column":3,"offset":13658},"end":{"line":443,"column":43,"offset":13698},"indent":[]}}],"position":{"start":{"line":443,"column":3,"offset":13658},"end":{"line":443,"column":43,"offset":13698},"indent":[]}}],"position":{"start":{"line":423,"column":1,"offset":13041},"end":{"line":444,"column":1,"offset":13699},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"aws credentials (ACCESS KEY+SECRET)\nnow we have to provide the Access key+secret from the first lesson ","position":{"start":{"line":445,"column":3,"offset":13702},"end":{"line":446,"column":70,"offset":13807},"indent":[3]}},{"type":"emphasis","children":[{"type":"text","value":"Part I : covering prerequisites","position":{"start":{"line":446,"column":71,"offset":13808},"end":{"line":446,"column":102,"offset":13839},"indent":[]}}],"position":{"start":{"line":446,"column":70,"offset":13807},"end":{"line":446,"column":103,"offset":13840},"indent":[]}},{"type":"text","value":" and put them into the credentials template.","position":{"start":{"line":446,"column":103,"offset":13840},"end":{"line":446,"column":147,"offset":13884},"indent":[]}}],"position":{"start":{"line":445,"column":3,"offset":13702},"end":{"line":446,"column":147,"offset":13884},"indent":[3]}},{"type":"code","lang":null,"meta":null,"value":"* populate aws credentials file\n  copy the provided file named _credentials_ to\n  * WINDOWS cygwin: ```mkdir $HOMEPATH/.aws && vi $HOMEPATH/.aws/credentials```\n  * Linux: ```~/.aws/credentials```\n  and set the properties _aws_access_key_id_ and _aws_secret_access_key_","position":{"start":{"line":448,"column":3,"offset":13888},"end":{"line":452,"column":79,"offset":14184},"indent":[3,3,3,3]}}],"position":{"start":{"line":445,"column":1,"offset":13700},"end":{"line":452,"column":79,"offset":14184},"indent":[1,1,1,1,1,1,1]}}],"position":{"start":{"line":406,"column":1,"offset":12535},"end":{"line":452,"column":79,"offset":14184},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Configure ","position":{"start":{"line":454,"column":5,"offset":14190},"end":{"line":454,"column":15,"offset":14200},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"kubectl","position":{"start":{"line":454,"column":16,"offset":14201},"end":{"line":454,"column":23,"offset":14208},"indent":[]}}],"position":{"start":{"line":454,"column":15,"offset":14200},"end":{"line":454,"column":24,"offset":14209},"indent":[]}}],"position":{"start":{"line":454,"column":1,"offset":14186},"end":{"line":454,"column":24,"offset":14209},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"in this step we are creating a configuration file for the binary ","position":{"start":{"line":456,"column":1,"offset":14211},"end":{"line":456,"column":66,"offset":14276},"indent":[]}},{"type":"inlineCode","value":"kubectl","position":{"start":{"line":456,"column":66,"offset":14276},"end":{"line":456,"column":75,"offset":14285},"indent":[]}},{"type":"text","value":", which is the main tool to interact with Kubernetes later on.","position":{"start":{"line":456,"column":75,"offset":14285},"end":{"line":456,"column":137,"offset":14347},"indent":[]}}],"position":{"start":{"line":456,"column":1,"offset":14211},"end":{"line":456,"column":137,"offset":14347},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Use template file ","position":{"start":{"line":458,"column":1,"offset":14349},"end":{"line":458,"column":19,"offset":14367},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"kube-config-eks","position":{"start":{"line":458,"column":20,"offset":14368},"end":{"line":458,"column":35,"offset":14383},"indent":[]}}],"position":{"start":{"line":458,"column":19,"offset":14367},"end":{"line":458,"column":36,"offset":14384},"indent":[]}},{"type":"text","value":" and copy it to:","position":{"start":{"line":458,"column":36,"offset":14384},"end":{"line":458,"column":52,"offset":14400},"indent":[]}}],"position":{"start":{"line":458,"column":1,"offset":14349},"end":{"line":458,"column":52,"offset":14400},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Linux: ","position":{"start":{"line":460,"column":3,"offset":14404},"end":{"line":460,"column":10,"offset":14411},"indent":[]}},{"type":"inlineCode","value":"~/.kube/kube-config-eks","position":{"start":{"line":460,"column":10,"offset":14411},"end":{"line":460,"column":35,"offset":14436},"indent":[]}}],"position":{"start":{"line":460,"column":3,"offset":14404},"end":{"line":460,"column":35,"offset":14436},"indent":[]}}],"position":{"start":{"line":460,"column":1,"offset":14402},"end":{"line":460,"column":35,"offset":14436},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Windows (cygwin): ","position":{"start":{"line":461,"column":3,"offset":14439},"end":{"line":461,"column":21,"offset":14457},"indent":[]}},{"type":"inlineCode","value":"mkdir $HOMEPATH/.kube && vi $HOMEPATH/.kube/kube-config-eks","position":{"start":{"line":461,"column":21,"offset":14457},"end":{"line":461,"column":82,"offset":14518},"indent":[]}}],"position":{"start":{"line":461,"column":3,"offset":14439},"end":{"line":461,"column":82,"offset":14518},"indent":[]}}],"position":{"start":{"line":461,"column":1,"offset":14437},"end":{"line":461,"column":82,"offset":14518},"indent":[]}}],"position":{"start":{"line":460,"column":1,"offset":14402},"end":{"line":461,"column":82,"offset":14518},"indent":[1]}},{"type":"code","lang":"yaml","meta":null,"value":"apiVersion: v1\nclusters:\n  - cluster:\n      server: <endpoint-url>\n      certificate-authority-data: <base64-encoded-ca-cert>\n    name: kubernetes\ncontexts:\n  - context:\n      cluster: kubernetes\n      user: aws\n    name: aws\ncurrent-context: aws\nkind: Config\npreferences: {}\nusers:\n  - name: aws\n    user:\n      exec:\n        apiVersion: client.authentication.k8s.io/v1alpha1\n        command: aws-iam-authenticator\n        args:\n          - 'token'\n          - '-i'\n          - 'EKS-course-cluster'","position":{"start":{"line":463,"column":1,"offset":14520},"end":{"line":488,"column":4,"offset":15031},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"list","ordered":false,"start":null,"spread":true,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"edit file ","position":{"start":{"line":490,"column":3,"offset":15035},"end":{"line":490,"column":13,"offset":15045},"indent":[]}},{"type":"inlineCode","value":"kube-config-eks","position":{"start":{"line":490,"column":13,"offset":15045},"end":{"line":490,"column":30,"offset":15062},"indent":[]}},{"type":"text","value":" and replace ","position":{"start":{"line":490,"column":30,"offset":15062},"end":{"line":490,"column":43,"offset":15075},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"endpoint-url","position":{"start":{"line":490,"column":44,"offset":15076},"end":{"line":490,"column":56,"offset":15088},"indent":[]}}],"position":{"start":{"line":490,"column":43,"offset":15075},"end":{"line":490,"column":57,"offset":15089},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":490,"column":57,"offset":15089},"end":{"line":490,"column":59,"offset":15091},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"base64-encoded-ca-cert","position":{"start":{"line":490,"column":60,"offset":15092},"end":{"line":490,"column":82,"offset":15114},"indent":[]}}],"position":{"start":{"line":490,"column":59,"offset":15091},"end":{"line":490,"column":83,"offset":15115},"indent":[]}},{"type":"text","value":" by the values you recorded in the Hands-On lesson 3 ","position":{"start":{"line":490,"column":83,"offset":15115},"end":{"line":490,"column":136,"offset":15168},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Part III: create the K8s control plane","position":{"start":{"line":490,"column":137,"offset":15169},"end":{"line":490,"column":175,"offset":15207},"indent":[]}}],"position":{"start":{"line":490,"column":136,"offset":15168},"end":{"line":490,"column":176,"offset":15208},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":490,"column":176,"offset":15208},"end":{"line":490,"column":177,"offset":15209},"indent":[]}}],"position":{"start":{"line":490,"column":3,"offset":15035},"end":{"line":490,"column":177,"offset":15209},"indent":[]}}],"position":{"start":{"line":490,"column":1,"offset":15033},"end":{"line":491,"column":1,"offset":15210},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Linux : ","position":{"start":{"line":492,"column":3,"offset":15213},"end":{"line":492,"column":11,"offset":15221},"indent":[]}},{"type":"inlineCode","value":"export KUBECONFIG=~/.kube/kube-config-eks","position":{"start":{"line":492,"column":11,"offset":15221},"end":{"line":492,"column":54,"offset":15264},"indent":[]}},{"type":"text","value":"\nWindows : ","position":{"start":{"line":492,"column":54,"offset":15264},"end":{"line":493,"column":13,"offset":15277},"indent":[3]}},{"type":"inlineCode","value":"export KUBECONFIG=$HOMEPATH/.kube/kube-config-eks","position":{"start":{"line":493,"column":13,"offset":15277},"end":{"line":493,"column":64,"offset":15328},"indent":[]}}],"position":{"start":{"line":492,"column":3,"offset":15213},"end":{"line":493,"column":64,"offset":15328},"indent":[3]}}],"position":{"start":{"line":492,"column":1,"offset":15211},"end":{"line":494,"column":1,"offset":15329},"indent":[1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Test connectivity and access:","position":{"start":{"line":495,"column":3,"offset":15332},"end":{"line":495,"column":32,"offset":15361},"indent":[]}}],"position":{"start":{"line":495,"column":3,"offset":15332},"end":{"line":495,"column":32,"offset":15361},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"#>kubectl get svc\nNAME         TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE\nkubernetes   ClusterIP   xxxxxxxxx    <none>        443/TCP   4m","position":{"start":{"line":496,"column":3,"offset":15364},"end":{"line":500,"column":6,"offset":15528},"indent":[3,3,3,3]}},{"type":"paragraph","children":[{"type":"text","value":"command to check the config for kubectl: ","position":{"start":{"line":501,"column":3,"offset":15531},"end":{"line":501,"column":44,"offset":15572},"indent":[]}},{"type":"inlineCode","value":"kubectl config view","position":{"start":{"line":501,"column":44,"offset":15572},"end":{"line":501,"column":65,"offset":15593},"indent":[]}}],"position":{"start":{"line":501,"column":3,"offset":15531},"end":{"line":501,"column":65,"offset":15593},"indent":[]}}],"position":{"start":{"line":495,"column":1,"offset":15330},"end":{"line":501,"column":65,"offset":15593},"indent":[1,1,1,1,1,1]}}],"position":{"start":{"line":490,"column":1,"offset":15033},"end":{"line":501,"column":65,"offset":15593},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Now you successfully talked to the K8s control plane on AWS","position":{"start":{"line":503,"column":1,"offset":15595},"end":{"line":503,"column":60,"offset":15654},"indent":[]}}],"position":{"start":{"line":503,"column":1,"offset":15595},"end":{"line":503,"column":60,"offset":15654},"indent":[]}},{"type":"export","value":"export const _frontmatter = {}","position":{"start":{"line":506,"column":1,"offset":15657},"end":{"line":506,"column":31,"offset":15687},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":506,"column":31,"offset":15687}}},"scopeImports":[],"scopeIdentifiers":[],"rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\nimport DefaultLayout from \"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/gatsby-theme-docz/src/base/Layout.js\"\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"aws-eks-starter\"\n    }}>{`AWS EKS Starter`}</h1>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#aws-eks-starter\"\n        }}>{`AWS EKS Starter`}</a><ul parentName=\"li\">\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#eks-setup-process\"\n            }}>{`EKS Setup Process`}</a><ul parentName=\"li\">\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#eks-use-cases\"\n                }}>{`EKS Use cases`}</a></li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#the-course\"\n                }}>{`The Course`}</a></li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#eks-architecture\"\n                }}>{`EKS Architecture`}</a></li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#basic-eks-setup\"\n                }}>{`Basic EKS Setup`}</a></li>\n            </ul></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#setup-for-the-eks-cluster\"\n            }}>{`Setup for the EKS cluster`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#iam-user-roles\"\n            }}>{`IAM User roles`}</a><ul parentName=\"li\">\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#iam-user-and-permissions\"\n                }}>{`IAM user and permissions`}</a></li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#create-iam-role\"\n                }}>{`Create IAM role`}</a></li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#create-keypair\"\n                }}>{`Create keypair`}</a></li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#create-api-access-key-secret\"\n                }}>{`Create API Access key/-secret`}</a></li>\n            </ul></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#create-base-aws-infrastructure\"\n            }}>{`Create base AWS infrastructure`}</a><ul parentName=\"li\">\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#create-vpc-subnets-and-security-group-for-your-k8s-cluster\"\n                }}>{`Create VPC, subnets and security group for your K8s cluster`}</a><ul parentName=\"li\">\n                  <li parentName=\"ul\"><a parentName=\"li\" {...{\n                      \"href\": \"#working-on-the-console\"\n                    }}>{`Working on the console`}</a></li>\n                  <li parentName=\"ul\"><a parentName=\"li\" {...{\n                      \"href\": \"#setting-stack-name\"\n                    }}>{`Setting stack name`}</a></li>\n                  <li parentName=\"ul\"><a parentName=\"li\" {...{\n                      \"href\": \"#continuing-on\"\n                    }}>{`Continuing on`}</a></li>\n                </ul></li>\n            </ul></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#creating-the-eks-control-plane\"\n            }}>{`Creating the EKS control plane`}</a><ul parentName=\"li\">\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#via-cli\"\n                }}>{`Via CLI`}</a></li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#via-gui\"\n                }}>{`Via GUI`}</a></li>\n            </ul></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#setting-up-local-kubectl-for-eks\"\n            }}>{`Setting up local kubectl for EKS`}</a><ul parentName=\"li\">\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#recap-on-the-kubectl-setup\"\n                }}>{`Recap on the kubectl setup`}</a></li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#install-kubectl--aws-iamauthenticator\"\n                }}>{`Install kubectl & aws-iam_authenticator`}</a></li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#configure-kubectl\"\n                }}>{`Configure `}<em parentName=\"a\">{`kubectl`}</em></a></li>\n            </ul></li>\n        </ul></li>\n    </ul>\n    <h2 {...{\n      \"id\": \"eks-setup-process\"\n    }}>{`EKS Setup Process`}</h2>\n    <p>{`EKS will setup and manage our Kubernetes clusters:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`This will create K8s master in high availability`}</li>\n      <li parentName=\"ul\">{`Etcd in high availability`}</li>\n      <li parentName=\"ul\">{`IAM plugin setup`}</li>\n      <li parentName=\"ul\">{`CA setup (for TLS)`}</li>\n      <li parentName=\"ul\">{`Auto scaling done`}</li>\n      <li parentName=\"ul\">{`Load Balancers done (NLB and ELB)`}</li>\n    </ul>\n    <p>{`In short, you will get an EKS control plane and you'll just need to setup the worker nodes in the availability zones.`}</p>\n    <p>{`The from the laptop, you can use kubectl to talk to AWS.`}</p>\n    <p>{`There is also deep integration with AWS:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`API calls can be audited in CloudTrail`}</li>\n      <li parentName=\"ul\">{`Authetication through IAM while authorization through RBAC.`}</li>\n      <li parentName=\"ul\">{`CloudFormation to manage clusteres`}</li>\n      <li parentName=\"ul\">{`Customize AMI`}</li>\n      <li parentName=\"ul\">{`Load Balancers, EBS Volumes, EFS, etc...`}</li>\n      <li parentName=\"ul\">{`Container registies on ECR`}</li>\n      <li parentName=\"ul\">{`Networking is handled with a per-pod IP address with attached ENI`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"eks-use-cases\"\n    }}>{`EKS Use cases`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`Can create a cluster easily`}</li>\n      <li parentName=\"ul\">{`Microservices in containers`}</li>\n      <li parentName=\"ul\">{`Paas/Website`}</li>\n      <li parentName=\"ul\">{`Migrate from on-prem to cloud`}</li>\n      <li parentName=\"ul\">{`ML cluster (support for GPU instances)`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"the-course\"\n    }}>{`The Course`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`Deploy EKS cluster using CF`}</li>\n      <li parentName=\"ul\">{`Scale Kubernetes cluster`}</li>\n      <li parentName=\"ul\">{`Setup `}<inlineCode parentName=\"li\">{`kubectl`}</inlineCode>{` properly`}</li>\n      <li parentName=\"ul\">{`Learn how EKS works under the hood`}</li>\n      <li parentName=\"ul\">{`Setup admin using Kubernetes dashboard`}</li>\n      <li parentName=\"ul\">{`Deploy stateless app on EKS and expose it with public ELB`}</li>\n      <li parentName=\"ul\">{`Deploy stateful app on EKS and bind it with EBS volumes`}</li>\n      <li parentName=\"ul\">{`Deploy stateful app (like WordPress) with EFS`}</li>\n      <li parentName=\"ul\">{`Manage Kubernetes cluster using AWS CLI and `}<inlineCode parentName=\"li\">{`eksctl`}</inlineCode>{` CLI`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"eks-architecture\"\n    }}>{`EKS Architecture`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`3 AZs`}</li>\n      <li parentName=\"ul\">{`Master node in each`}</li>\n      <li parentName=\"ul\">{`Etcd in each`}</li>\n      <li parentName=\"ul\">{`K8s worker nodes`}</li>\n    </ul>\n    <p><img alt=\"EKS Architecture\" src=\"https://res.cloudinary.com/gitgoodclub/image/upload/v1548135634/eks-course/Screen_Shot_2019-01-22_at_4.39.24_pm.png\" /></p>\n    <p>{`EKS itself will manage all the load and master nodes and etcd as needed.`}</p>\n    <h3 {...{\n      \"id\": \"basic-eks-setup\"\n    }}>{`Basic EKS Setup`}</h3>\n    <p><img alt=\"Basic setup\" src=\"https://res.cloudinary.com/gitgoodclub/image/upload/v1548135634/eks-course/Screen_Shot_2019-01-22_at_4.39.24_pm.png\" /></p>\n    <h2 {...{\n      \"id\": \"setup-for-the-eks-cluster\"\n    }}>{`Setup for the EKS cluster`}</h2>\n    <h2 {...{\n      \"id\": \"iam-user-roles\"\n    }}>{`IAM User roles`}</h2>\n    <h4 {...{\n      \"id\": \"iam-user-and-permissions\"\n    }}>{`IAM user and permissions`}</h4>\n    <p>{`To be able to run through this course your IAM user needs to have certain privileges to e.g. create all the required resources and objects. According AWS Best Practices you should `}<em parentName=\"p\">{`never`}</em>{` use your root account for working with AWS services. E.g. to demonstrate the Hands-On lectures, the user `}<em parentName=\"p\">{`eks-course`}</em>{` has been used.`}</p>\n    <p>{`There are 2 attempts to follow:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Provide admin access\nlogin with an admin of your AWS account\ngo to \"IAM\" => \"users\" => click on your user => \"Permissions\" => \"Add permission\" => then search for `}<em parentName=\"li\">{`AdministratorAccess`}</em>{` and attach this policy\nBasically your user just requires `}<em parentName=\"li\">{`one`}</em>{` policy being attached`}</li>\n    </ol>\n    <ul>\n      <li parentName=\"ul\">{`AdministratorAccess`}</li>\n    </ul>\n    <ol {...{\n      \"start\": 2\n    }}>\n      <li parentName=\"ol\">{`Provide a dedicated list of privileges/policies\nto cover all the required privileges, first you have to create additional policies\nEKS-Admin-policy:`}</li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\"eks:*\"],\n      \"Resource\": \"*\"\n    }\n  ]\n}\n`}</code></pre>\n    <p>{`CloudFormation-Admin-policy:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\"cloudformation:*\"],\n      \"Resource\": \"*\"\n    }\n  ]\n}\n`}</code></pre>\n    <p>{`Finally, assign the following policies to your IAM user you are going to use throughout the course:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`AmazonEC2FullAccess`}</li>\n      <li parentName=\"ul\">{`IAMFullAccess`}</li>\n      <li parentName=\"ul\">{`AmazonVPCFullAccess`}</li>\n      <li parentName=\"ul\">{`CloudFormation-Admin-policy`}</li>\n      <li parentName=\"ul\">{`EKS-Admin-policy\nwhere the last 2 policies are the ones you created above`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"create-iam-role\"\n    }}>{`Create IAM role`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`open `}<inlineCode parentName=\"li\">{`https://console.aws.amazon.com/iam/`}</inlineCode>{` and choose `}<em parentName=\"li\">{`Roles`}</em>{` => `}<em parentName=\"li\">{`create role`}</em></li>\n      <li parentName=\"ul\">{`choose `}<em parentName=\"li\">{`EKS`}</em>{` service followed by `}<em parentName=\"li\">{`Allows Amazon EKS to manage your clusters on your behalf`}</em></li>\n      <li parentName=\"ul\">{`choose `}<em parentName=\"li\">{`Next: Permissions`}</em></li>\n      <li parentName=\"ul\">{`click `}<em parentName=\"li\">{`Next: Review`}</em></li>\n      <li parentName=\"ul\">{`enter a `}<em parentName=\"li\">{`unique`}</em>{` Role name, `}<em parentName=\"li\">{`EKS-course-role`}</em>{` and click `}<em parentName=\"li\"><em parentName=\"em\">{`Create Role`}</em></em></li>\n    </ul>\n    <h3 {...{\n      \"id\": \"create-keypair\"\n    }}>{`Create keypair`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`open EC2 dashboard `}<inlineCode parentName=\"li\">{`https://console.aws.amazon.com/ec2`}</inlineCode></li>\n      <li parentName=\"ul\">{`click `}<em parentName=\"li\">{`KeyPairs`}</em>{` in left navigation bar under section \"Network&Security\"`}</li>\n      <li parentName=\"ul\">{`click `}<em parentName=\"li\">{`Create Key Pair`}</em></li>\n      <li parentName=\"ul\">{`provide name for keypair, `}<em parentName=\"li\">{`eks-course`}</em>{` and click `}<em parentName=\"li\"><em parentName=\"em\">{`Create`}</em></em></li>\n      <li parentName=\"ul\">{`!! the keypair will be downloaded immediately => file `}<em parentName=\"li\">{`eks-course.pem`}</em>{` !!`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"create-api-access-key-secret\"\n    }}>{`Create API Access key/-secret`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`create key+secret via AWS console`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`AWS-console => IAM => Users => <your user> => tab _Security credentials_ => button _Create access key_\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"create-base-aws-infrastructure\"\n    }}>{`Create base AWS infrastructure`}</h2>\n    <h3 {...{\n      \"id\": \"create-vpc-subnets-and-security-group-for-your-k8s-cluster\"\n    }}>{`Create VPC, subnets and security group for your K8s cluster`}</h3>\n    <p><img alt=\"AWS EKS Cluster setup\" src=\"https://res.cloudinary.com/gitgoodclub/image/upload/v1548137228/eks-course/Screen_Shot_2019-01-22_at_5.06.52_pm.png\" /></p>\n    <p>{`To create a VPC there is a prepared CloudFormation template to use. It creates a VPC including 3 Subnets\nAt the moment EKS is only available in the following 2 regions:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`US West (Oregon), `}<em parentName=\"li\">{`us-west-2`}</em></li>\n      <li parentName=\"ul\">{`US East (N.Virginia), `}<em parentName=\"li\">{`us-east-1`}</em></li>\n    </ul>\n    <h4 {...{\n      \"id\": \"working-on-the-console\"\n    }}>{`Working on the console`}</h4>\n    <ul>\n      <li parentName=\"ul\">{`open `}<inlineCode parentName=\"li\">{`https://console.aws.amazon.com/cloudformation/`}</inlineCode>{` and select one of the above mentioned regions`}</li>\n      <li parentName=\"ul\">{`click `}<em parentName=\"li\">{`Create Stack`}</em></li>\n      <li parentName=\"ul\">{`select `}<em parentName=\"li\">{`Upload a template to Amazon S3`}</em>{` , click `}<em parentName=\"li\"><em parentName=\"em\">{`Upload file`}</em></em>{` and select `}<inlineCode parentName=\"li\">{`eks-course-vpc.yaml`}</inlineCode></li>\n      <li parentName=\"ul\">{`click `}<em parentName=\"li\">{`Next`}</em></li>\n      <li parentName=\"ul\">{`provide data in the `}<em parentName=\"li\">{`Specify Details`}</em>{` overview:`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`# eks-course-vpc.yaml\n---\nAWSTemplateFormatVersion: '2010-09-09'\nDescription: 'AWS EKS course'\n\nParameters:\n  VpcBlock:\n    Type: String\n    Default: 192.168.0.0/16\n    Description: CIDR range for VPC\n\n  Subnet01Block:\n    Type: String\n    Default: 192.168.64.0/18\n    Description: CIDR for first subnet within VPC\n\n  Subnet02Block:\n    Type: String\n    Default: 192.168.128.0/18\n    Description: CIDR for second subnet within VPC\n\n  Subnet03Block:\n    Type: String\n    Default: 192.168.192.0/18\n    Description: CIDR for third subnet within VPC\n\nResources:\n  VPC:\n    Type: AWS::EC2::VPC\n    Properties:\n      CidrBlock: !Ref VpcBlock\n      EnableDnsSupport: true\n      EnableDnsHostnames: true\n      Tags:\n        - Key: Name\n          Value: !Sub '\\${AWS::StackName}-VPC'\n\n  InternetGateway:\n    Type: 'AWS::EC2::InternetGateway'\n\n  VPCGatewayAttachment:\n    Type: 'AWS::EC2::VPCGatewayAttachment'\n    Properties:\n      InternetGatewayId: !Ref InternetGateway\n      VpcId: !Ref VPC\n\n  RouteTable:\n    Type: AWS::EC2::RouteTable\n    Properties:\n      VpcId: !Ref VPC\n      Tags:\n        - Key: Name\n          Value: Public Subnets\n        - Key: Network\n          Value: Public\n\n  Route:\n    DependsOn: VPCGatewayAttachment\n    Type: AWS::EC2::Route\n    Properties:\n      RouteTableId: !Ref RouteTable\n      DestinationCidrBlock: 0.0.0.0/0\n      GatewayId: !Ref InternetGateway\n\n  Subnet01:\n    Type: AWS::EC2::Subnet\n    Properties:\n      AvailabilityZone:\n        Fn::Select:\n          - '0'\n          - Fn::GetAZs:\n              Ref: AWS::Region\n      CidrBlock:\n        Ref: Subnet01Block\n      VpcId:\n        Ref: VPC\n      Tags:\n        - Key: Name\n          Value: !Sub '\\${AWS::StackName}-Subnet1'\n\n  Subnet02:\n    Type: AWS::EC2::Subnet\n    Properties:\n      AvailabilityZone:\n        Fn::Select:\n          - '1'\n          - Fn::GetAZs:\n              Ref: AWS::Region\n      CidrBlock:\n        Ref: Subnet02Block\n      VpcId:\n        Ref: VPC\n      Tags:\n        - Key: Name\n          Value: !Sub '\\${AWS::StackName}-Subnet2'\n\n  Subnet03:\n    Type: AWS::EC2::Subnet\n\n    Properties:\n      AvailabilityZone:\n        Fn::Select:\n          - '2'\n          - Fn::GetAZs:\n              Ref: AWS::Region\n      CidrBlock:\n        Ref: Subnet03Block\n      VpcId:\n        Ref: VPC\n      Tags:\n        - Key: Name\n          Value: !Sub '\\${AWS::StackName}-Subnet3'\n\n  Subnet01RouteTableAssociation:\n    Type: AWS::EC2::SubnetRouteTableAssociation\n    Properties:\n      SubnetId: !Ref Subnet01\n      RouteTableId: !Ref RouteTable\n\n  Subnet02RouteTableAssociation:\n    Type: AWS::EC2::SubnetRouteTableAssociation\n    Properties:\n      SubnetId: !Ref Subnet02\n      RouteTableId: !Ref RouteTable\n\n  Subnet03RouteTableAssociation:\n    Type: AWS::EC2::SubnetRouteTableAssociation\n    Properties:\n      SubnetId: !Ref Subnet03\n      RouteTableId: !Ref RouteTable\n\n  ControlPlaneSecurityGroup:\n    Type: AWS::EC2::SecurityGroup\n    Properties:\n      GroupDescription: Cluster communication with worker nodes\n      VpcId: !Ref VPC\n\nOutputs:\n  SubnetIds:\n    Description: Your subnets\n    Value: !Join [',', [!Ref Subnet01, !Ref Subnet02, !Ref Subnet03]]\n\n  SecurityGroups:\n    Description: SecGroup for communication betw controlplane and workernodes\n    Value: !Join [',', [!Ref ControlPlaneSecurityGroup]]\n\n  VpcId:\n    Description: The VPC Id\n    Value: !Ref VPC\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"setting-stack-name\"\n    }}>{`Setting stack name`}</h4>\n    <ul>\n      <li parentName=\"ul\">{`Stack name : set stack name `}<em parentName=\"li\">{`EKS-course-stack`}</em></li>\n      <li parentName=\"ul\">{`VPC Block : set CIDR range for your VPC, or leave the default from the CloudFormation template`}</li>\n      <li parentName=\"ul\">{`Subnet01Block : set CIDR range for this subnet, or leave the default from the CloudFormation template`}</li>\n      <li parentName=\"ul\">{`Subnet02Block : set CIDR range for this subnet, or leave the default from the CloudFormation template`}</li>\n      <li parentName=\"ul\">{`Subnet03Block : set CIDR range for this subnet, or leave the default from the CloudFormation template`}</li>\n    </ul>\n    <h4 {...{\n      \"id\": \"continuing-on\"\n    }}>{`Continuing on`}</h4>\n    <ul>\n      <li parentName=\"ul\">{`Click `}<em parentName=\"li\">{`Next`}</em></li>\n      <li parentName=\"ul\">{`Click `}<em parentName=\"li\">{`Create`}</em></li>\n      <li parentName=\"ul\">{`Observe the progress of the stack creation. After the stack is created, open tab `}<em parentName=\"li\">{`Outputs`}</em>{` and record the `}<em parentName=\"li\">{`VPC-ID`}</em>{`, `}<em parentName=\"li\">{`SecurityGroup`}</em>{` and the `}<em parentName=\"li\">{`Subnet_IDs`}</em>{` for all 3 subnets. You'll need those at worker launch time.`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"creating-the-eks-control-plane\"\n    }}>{`Creating the EKS control plane`}</h2>\n    <h3 {...{\n      \"id\": \"via-cli\"\n    }}>{`Via CLI`}</h3>\n    <pre><code parentName=\"pre\" {...{}}>{`aws eks create-cluster --name prod --role-arn arn:aws:iam::012345678910:role/eks-service-role-AWSServiceRoleForAmazonEKS-J7ONKE3BQ4PI --resources-vpc-config subnetIds=subnet-6782e71e,subnet-e7e761ac,securityGroupIds=sg-6979fe18\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"via-gui\"\n    }}>{`Via GUI`}</h3>\n    <p><img alt=\"EKS Control Plane\" src=\"https://res.cloudinary.com/gitgoodclub/image/upload/v1548137849/eks-course/Screen_Shot_2019-01-22_at_5.17.00_pm.png\" /></p>\n    <p>{`Kubernetes API server is a AWS service, hence it doesn't need dedicated EC2 instances to run.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Open the EKS overview page in AWS Management console, `}<inlineCode parentName=\"li\">{`https://console.aws.amazon.com/eks/home#/clusters`}</inlineCode>{` and click `}<em parentName=\"li\">{`Create Cluster`}</em>{`.`}</li>\n    </ul>\n    <p>{`Populate the following fields:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Cluster name : enter a unique name, `}<em parentName=\"li\">{`EKS-course-cluster`}</em></li>\n      <li parentName=\"ul\">{`Kubernetes version : by default the latest available version is preselected`}</li>\n      <li parentName=\"ul\">{`Role ARN : select the IAM Role you created in the first Hands-On lesson `}<em parentName=\"li\">{`Part I: cover prerequisites`}</em></li>\n      <li parentName=\"ul\">{`VPC : select the VPC-ID from the dropdown box which was created in the first Hands-On lesson `}<em parentName=\"li\">{`Part II: create base AWS infrastructure`}</em></li>\n      <li parentName=\"ul\">{`Subnets : provide the comma separated Subnet-IDs you recorded in the previous step`}</li>\n      <li parentName=\"ul\">{`SecurityGroup : select the security group (it has name `}<em parentName=\"li\">{`ControlPlaneSecurityGroup`}</em>{` ) which has been created in Hands-On `}<em parentName=\"li\">{`Part II: create base AWS infrastructure`}</em></li>\n    </ul>\n    <p>{`Then for creation:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`click `}<em parentName=\"li\">{`Create`}</em></li>\n      <li parentName=\"ul\">{`on the `}<em parentName=\"li\">{`Clusters`}</em>{` overview page, observe field `}<em parentName=\"li\"><em parentName=\"em\">{`Status`}</em></em>{` until cluster creation is finished.`}</li>\n    </ul>\n    <p>{`Click on your clustername, and record the `}<em parentName=\"p\">{`API server endpoint`}</em>{` and `}<em parentName=\"p\">{`Certificate authority`}</em>{` values to configure `}<inlineCode parentName=\"p\">{`kubectl`}</inlineCode>{` in the next Hands-On `}<em parentName=\"p\">{`Part IV: install & configure kubectl`}</em>{`.`}</p>\n    <h2 {...{\n      \"id\": \"setting-up-local-kubectl-for-eks\"\n    }}>{`Setting up local kubectl for EKS`}</h2>\n    <h3 {...{\n      \"id\": \"recap-on-the-kubectl-setup\"\n    }}>{`Recap on the kubectl setup`}</h3>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`kubectl`}</inlineCode>{` relies on the `}<inlineCode parentName=\"li\">{`kubectl config file`}</inlineCode></li>\n      <li parentName=\"ul\">{`That relies on the EKS endpoint and User authentication`}</li>\n      <li parentName=\"ul\">{`Use auth depends on `}<inlineCode parentName=\"li\">{`aws-iam-authenticator`}</inlineCode>{` executable`}</li>\n      <li parentName=\"ul\">{`This generates an auth token based on the `}<inlineCode parentName=\"li\">{`aws credentials file`}</inlineCode></li>\n    </ul>\n    <h3 {...{\n      \"id\": \"install-kubectl--aws-iam_authenticator\"\n    }}>{`Install kubectl & aws-iam_authenticator`}</h3>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`kubectl`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`on RH based Linux: `}<inlineCode parentName=\"li\">{`sudo dnf install kubernetes-client`}</inlineCode><ul parentName=\"li\">\n              <li parentName=\"ul\">{`check: `}<inlineCode parentName=\"li\">{`kubectl version --short --client`}</inlineCode></li>\n            </ul></li>\n          <li parentName=\"ul\">{`on Windows, open a terminal emulator, preferrably MobaXterm:`}</li>\n        </ul>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{}}>{`curl -k -# -o kubectl.exe https://amazon-eks.s3-us-west-2.amazonaws.com/1.10.3/2018-07-26/bin/windows/amd64/kubectl.exe\nchmod +x kubectl.exe\nmkdir $HOME/bin\nmv kubectl.exe $HOME/bin\necho 'export PATH=$HOME/bin:$PATH' >> ~/.bashrc\nsource .bashrc\n`}</code></pre>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`check: `}<inlineCode parentName=\"li\">{`kubectl.exe version --short --client`}</inlineCode></li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`aws-iam-authenticator`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`on Linux:`}</li>\n        </ul>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{}}>{`curl -o aws-iam-authenticator https://amazon-eks.s3-us-west-2.amazonaws.com/1.10.3/2018-07-26/bin/linux/amd64/aws-iam-authenticator\nchmod +x ./aws-iam-authenticator\ncp ./aws-iam-authenticator /usr/local/bin/\n`}</code></pre>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">\n            <p parentName=\"li\">{`Test: `}<inlineCode parentName=\"p\">{`aws-iam-authenticator help`}</inlineCode></p>\n          </li>\n          <li parentName=\"ul\">\n            <p parentName=\"li\">{`on Windows, open a terminal emulator, preferrably MobaXterm:`}</p>\n          </li>\n        </ul>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{}}>{`curl -k -# -o aws-iam-authenticator.exe  https://amazon-eks.s3-us-west-2.amazonaws.com/1.10.3/2018-07-26/bin/windows/amd64/aws-iam-authenticator.exe\nchmod +x aws-iam-authenticator.exe\nmv aws-iam-authenticator.exe $HOME/bin\n`}</code></pre>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Test: `}<inlineCode parentName=\"li\">{`aws-iam-authenticator.exe help`}</inlineCode></li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`aws credentials (ACCESS KEY+SECRET)\nnow we have to provide the Access key+secret from the first lesson `}<em parentName=\"p\">{`Part I : covering prerequisites`}</em>{` and put them into the credentials template.`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{}}>{`* populate aws credentials file\n  copy the provided file named _credentials_ to\n  * WINDOWS cygwin: \\`\\`\\`mkdir $HOMEPATH/.aws && vi $HOMEPATH/.aws/credentials\\`\\`\\`\n  * Linux: \\`\\`\\`~/.aws/credentials\\`\\`\\`\n  and set the properties _aws_access_key_id_ and _aws_secret_access_key_\n`}</code></pre>\n      </li>\n    </ul>\n    <h3 {...{\n      \"id\": \"configure-kubectl\"\n    }}>{`Configure `}<em parentName=\"h3\">{`kubectl`}</em></h3>\n    <p>{`in this step we are creating a configuration file for the binary `}<inlineCode parentName=\"p\">{`kubectl`}</inlineCode>{`, which is the main tool to interact with Kubernetes later on.`}</p>\n    <p>{`Use template file `}<em parentName=\"p\">{`kube-config-eks`}</em>{` and copy it to:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Linux: `}<inlineCode parentName=\"li\">{`~/.kube/kube-config-eks`}</inlineCode></li>\n      <li parentName=\"ul\">{`Windows (cygwin): `}<inlineCode parentName=\"li\">{`mkdir $HOMEPATH/.kube && vi $HOMEPATH/.kube/kube-config-eks`}</inlineCode></li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: v1\nclusters:\n  - cluster:\n      server: <endpoint-url>\n      certificate-authority-data: <base64-encoded-ca-cert>\n    name: kubernetes\ncontexts:\n  - context:\n      cluster: kubernetes\n      user: aws\n    name: aws\ncurrent-context: aws\nkind: Config\npreferences: {}\nusers:\n  - name: aws\n    user:\n      exec:\n        apiVersion: client.authentication.k8s.io/v1alpha1\n        command: aws-iam-authenticator\n        args:\n          - 'token'\n          - '-i'\n          - 'EKS-course-cluster'\n`}</code></pre>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`edit file `}<inlineCode parentName=\"p\">{`kube-config-eks`}</inlineCode>{` and replace `}<em parentName=\"p\">{`endpoint-url`}</em>{`, `}<em parentName=\"p\">{`base64-encoded-ca-cert`}</em>{` by the values you recorded in the Hands-On lesson 3 `}<em parentName=\"p\">{`Part III: create the K8s control plane`}</em>{`.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Linux : `}<inlineCode parentName=\"p\">{`export KUBECONFIG=~/.kube/kube-config-eks`}</inlineCode>{`\nWindows : `}<inlineCode parentName=\"p\">{`export KUBECONFIG=$HOMEPATH/.kube/kube-config-eks`}</inlineCode></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Test connectivity and access:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{}}>{`#>kubectl get svc\nNAME         TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE\nkubernetes   ClusterIP   xxxxxxxxx    <none>        443/TCP   4m\n`}</code></pre>\n        <p parentName=\"li\">{`command to check the config for kubectl: `}<inlineCode parentName=\"p\">{`kubectl config view`}</inlineCode></p>\n      </li>\n    </ul>\n    <p>{`Now you successfully talked to the K8s control plane on AWS`}</p>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}