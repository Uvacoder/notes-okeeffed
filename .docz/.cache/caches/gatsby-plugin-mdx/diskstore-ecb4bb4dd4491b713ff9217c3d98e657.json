{"expireTime":9007200867335902000,"key":"gatsby-plugin-mdx-entire-payload-c82038be916c5acd967130a93f93d177-","val":{"mdast":{"type":"root","children":[{"type":"import","value":"import DefaultLayout from \"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/gatsby-theme-docz/src/base/Layout.js\"","position":{"start":{"line":3,"column":1,"offset":2},"end":{"line":3,"column":133,"offset":134},"indent":[]}},{"type":"export","default":true,"value":"export default DefaultLayout","position":{"start":{"line":5,"column":1,"offset":136},"end":{"line":5,"column":29,"offset":164},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Rails API From Scratch","position":{"start":{"line":8,"column":3,"offset":169},"end":{"line":8,"column":25,"offset":191},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":167},"end":{"line":8,"column":25,"offset":191},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"New API from the CLI","position":{"start":{"line":10,"column":4,"offset":196},"end":{"line":10,"column":24,"offset":216},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":193},"end":{"line":10,"column":24,"offset":216},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In this particular case, we will be creating a UI in React.","position":{"start":{"line":12,"column":1,"offset":218},"end":{"line":12,"column":60,"offset":277},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":218},"end":{"line":12,"column":60,"offset":277},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Creating a new API:","position":{"start":{"line":14,"column":1,"offset":279},"end":{"line":14,"column":20,"offset":298},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":279},"end":{"line":14,"column":20,"offset":298},"indent":[]}},{"type":"code","lang":"s","meta":null,"value":"rails new <api-name> --api","position":{"start":{"line":16,"column":1,"offset":300},"end":{"line":18,"column":4,"offset":335},"indent":[1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Setting up the gems","position":{"start":{"line":20,"column":4,"offset":340},"end":{"line":20,"column":23,"offset":359},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":337},"end":{"line":20,"column":23,"offset":359},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Afterwards, you will want to add some CORS control for Rack and some other gems to prep for Heroku:","position":{"start":{"line":22,"column":1,"offset":361},"end":{"line":22,"column":100,"offset":460},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":361},"end":{"line":22,"column":100,"offset":460},"indent":[]}},{"type":"code","lang":"rb","meta":null,"value":"gem 'rack-cors', :require => 'rack/cors'\n\ngroup :development, :test do\n  # Moe sqlite3 to here\n  gem 'sqlite3'\nend\ngroup :production do\n  gem 'pg'\nend","position":{"start":{"line":24,"column":1,"offset":462},"end":{"line":34,"column":4,"offset":622},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Creating your models","position":{"start":{"line":36,"column":4,"offset":627},"end":{"line":36,"column":24,"offset":647},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":624},"end":{"line":36,"column":24,"offset":647},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The following code is an example of creating some Todos.","position":{"start":{"line":38,"column":1,"offset":649},"end":{"line":38,"column":57,"offset":705},"indent":[]}}],"position":{"start":{"line":38,"column":1,"offset":649},"end":{"line":38,"column":57,"offset":705},"indent":[]}},{"type":"code","lang":"s","meta":null,"value":"# rails g model <EntitySingular> [...attribute:type]\nrails generate model Todo title:string done:boolean\n# rails g controller <EntityPlural> [...crud methods]\nrails generate controller Todos index create update destroy\nrails db:migrate","position":{"start":{"line":40,"column":1,"offset":707},"end":{"line":46,"column":4,"offset":951},"indent":[1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Setting up your controller","position":{"start":{"line":48,"column":4,"offset":956},"end":{"line":48,"column":30,"offset":982},"indent":[]}}],"position":{"start":{"line":48,"column":1,"offset":953},"end":{"line":48,"column":30,"offset":982},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Update the controller values:","position":{"start":{"line":50,"column":1,"offset":984},"end":{"line":50,"column":30,"offset":1013},"indent":[]}}],"position":{"start":{"line":50,"column":1,"offset":984},"end":{"line":50,"column":30,"offset":1013},"indent":[]}},{"type":"code","lang":"rb","meta":null,"value":"class TodosController < ApplicationController\n  def index\n    todos = Todo.order(\"created_at DESC\")\n    render json: todos\n  end\n\n  def create\n    todo = Todo.create(todo_param)\n    render json: todo\n  end\n\n  def update\n    todo = Todo.find(params[:id])\n    todo.update(todo_param)\n    render json: todo\n  end\n\n  def destroy\n    todo = Todo.find(params[:id])\n    todo.destroy\n    head :no_content, status: :ok\n  end\n\n  private\n\n  def todo_param\n    params.require(:todo).permit(:title, :done)\n  end\nend","position":{"start":{"line":52,"column":1,"offset":1015},"end":{"line":82,"column":4,"offset":1527},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Rescopeing the routes","position":{"start":{"line":84,"column":4,"offset":1532},"end":{"line":84,"column":25,"offset":1553},"indent":[]}}],"position":{"start":{"line":84,"column":1,"offset":1529},"end":{"line":84,"column":25,"offset":1553},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We want to change our resources to be available from","position":{"start":{"line":86,"column":1,"offset":1555},"end":{"line":86,"column":53,"offset":1607},"indent":[]}}],"position":{"start":{"line":86,"column":1,"offset":1555},"end":{"line":86,"column":53,"offset":1607},"indent":[]}},{"type":"code","lang":"rb","meta":null,"value":"Rails.application.routes.draw do\n  # get 'todos/index'\n  # get 'todos/create'\n  # get 'todos/update'\n  # get 'todos/destroy'\n  # For details on the DSL available within this file, see https://guides.rubyonrails.org/routing.html\n  scope \"/api/v1\" do\n    resources :todos\n  end\nend","position":{"start":{"line":88,"column":1,"offset":1609},"end":{"line":99,"column":4,"offset":1898},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"UI with Create React App","position":{"start":{"line":101,"column":4,"offset":1903},"end":{"line":101,"column":28,"offset":1927},"indent":[]}}],"position":{"start":{"line":101,"column":1,"offset":1900},"end":{"line":101,"column":28,"offset":1927},"indent":[]}},{"type":"code","lang":"s","meta":null,"value":"npm install create-react-app\ncreate-react-app <app-name> --template=typescript","position":{"start":{"line":103,"column":1,"offset":1929},"end":{"line":106,"column":4,"offset":2016},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Set a proxy value in ","position":{"start":{"line":108,"column":1,"offset":2018},"end":{"line":108,"column":22,"offset":2039},"indent":[]}},{"type":"inlineCode","value":"package.json","position":{"start":{"line":108,"column":22,"offset":2039},"end":{"line":108,"column":36,"offset":2053},"indent":[]}},{"type":"text","value":" so that we know where the localhost calls will go to:","position":{"start":{"line":108,"column":36,"offset":2053},"end":{"line":108,"column":90,"offset":2107},"indent":[]}}],"position":{"start":{"line":108,"column":1,"offset":2018},"end":{"line":108,"column":90,"offset":2107},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"\"proxy\": \"http://localhost:3000\"","position":{"start":{"line":110,"column":1,"offset":2109},"end":{"line":112,"column":4,"offset":2153},"indent":[1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Running locally","position":{"start":{"line":114,"column":4,"offset":2158},"end":{"line":114,"column":19,"offset":2173},"indent":[]}}],"position":{"start":{"line":114,"column":1,"offset":2155},"end":{"line":114,"column":19,"offset":2173},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can use ","position":{"start":{"line":116,"column":1,"offset":2175},"end":{"line":116,"column":13,"offset":2187},"indent":[]}},{"type":"inlineCode","value":"heroku local -f Procfile.dev","position":{"start":{"line":116,"column":13,"offset":2187},"end":{"line":116,"column":43,"offset":2217},"indent":[]}},{"type":"text","value":" with the ","position":{"start":{"line":116,"column":43,"offset":2217},"end":{"line":116,"column":53,"offset":2227},"indent":[]}},{"type":"inlineCode","value":"Procfile.dev","position":{"start":{"line":116,"column":53,"offset":2227},"end":{"line":116,"column":67,"offset":2241},"indent":[]}},{"type":"text","value":" looking like the following:","position":{"start":{"line":116,"column":67,"offset":2241},"end":{"line":116,"column":95,"offset":2269},"indent":[]}}],"position":{"start":{"line":116,"column":1,"offset":2175},"end":{"line":116,"column":95,"offset":2269},"indent":[]}},{"type":"code","lang":"js","meta":null,"value":"web: cd todo-ui && PORT=4000 npm start\napi: cd todo-api && PORT=3000 bin/rails s","position":{"start":{"line":118,"column":1,"offset":2271},"end":{"line":121,"column":4,"offset":2361},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Run and begin calling the routes like so ","position":{"start":{"line":123,"column":1,"offset":2363},"end":{"line":123,"column":42,"offset":2404},"indent":[]}},{"type":"inlineCode","value":"/api/v1/todos","position":{"start":{"line":123,"column":42,"offset":2404},"end":{"line":123,"column":57,"offset":2419},"indent":[]}},{"type":"text","value":" and you will start getting some results! Hooray!","position":{"start":{"line":123,"column":57,"offset":2419},"end":{"line":123,"column":106,"offset":2468},"indent":[]}}],"position":{"start":{"line":123,"column":1,"offset":2363},"end":{"line":123,"column":106,"offset":2468},"indent":[]}},{"type":"export","value":"export const _frontmatter = {}","position":{"start":{"line":126,"column":1,"offset":2471},"end":{"line":126,"column":31,"offset":2501},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":126,"column":31,"offset":2501}}},"scopeImports":[],"scopeIdentifiers":[],"rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\nimport DefaultLayout from \"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/gatsby-theme-docz/src/base/Layout.js\"\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"rails-api-from-scratch\"\n    }}>{`Rails API From Scratch`}</h1>\n    <h2 {...{\n      \"id\": \"new-api-from-the-cli\"\n    }}>{`New API from the CLI`}</h2>\n    <p>{`In this particular case, we will be creating a UI in React.`}</p>\n    <p>{`Creating a new API:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-s\"\n      }}>{`rails new <api-name> --api\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"setting-up-the-gems\"\n    }}>{`Setting up the gems`}</h2>\n    <p>{`Afterwards, you will want to add some CORS control for Rack and some other gems to prep for Heroku:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-rb\"\n      }}>{`gem 'rack-cors', :require => 'rack/cors'\n\ngroup :development, :test do\n  # Moe sqlite3 to here\n  gem 'sqlite3'\nend\ngroup :production do\n  gem 'pg'\nend\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"creating-your-models\"\n    }}>{`Creating your models`}</h2>\n    <p>{`The following code is an example of creating some Todos.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-s\"\n      }}>{`# rails g model <EntitySingular> [...attribute:type]\nrails generate model Todo title:string done:boolean\n# rails g controller <EntityPlural> [...crud methods]\nrails generate controller Todos index create update destroy\nrails db:migrate\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"setting-up-your-controller\"\n    }}>{`Setting up your controller`}</h2>\n    <p>{`Update the controller values:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-rb\"\n      }}>{`class TodosController < ApplicationController\n  def index\n    todos = Todo.order(\"created_at DESC\")\n    render json: todos\n  end\n\n  def create\n    todo = Todo.create(todo_param)\n    render json: todo\n  end\n\n  def update\n    todo = Todo.find(params[:id])\n    todo.update(todo_param)\n    render json: todo\n  end\n\n  def destroy\n    todo = Todo.find(params[:id])\n    todo.destroy\n    head :no_content, status: :ok\n  end\n\n  private\n\n  def todo_param\n    params.require(:todo).permit(:title, :done)\n  end\nend\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"rescopeing-the-routes\"\n    }}>{`Rescopeing the routes`}</h2>\n    <p>{`We want to change our resources to be available from`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-rb\"\n      }}>{`Rails.application.routes.draw do\n  # get 'todos/index'\n  # get 'todos/create'\n  # get 'todos/update'\n  # get 'todos/destroy'\n  # For details on the DSL available within this file, see https://guides.rubyonrails.org/routing.html\n  scope \"/api/v1\" do\n    resources :todos\n  end\nend\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"ui-with-create-react-app\"\n    }}>{`UI with Create React App`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-s\"\n      }}>{`npm install create-react-app\ncreate-react-app <app-name> --template=typescript\n`}</code></pre>\n    <p>{`Set a proxy value in `}<inlineCode parentName=\"p\">{`package.json`}</inlineCode>{` so that we know where the localhost calls will go to:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`\"proxy\": \"http://localhost:3000\"\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"running-locally\"\n    }}>{`Running locally`}</h2>\n    <p>{`You can use `}<inlineCode parentName=\"p\">{`heroku local -f Procfile.dev`}</inlineCode>{` with the `}<inlineCode parentName=\"p\">{`Procfile.dev`}</inlineCode>{` looking like the following:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`web: cd todo-ui && PORT=4000 npm start\napi: cd todo-api && PORT=3000 bin/rails s\n`}</code></pre>\n    <p>{`Run and begin calling the routes like so `}<inlineCode parentName=\"p\">{`/api/v1/todos`}</inlineCode>{` and you will start getting some results! Hooray!`}</p>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}