{"expireTime":9007200849425544000,"key":"gatsby-plugin-mdx-entire-payload-a1be683f3078375e92f9c3468f8f8606-","val":{"mdast":{"type":"root","children":[{"type":"import","value":"import DefaultLayout from \"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/gatsby-theme-docz/src/base/Layout.js\"","position":{"start":{"line":3,"column":1,"offset":2},"end":{"line":3,"column":133,"offset":134},"indent":[]}},{"type":"export","default":true,"value":"export default DefaultLayout","position":{"start":{"line":5,"column":1,"offset":136},"end":{"line":5,"column":29,"offset":164},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Kafka Internals","position":{"start":{"line":8,"column":3,"offset":169},"end":{"line":8,"column":18,"offset":184},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":167},"end":{"line":8,"column":18,"offset":184},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Broker","position":{"start":{"line":10,"column":4,"offset":189},"end":{"line":10,"column":10,"offset":195},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":186},"end":{"line":10,"column":10,"offset":195},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Each broker is assigned an ID. When there are multiple brokers in a cluster (best practice), one is selected as the ","position":{"start":{"line":12,"column":1,"offset":197},"end":{"line":12,"column":117,"offset":313},"indent":[]}},{"type":"inlineCode","value":"Controller","position":{"start":{"line":12,"column":117,"offset":313},"end":{"line":12,"column":129,"offset":325},"indent":[]}},{"type":"text","value":". The Controller will be responsible for electing the leader of the partition.","position":{"start":{"line":12,"column":129,"offset":325},"end":{"line":12,"column":207,"offset":403},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":197},"end":{"line":12,"column":207,"offset":403},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Broker Config","position":{"start":{"line":14,"column":4,"offset":408},"end":{"line":14,"column":17,"offset":421},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":405},"end":{"line":14,"column":17,"offset":421},"indent":[]}},{"type":"table","align":[null,null],"children":[{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Term","position":{"start":{"line":16,"column":3,"offset":425},"end":{"line":16,"column":7,"offset":429},"indent":[]}}],"position":{"start":{"line":16,"column":3,"offset":425},"end":{"line":16,"column":32,"offset":454},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Path","position":{"start":{"line":16,"column":35,"offset":457},"end":{"line":16,"column":39,"offset":461},"indent":[]}}],"position":{"start":{"line":16,"column":35,"offset":457},"end":{"line":16,"column":109,"offset":531},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":423},"end":{"line":16,"column":111,"offset":533},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Broker Config","position":{"start":{"line":18,"column":3,"offset":647},"end":{"line":18,"column":16,"offset":660},"indent":[]}}],"position":{"start":{"line":18,"column":3,"offset":647},"end":{"line":18,"column":32,"offset":676},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"kafka/config/server.properties","position":{"start":{"line":18,"column":35,"offset":679},"end":{"line":18,"column":67,"offset":711},"indent":[]}}],"position":{"start":{"line":18,"column":35,"offset":679},"end":{"line":18,"column":109,"offset":753},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":645},"end":{"line":18,"column":111,"offset":755},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Server Logs","position":{"start":{"line":19,"column":3,"offset":758},"end":{"line":19,"column":14,"offset":769},"indent":[]}}],"position":{"start":{"line":19,"column":3,"offset":758},"end":{"line":19,"column":32,"offset":787},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"kafka/logs/server.log","position":{"start":{"line":19,"column":35,"offset":790},"end":{"line":19,"column":58,"offset":813},"indent":[]}}],"position":{"start":{"line":19,"column":35,"offset":790},"end":{"line":19,"column":109,"offset":864},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":756},"end":{"line":19,"column":111,"offset":866},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Messages Logs","position":{"start":{"line":20,"column":3,"offset":869},"end":{"line":20,"column":16,"offset":882},"indent":[]}}],"position":{"start":{"line":20,"column":3,"offset":869},"end":{"line":20,"column":32,"offset":898},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"kafka/data/kafka","position":{"start":{"line":20,"column":35,"offset":901},"end":{"line":20,"column":53,"offset":919},"indent":[]}}],"position":{"start":{"line":20,"column":35,"offset":901},"end":{"line":20,"column":109,"offset":975},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":867},"end":{"line":20,"column":111,"offset":977},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"View Nodes in Zookeeper Shell","position":{"start":{"line":21,"column":3,"offset":980},"end":{"line":21,"column":32,"offset":1009},"indent":[]}}],"position":{"start":{"line":21,"column":3,"offset":980},"end":{"line":21,"column":32,"offset":1009},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"kafka/bin/zookeeper-shell.sh zookeeper1:2181/kafka && ls get /controller","position":{"start":{"line":21,"column":35,"offset":1012},"end":{"line":21,"column":109,"offset":1086},"indent":[]}}],"position":{"start":{"line":21,"column":35,"offset":1012},"end":{"line":21,"column":109,"offset":1086},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":978},"end":{"line":21,"column":111,"offset":1088},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":423},"end":{"line":21,"column":111,"offset":1088},"indent":[1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Replicas","position":{"start":{"line":23,"column":4,"offset":1093},"end":{"line":23,"column":12,"offset":1101},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":1090},"end":{"line":23,"column":12,"offset":1101},"indent":[]}},{"type":"paragraph","children":[{"type":"inlineCode","value":"Replicas","position":{"start":{"line":25,"column":1,"offset":1103},"end":{"line":25,"column":11,"offset":1113},"indent":[]}},{"type":"text","value":" provide guarantees for the availability of the data. The replicator ","position":{"start":{"line":25,"column":11,"offset":1113},"end":{"line":25,"column":80,"offset":1182},"indent":[]}},{"type":"inlineCode","value":"factor","position":{"start":{"line":25,"column":80,"offset":1182},"end":{"line":25,"column":88,"offset":1190},"indent":[]}},{"type":"text","value":" provides a way for the Kafka administrator to control the availability of that data in the event of failure. For example, if the replication factor is set to 3, you will have 3 copies of each partition spread across the brokers.","position":{"start":{"line":25,"column":88,"offset":1190},"end":{"line":25,"column":317,"offset":1419},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":1103},"end":{"line":25,"column":317,"offset":1419},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"What are the goals for placement of replicas?","position":{"start":{"line":27,"column":1,"offset":1421},"end":{"line":27,"column":46,"offset":1466},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":1421},"end":{"line":27,"column":46,"offset":1466},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Spread evenly amongst brokers","position":{"start":{"line":29,"column":3,"offset":1470},"end":{"line":29,"column":32,"offset":1499},"indent":[]}}],"position":{"start":{"line":29,"column":3,"offset":1470},"end":{"line":29,"column":32,"offset":1499},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":1468},"end":{"line":29,"column":32,"offset":1499},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Each partition is on a different broker","position":{"start":{"line":30,"column":3,"offset":1502},"end":{"line":30,"column":42,"offset":1541},"indent":[]}}],"position":{"start":{"line":30,"column":3,"offset":1502},"end":{"line":30,"column":42,"offset":1541},"indent":[]}}],"position":{"start":{"line":30,"column":1,"offset":1500},"end":{"line":30,"column":42,"offset":1541},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Put replicas on different racks","position":{"start":{"line":31,"column":3,"offset":1544},"end":{"line":31,"column":34,"offset":1575},"indent":[]}}],"position":{"start":{"line":31,"column":3,"offset":1544},"end":{"line":31,"column":34,"offset":1575},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":1542},"end":{"line":31,"column":34,"offset":1575},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":1468},"end":{"line":31,"column":34,"offset":1575},"indent":[1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Handling Requests","position":{"start":{"line":33,"column":4,"offset":1580},"end":{"line":33,"column":21,"offset":1597},"indent":[]}}],"position":{"start":{"line":33,"column":1,"offset":1577},"end":{"line":33,"column":21,"offset":1597},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Producer or consumer sends request to the Broker and the Broker handles the request in the following way:","position":{"start":{"line":35,"column":1,"offset":1599},"end":{"line":35,"column":106,"offset":1704},"indent":[]}}],"position":{"start":{"line":35,"column":1,"offset":1599},"end":{"line":35,"column":106,"offset":1704},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Acceptor Thread: Creates the connection from client to Broker.","position":{"start":{"line":37,"column":4,"offset":1709},"end":{"line":37,"column":66,"offset":1771},"indent":[]}}],"position":{"start":{"line":37,"column":4,"offset":1709},"end":{"line":37,"column":66,"offset":1771},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":1706},"end":{"line":37,"column":66,"offset":1771},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Processor Thread: Takes requests from clientss and places them into the request queue.","position":{"start":{"line":38,"column":4,"offset":1775},"end":{"line":38,"column":90,"offset":1861},"indent":[]}}],"position":{"start":{"line":38,"column":4,"offset":1775},"end":{"line":38,"column":90,"offset":1861},"indent":[]}}],"position":{"start":{"line":38,"column":1,"offset":1772},"end":{"line":38,"column":90,"offset":1861},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"IO Thread: Processes the requests in the requests queue.","position":{"start":{"line":39,"column":4,"offset":1865},"end":{"line":39,"column":60,"offset":1921},"indent":[]}}],"position":{"start":{"line":39,"column":4,"offset":1865},"end":{"line":39,"column":60,"offset":1921},"indent":[]}}],"position":{"start":{"line":39,"column":1,"offset":1862},"end":{"line":39,"column":60,"offset":1921},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Request Queue: Requests waiting to be processed.","position":{"start":{"line":40,"column":4,"offset":1925},"end":{"line":40,"column":52,"offset":1973},"indent":[]}}],"position":{"start":{"line":40,"column":4,"offset":1925},"end":{"line":40,"column":52,"offset":1973},"indent":[]}}],"position":{"start":{"line":40,"column":1,"offset":1922},"end":{"line":40,"column":52,"offset":1973},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Response Queue: Requests waiting to be sent back to the clients.","position":{"start":{"line":41,"column":4,"offset":1977},"end":{"line":41,"column":68,"offset":2041},"indent":[]}}],"position":{"start":{"line":41,"column":4,"offset":1977},"end":{"line":41,"column":68,"offset":2041},"indent":[]}}],"position":{"start":{"line":41,"column":1,"offset":1974},"end":{"line":41,"column":68,"offset":2041},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":1706},"end":{"line":41,"column":68,"offset":2041},"indent":[1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Partitions","position":{"start":{"line":43,"column":4,"offset":2046},"end":{"line":43,"column":14,"offset":2056},"indent":[]}}],"position":{"start":{"line":43,"column":1,"offset":2043},"end":{"line":43,"column":14,"offset":2056},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Within a broker, a topic can be broken down into multiple partitions (with n-1 partitions being replicas).","position":{"start":{"line":45,"column":1,"offset":2058},"end":{"line":45,"column":107,"offset":2164},"indent":[]}}],"position":{"start":{"line":45,"column":1,"offset":2058},"end":{"line":45,"column":107,"offset":2164},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Partitions within a topic are split between brokers.","position":{"start":{"line":47,"column":3,"offset":2168},"end":{"line":47,"column":55,"offset":2220},"indent":[]}}],"position":{"start":{"line":47,"column":3,"offset":2168},"end":{"line":47,"column":55,"offset":2220},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":2166},"end":{"line":47,"column":55,"offset":2220},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Partitions themselves will never be split up.","position":{"start":{"line":48,"column":3,"offset":2223},"end":{"line":48,"column":48,"offset":2268},"indent":[]}}],"position":{"start":{"line":48,"column":3,"offset":2223},"end":{"line":48,"column":48,"offset":2268},"indent":[]}}],"position":{"start":{"line":48,"column":1,"offset":2221},"end":{"line":48,"column":48,"offset":2268},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Partitions will continue to get larger as the number of messages grow.","position":{"start":{"line":49,"column":3,"offset":2271},"end":{"line":49,"column":73,"offset":2341},"indent":[]}}],"position":{"start":{"line":49,"column":3,"offset":2271},"end":{"line":49,"column":73,"offset":2341},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":2269},"end":{"line":49,"column":73,"offset":2341},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Messages will never be removed from the partition, only appended.","position":{"start":{"line":50,"column":3,"offset":2344},"end":{"line":50,"column":68,"offset":2409},"indent":[]}}],"position":{"start":{"line":50,"column":3,"offset":2344},"end":{"line":50,"column":68,"offset":2409},"indent":[]}}],"position":{"start":{"line":50,"column":1,"offset":2342},"end":{"line":50,"column":68,"offset":2409},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Messages are stored in the directory specified in the ","position":{"start":{"line":51,"column":3,"offset":2412},"end":{"line":51,"column":57,"offset":2466},"indent":[]}},{"type":"inlineCode","value":"server.properties","position":{"start":{"line":51,"column":57,"offset":2466},"end":{"line":51,"column":76,"offset":2485},"indent":[]}},{"type":"text","value":" file (log.dirs).","position":{"start":{"line":51,"column":76,"offset":2485},"end":{"line":51,"column":93,"offset":2502},"indent":[]}}],"position":{"start":{"line":51,"column":3,"offset":2412},"end":{"line":51,"column":93,"offset":2502},"indent":[]}}],"position":{"start":{"line":51,"column":1,"offset":2410},"end":{"line":51,"column":93,"offset":2502},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":2166},"end":{"line":51,"column":93,"offset":2502},"indent":[1,1,1,1]}},{"type":"export","value":"export const _frontmatter = {}","position":{"start":{"line":54,"column":1,"offset":2505},"end":{"line":54,"column":31,"offset":2535},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":54,"column":31,"offset":2535}}},"scopeImports":[],"scopeIdentifiers":[],"rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\nimport DefaultLayout from \"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/gatsby-theme-docz/src/base/Layout.js\"\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"kafka-internals\"\n    }}>{`Kafka Internals`}</h1>\n    <h2 {...{\n      \"id\": \"broker\"\n    }}>{`Broker`}</h2>\n    <p>{`Each broker is assigned an ID. When there are multiple brokers in a cluster (best practice), one is selected as the `}<inlineCode parentName=\"p\">{`Controller`}</inlineCode>{`. The Controller will be responsible for electing the leader of the partition.`}</p>\n    <h2 {...{\n      \"id\": \"broker-config\"\n    }}>{`Broker Config`}</h2>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Term`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Path`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Broker Config`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`kafka/config/server.properties`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Server Logs`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`kafka/logs/server.log`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Messages Logs`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`kafka/data/kafka`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`View Nodes in Zookeeper Shell`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`kafka/bin/zookeeper-shell.sh zookeeper1:2181/kafka && ls get /controller`}</inlineCode></td>\n        </tr>\n      </tbody>\n    </table>\n    <h2 {...{\n      \"id\": \"replicas\"\n    }}>{`Replicas`}</h2>\n    <p><inlineCode parentName=\"p\">{`Replicas`}</inlineCode>{` provide guarantees for the availability of the data. The replicator `}<inlineCode parentName=\"p\">{`factor`}</inlineCode>{` provides a way for the Kafka administrator to control the availability of that data in the event of failure. For example, if the replication factor is set to 3, you will have 3 copies of each partition spread across the brokers.`}</p>\n    <p>{`What are the goals for placement of replicas?`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Spread evenly amongst brokers`}</li>\n      <li parentName=\"ul\">{`Each partition is on a different broker`}</li>\n      <li parentName=\"ul\">{`Put replicas on different racks`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"handling-requests\"\n    }}>{`Handling Requests`}</h2>\n    <p>{`Producer or consumer sends request to the Broker and the Broker handles the request in the following way:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Acceptor Thread: Creates the connection from client to Broker.`}</li>\n      <li parentName=\"ol\">{`Processor Thread: Takes requests from clientss and places them into the request queue.`}</li>\n      <li parentName=\"ol\">{`IO Thread: Processes the requests in the requests queue.`}</li>\n      <li parentName=\"ol\">{`Request Queue: Requests waiting to be processed.`}</li>\n      <li parentName=\"ol\">{`Response Queue: Requests waiting to be sent back to the clients.`}</li>\n    </ol>\n    <h2 {...{\n      \"id\": \"partitions\"\n    }}>{`Partitions`}</h2>\n    <p>{`Within a broker, a topic can be broken down into multiple partitions (with n-1 partitions being replicas).`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Partitions within a topic are split between brokers.`}</li>\n      <li parentName=\"ul\">{`Partitions themselves will never be split up.`}</li>\n      <li parentName=\"ul\">{`Partitions will continue to get larger as the number of messages grow.`}</li>\n      <li parentName=\"ul\">{`Messages will never be removed from the partition, only appended.`}</li>\n      <li parentName=\"ul\">{`Messages are stored in the directory specified in the `}<inlineCode parentName=\"li\">{`server.properties`}</inlineCode>{` file (log.dirs).`}</li>\n    </ul>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}