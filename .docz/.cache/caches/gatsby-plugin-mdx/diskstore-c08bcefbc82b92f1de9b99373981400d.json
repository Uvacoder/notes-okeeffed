{"expireTime":9007200849425570000,"key":"gatsby-plugin-mdx-entire-payload-9977f50f951b833a4986ff2fdd13cfb5-","val":{"mdast":{"type":"root","children":[{"type":"import","value":"import DefaultLayout from \"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/gatsby-theme-docz/src/base/Layout.js\"","position":{"start":{"line":3,"column":1,"offset":2},"end":{"line":3,"column":133,"offset":134},"indent":[]}},{"type":"export","default":true,"value":"export default DefaultLayout","position":{"start":{"line":5,"column":1,"offset":136},"end":{"line":5,"column":29,"offset":164},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Intro to Detox and Expo","position":{"start":{"line":7,"column":3,"offset":168},"end":{"line":7,"column":26,"offset":191},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":166},"end":{"line":7,"column":26,"offset":191},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Links","position":{"start":{"line":9,"column":4,"offset":196},"end":{"line":9,"column":9,"offset":201},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":193},"end":{"line":9,"column":9,"offset":201},"indent":[]}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://github.com/wix/detox/blob/master/docs/Guide.Expo.md","children":[{"type":"text","value":"Setup guide can be found here","position":{"start":{"line":11,"column":2,"offset":204},"end":{"line":11,"column":31,"offset":233},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":203},"end":{"line":11,"column":93,"offset":295},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":203},"end":{"line":11,"column":93,"offset":295},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Prereqs","position":{"start":{"line":13,"column":4,"offset":300},"end":{"line":13,"column":11,"offset":307},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":297},"end":{"line":13,"column":11,"offset":307},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Ensure Node is 8.3.0 or higher.","position":{"start":{"line":15,"column":1,"offset":309},"end":{"line":15,"column":32,"offset":340},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":309},"end":{"line":15,"column":32,"offset":340},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Install ","position":{"start":{"line":17,"column":1,"offset":342},"end":{"line":17,"column":9,"offset":350},"indent":[]}},{"type":"inlineCode","value":"applesimutils","position":{"start":{"line":17,"column":9,"offset":350},"end":{"line":17,"column":24,"offset":365},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":17,"column":24,"offset":365},"end":{"line":17,"column":25,"offset":366},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":342},"end":{"line":17,"column":25,"offset":366},"indent":[]}},{"type":"code","lang":"shell","meta":null,"value":"brew tap wix/brew\nbrew install applesimutils","position":{"start":{"line":19,"column":1,"offset":368},"end":{"line":22,"column":4,"offset":425},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Install detox-cli:","position":{"start":{"line":24,"column":1,"offset":427},"end":{"line":24,"column":19,"offset":445},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":427},"end":{"line":24,"column":19,"offset":445},"indent":[]}},{"type":"code","lang":"shell","meta":null,"value":"npm install -g detox-cli","position":{"start":{"line":26,"column":1,"offset":447},"end":{"line":28,"column":4,"offset":484},"indent":[1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Getting Started","position":{"start":{"line":30,"column":4,"offset":489},"end":{"line":30,"column":19,"offset":504},"indent":[]}}],"position":{"start":{"line":30,"column":1,"offset":486},"end":{"line":30,"column":19,"offset":504},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"1. Yarn add","position":{"start":{"line":32,"column":5,"offset":510},"end":{"line":32,"column":16,"offset":521},"indent":[]}}],"position":{"start":{"line":32,"column":1,"offset":506},"end":{"line":32,"column":16,"offset":521},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"yarn add detox detox-expo-helpers expo-detox-hook","position":{"start":{"line":34,"column":1,"offset":523},"end":{"line":36,"column":4,"offset":580},"indent":[1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"2. Add the following to package.json","position":{"start":{"line":38,"column":5,"offset":586},"end":{"line":38,"column":41,"offset":622},"indent":[]}}],"position":{"start":{"line":38,"column":1,"offset":582},"end":{"line":38,"column":41,"offset":622},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"\"detox\": {\n  \"configurations\": {\n    \"ios.sim\": {\n      \"binaryPath\": \"bin/Exponent.app\",\n      \"type\": \"ios.simulator\",\n      \"name\": \"iPhone 7\"\n    }\n  }\n}","position":{"start":{"line":40,"column":1,"offset":624},"end":{"line":50,"column":4,"offset":793},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"…and to the scripts object:","position":{"start":{"line":52,"column":1,"offset":795},"end":{"line":52,"column":28,"offset":822},"indent":[]}}],"position":{"start":{"line":52,"column":1,"offset":795},"end":{"line":52,"column":28,"offset":822},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"\"scripts\": {\n    \"e2e\": \"detox test --configuration ios.sim\"\n}","position":{"start":{"line":54,"column":1,"offset":824},"end":{"line":58,"column":4,"offset":898},"indent":[1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"3. Download IPA","position":{"start":{"line":60,"column":5,"offset":904},"end":{"line":60,"column":20,"offset":919},"indent":[]}}],"position":{"start":{"line":60,"column":1,"offset":900},"end":{"line":60,"column":20,"offset":919},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Fetch the IPA file ","position":{"start":{"line":62,"column":1,"offset":921},"end":{"line":62,"column":20,"offset":940},"indent":[]}},{"type":"link","title":null,"url":"https://expo.io/tools#client","children":[{"type":"text","value":"from here","position":{"start":{"line":62,"column":21,"offset":941},"end":{"line":62,"column":30,"offset":950},"indent":[]}}],"position":{"start":{"line":62,"column":20,"offset":940},"end":{"line":62,"column":61,"offset":981},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":921},"end":{"line":62,"column":61,"offset":981},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"4. Copy e2e files","position":{"start":{"line":64,"column":5,"offset":987},"end":{"line":64,"column":22,"offset":1004},"indent":[]}}],"position":{"start":{"line":64,"column":1,"offset":983},"end":{"line":64,"column":22,"offset":1004},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Fetch/copy files ","position":{"start":{"line":66,"column":1,"offset":1006},"end":{"line":66,"column":18,"offset":1023},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/expo/with-detox-tests/tree/master/e2e","children":[{"type":"text","value":"from Github","position":{"start":{"line":66,"column":19,"offset":1024},"end":{"line":66,"column":30,"offset":1035},"indent":[]}}],"position":{"start":{"line":66,"column":18,"offset":1023},"end":{"line":66,"column":89,"offset":1094},"indent":[]}}],"position":{"start":{"line":66,"column":1,"offset":1006},"end":{"line":66,"column":89,"offset":1094},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Using Detox","position":{"start":{"line":68,"column":4,"offset":1099},"end":{"line":68,"column":15,"offset":1110},"indent":[]}}],"position":{"start":{"line":68,"column":1,"offset":1096},"end":{"line":68,"column":15,"offset":1110},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"A basic example of incorporating some useful detox calls:","position":{"start":{"line":70,"column":1,"offset":1112},"end":{"line":70,"column":58,"offset":1169},"indent":[]}}],"position":{"start":{"line":70,"column":1,"offset":1112},"end":{"line":70,"column":58,"offset":1169},"indent":[]}},{"type":"code","lang":"js","meta":null,"value":"const { reloadApp } = require('detox-expo-helpers');\n\ndescribe('Login flow', () => {\n  beforeEach(async () => {\n    await reloadApp();\n  });\n\n  it('should login successfully', async () => {\n    await device.reloadReactNative();\n    await expect(element(by.id('email'))).toBeVisible();\n\n    await element(by.id('email')).typeText('john@example.com');\n    await element(by.id('password')).typeText('123456');\n    await element(by.text('Login')).tap();\n\n    await expect(element(by.text('Welcome'))).toBeVisible();\n    await expect(element(by.id('email'))).toNotExist();\n  });\n});","position":{"start":{"line":72,"column":1,"offset":1171},"end":{"line":92,"column":4,"offset":1758},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The element can be selected by making the most of using the ","position":{"start":{"line":94,"column":1,"offset":1760},"end":{"line":94,"column":61,"offset":1820},"indent":[]}},{"type":"inlineCode","value":"testId","position":{"start":{"line":94,"column":61,"offset":1820},"end":{"line":94,"column":69,"offset":1828},"indent":[]}},{"type":"text","value":" — for example, the following test button has ID ","position":{"start":{"line":94,"column":69,"offset":1828},"end":{"line":94,"column":118,"offset":1877},"indent":[]}},{"type":"inlineCode","value":"hello_button","position":{"start":{"line":94,"column":118,"offset":1877},"end":{"line":94,"column":132,"offset":1891},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":94,"column":132,"offset":1891},"end":{"line":94,"column":133,"offset":1892},"indent":[]}}],"position":{"start":{"line":94,"column":1,"offset":1760},"end":{"line":94,"column":133,"offset":1892},"indent":[]}},{"type":"code","lang":"js","meta":null,"value":"<TouchableOpacity\n  testID=\"hello_button\"\n  onPress={this.onButtonPress.bind(this, 'Hello')}\n>\n  <Text style={{ color: 'blue', marginBottom: 20 }}>Say Hello</Text>\n</TouchableOpacity>","position":{"start":{"line":96,"column":1,"offset":1894},"end":{"line":103,"column":4,"offset":2087},"indent":[1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Running the tests","position":{"start":{"line":105,"column":4,"offset":2092},"end":{"line":105,"column":21,"offset":2109},"indent":[]}}],"position":{"start":{"line":105,"column":1,"offset":2089},"end":{"line":105,"column":21,"offset":2109},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Finally, to run the test we can run ","position":{"start":{"line":107,"column":1,"offset":2111},"end":{"line":107,"column":37,"offset":2147},"indent":[]}},{"type":"inlineCode","value":"yarn start","position":{"start":{"line":107,"column":37,"offset":2147},"end":{"line":107,"column":49,"offset":2159},"indent":[]}},{"type":"text","value":" in one terminal and ","position":{"start":{"line":107,"column":49,"offset":2159},"end":{"line":107,"column":70,"offset":2180},"indent":[]}},{"type":"inlineCode","value":"yarn e2e","position":{"start":{"line":107,"column":70,"offset":2180},"end":{"line":107,"column":80,"offset":2190},"indent":[]}},{"type":"text","value":" on the other to run the ","position":{"start":{"line":107,"column":80,"offset":2190},"end":{"line":107,"column":105,"offset":2215},"indent":[]}},{"type":"inlineCode","value":"e2e","position":{"start":{"line":107,"column":105,"offset":2215},"end":{"line":107,"column":110,"offset":2220},"indent":[]}},{"type":"text","value":" script. Note that you need to have live reload disabled, so better to also put the app into production mode before running the e2e tests. This can be done from the terminal following the instructions to set production mode.","position":{"start":{"line":107,"column":110,"offset":2220},"end":{"line":107,"column":334,"offset":2444},"indent":[]}}],"position":{"start":{"line":107,"column":1,"offset":2111},"end":{"line":107,"column":334,"offset":2444},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Notes","position":{"start":{"line":109,"column":4,"offset":2449},"end":{"line":109,"column":9,"offset":2454},"indent":[]}}],"position":{"start":{"line":109,"column":1,"offset":2446},"end":{"line":109,"column":9,"offset":2454},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You may need to add the ","position":{"start":{"line":111,"column":1,"offset":2456},"end":{"line":111,"column":25,"offset":2480},"indent":[]}},{"type":"inlineCode","value":"--reuse","position":{"start":{"line":111,"column":25,"offset":2480},"end":{"line":111,"column":34,"offset":2489},"indent":[]}},{"type":"text","value":" flag to the ","position":{"start":{"line":111,"column":34,"offset":2489},"end":{"line":111,"column":47,"offset":2502},"indent":[]}},{"type":"inlineCode","value":"e2e","position":{"start":{"line":111,"column":47,"offset":2502},"end":{"line":111,"column":52,"offset":2507},"indent":[]}},{"type":"text","value":" script. At the time of writing, the current version 0.55 is having issues on iOS with hanging. The requirement at the moment is that you have to open and close the Expo window. ","position":{"start":{"line":111,"column":52,"offset":2507},"end":{"line":111,"column":230,"offset":2685},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/wix/Detox/issues/917#issuecomment-422396875","children":[{"type":"text","value":"See this GitHub issue for more info","position":{"start":{"line":111,"column":231,"offset":2686},"end":{"line":111,"column":266,"offset":2721},"indent":[]}}],"position":{"start":{"line":111,"column":230,"offset":2685},"end":{"line":111,"column":331,"offset":2786},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":111,"column":331,"offset":2786},"end":{"line":111,"column":332,"offset":2787},"indent":[]}}],"position":{"start":{"line":111,"column":1,"offset":2456},"end":{"line":111,"column":332,"offset":2787},"indent":[]}},{"type":"export","value":"export const _frontmatter = {}","position":{"start":{"line":114,"column":1,"offset":2790},"end":{"line":114,"column":31,"offset":2820},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":114,"column":31,"offset":2820}}},"scopeImports":[],"scopeIdentifiers":[],"rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\nimport DefaultLayout from \"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/gatsby-theme-docz/src/base/Layout.js\"\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"intro-to-detox-and-expo\"\n    }}>{`Intro to Detox and Expo`}</h1>\n    <h2 {...{\n      \"id\": \"links\"\n    }}>{`Links`}</h2>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://github.com/wix/detox/blob/master/docs/Guide.Expo.md\"\n      }}>{`Setup guide can be found here`}</a></p>\n    <h2 {...{\n      \"id\": \"prereqs\"\n    }}>{`Prereqs`}</h2>\n    <p>{`Ensure Node is 8.3.0 or higher.`}</p>\n    <p>{`Install `}<inlineCode parentName=\"p\">{`applesimutils`}</inlineCode>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`brew tap wix/brew\nbrew install applesimutils\n`}</code></pre>\n    <p>{`Install detox-cli:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`npm install -g detox-cli\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"getting-started\"\n    }}>{`Getting Started`}</h2>\n    <h3 {...{\n      \"id\": \"1-yarn-add\"\n    }}>{`1. Yarn add`}</h3>\n    <pre><code parentName=\"pre\" {...{}}>{`yarn add detox detox-expo-helpers expo-detox-hook\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"2-add-the-following-to-packagejson\"\n    }}>{`2. Add the following to package.json`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`\"detox\": {\n  \"configurations\": {\n    \"ios.sim\": {\n      \"binaryPath\": \"bin/Exponent.app\",\n      \"type\": \"ios.simulator\",\n      \"name\": \"iPhone 7\"\n    }\n  }\n}\n`}</code></pre>\n    <p>{`…and to the scripts object:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`\"scripts\": {\n    \"e2e\": \"detox test --configuration ios.sim\"\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"3-download-ipa\"\n    }}>{`3. Download IPA`}</h3>\n    <p>{`Fetch the IPA file `}<a parentName=\"p\" {...{\n        \"href\": \"https://expo.io/tools#client\"\n      }}>{`from here`}</a></p>\n    <h3 {...{\n      \"id\": \"4-copy-e2e-files\"\n    }}>{`4. Copy e2e files`}</h3>\n    <p>{`Fetch/copy files `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/expo/with-detox-tests/tree/master/e2e\"\n      }}>{`from Github`}</a></p>\n    <h2 {...{\n      \"id\": \"using-detox\"\n    }}>{`Using Detox`}</h2>\n    <p>{`A basic example of incorporating some useful detox calls:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`const { reloadApp } = require('detox-expo-helpers');\n\ndescribe('Login flow', () => {\n  beforeEach(async () => {\n    await reloadApp();\n  });\n\n  it('should login successfully', async () => {\n    await device.reloadReactNative();\n    await expect(element(by.id('email'))).toBeVisible();\n\n    await element(by.id('email')).typeText('john@example.com');\n    await element(by.id('password')).typeText('123456');\n    await element(by.text('Login')).tap();\n\n    await expect(element(by.text('Welcome'))).toBeVisible();\n    await expect(element(by.id('email'))).toNotExist();\n  });\n});\n`}</code></pre>\n    <p>{`The element can be selected by making the most of using the `}<inlineCode parentName=\"p\">{`testId`}</inlineCode>{` — for example, the following test button has ID `}<inlineCode parentName=\"p\">{`hello_button`}</inlineCode>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`<TouchableOpacity\n  testID=\"hello_button\"\n  onPress={this.onButtonPress.bind(this, 'Hello')}\n>\n  <Text style={{ color: 'blue', marginBottom: 20 }}>Say Hello</Text>\n</TouchableOpacity>\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"running-the-tests\"\n    }}>{`Running the tests`}</h2>\n    <p>{`Finally, to run the test we can run `}<inlineCode parentName=\"p\">{`yarn start`}</inlineCode>{` in one terminal and `}<inlineCode parentName=\"p\">{`yarn e2e`}</inlineCode>{` on the other to run the `}<inlineCode parentName=\"p\">{`e2e`}</inlineCode>{` script. Note that you need to have live reload disabled, so better to also put the app into production mode before running the e2e tests. This can be done from the terminal following the instructions to set production mode.`}</p>\n    <h2 {...{\n      \"id\": \"notes\"\n    }}>{`Notes`}</h2>\n    <p>{`You may need to add the `}<inlineCode parentName=\"p\">{`--reuse`}</inlineCode>{` flag to the `}<inlineCode parentName=\"p\">{`e2e`}</inlineCode>{` script. At the time of writing, the current version 0.55 is having issues on iOS with hanging. The requirement at the moment is that you have to open and close the Expo window. `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/wix/Detox/issues/917#issuecomment-422396875\"\n      }}>{`See this GitHub issue for more info`}</a>{`.`}</p>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}