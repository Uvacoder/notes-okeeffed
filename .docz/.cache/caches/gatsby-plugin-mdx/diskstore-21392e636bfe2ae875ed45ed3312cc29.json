{"expireTime":9007200852878361000,"key":"gatsby-plugin-mdx-entire-payload-21b65288173052e13332f200a3b7d20f-","val":{"mdast":{"type":"root","children":[{"type":"import","value":"import DefaultLayout from \"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/gatsby-theme-docz/src/base/Layout.js\"","position":{"start":{"line":3,"column":1,"offset":2},"end":{"line":3,"column":133,"offset":134},"indent":[]}},{"type":"export","default":true,"value":"export default DefaultLayout","position":{"start":{"line":5,"column":1,"offset":136},"end":{"line":5,"column":29,"offset":164},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Factory Bot Rails Gem","position":{"start":{"line":8,"column":3,"offset":169},"end":{"line":8,"column":24,"offset":190},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":167},"end":{"line":8,"column":24,"offset":190},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Why Factory Bot?","position":{"start":{"line":10,"column":4,"offset":195},"end":{"line":10,"column":20,"offset":211},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":192},"end":{"line":10,"column":20,"offset":211},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"From the world's most reliable resource ","position":{"start":{"line":12,"column":1,"offset":213},"end":{"line":12,"column":41,"offset":253},"indent":[]}},{"type":"link","title":null,"url":"https://en.wikipedia.org/wiki/Factory_Bot_(Rails_Testing)","children":[{"type":"text","value":"Wikipedia","position":{"start":{"line":12,"column":42,"offset":254},"end":{"line":12,"column":51,"offset":263},"indent":[]}}],"position":{"start":{"line":12,"column":41,"offset":253},"end":{"line":12,"column":113,"offset":325},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":12,"column":113,"offset":325},"end":{"line":12,"column":114,"offset":326},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":213},"end":{"line":12,"column":114,"offset":326},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"Factory Bot is often used in testing Ruby on Rails applications; where it replaces Rails' built-in fixture mechanism. Rails' default setup uses a pre-populated database as test fixtures, which are global for the complete test suite. Factory Bot, on the other hand, allows developers to define a different setup for each test and thus helps to avoid dependencies within the test suite.","position":{"start":{"line":14,"column":3,"offset":330},"end":{"line":14,"column":387,"offset":714},"indent":[]}}],"position":{"start":{"line":14,"column":3,"offset":330},"end":{"line":14,"column":387,"offset":714},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":328},"end":{"line":14,"column":387,"offset":714},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"There is more info on the why on the ","position":{"start":{"line":16,"column":1,"offset":716},"end":{"line":16,"column":38,"offset":753},"indent":[]}},{"type":"link","title":null,"url":"https://thoughtbot.com/blog/why-factories","children":[{"type":"text","value":"Why Factories","position":{"start":{"line":16,"column":39,"offset":754},"end":{"line":16,"column":52,"offset":767},"indent":[]}}],"position":{"start":{"line":16,"column":38,"offset":753},"end":{"line":16,"column":96,"offset":811},"indent":[]}},{"type":"text","value":" article.","position":{"start":{"line":16,"column":96,"offset":811},"end":{"line":16,"column":105,"offset":820},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":716},"end":{"line":16,"column":105,"offset":820},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This is simply a quick start to get up and going to test model validation.","position":{"start":{"line":18,"column":1,"offset":822},"end":{"line":18,"column":75,"offset":896},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":822},"end":{"line":18,"column":75,"offset":896},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Resources","position":{"start":{"line":20,"column":4,"offset":901},"end":{"line":20,"column":13,"offset":910},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":898},"end":{"line":20,"column":13,"offset":910},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://github.com/thoughtbot/factory_bot_rails","children":[{"type":"text","value":"thoughtbot/factory_bot_rails","position":{"start":{"line":22,"column":5,"offset":916},"end":{"line":22,"column":33,"offset":944},"indent":[]}}],"position":{"start":{"line":22,"column":4,"offset":915},"end":{"line":22,"column":83,"offset":994},"indent":[]}}],"position":{"start":{"line":22,"column":4,"offset":915},"end":{"line":22,"column":83,"offset":994},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":912},"end":{"line":22,"column":83,"offset":994},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://github.com/thoughtbot/factory_bot","children":[{"type":"text","value":"thoughtbot/factory_bot","position":{"start":{"line":23,"column":5,"offset":999},"end":{"line":23,"column":27,"offset":1021},"indent":[]}}],"position":{"start":{"line":23,"column":4,"offset":998},"end":{"line":23,"column":71,"offset":1065},"indent":[]}}],"position":{"start":{"line":23,"column":4,"offset":998},"end":{"line":23,"column":71,"offset":1065},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":995},"end":{"line":23,"column":71,"offset":1065},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://guides.rubyonrails.org/getting_started.html#creating-the-article-model","children":[{"type":"text","value":"Creating an Article model in Rails","position":{"start":{"line":24,"column":5,"offset":1070},"end":{"line":24,"column":39,"offset":1104},"indent":[]}}],"position":{"start":{"line":24,"column":4,"offset":1069},"end":{"line":24,"column":120,"offset":1185},"indent":[]}}],"position":{"start":{"line":24,"column":4,"offset":1069},"end":{"line":24,"column":120,"offset":1185},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":1066},"end":{"line":24,"column":120,"offset":1185},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://semaphoreci.com/community/tutorials/how-to-test-rails-models-with-rspec","children":[{"type":"text","value":"Testing RSpec","position":{"start":{"line":25,"column":5,"offset":1190},"end":{"line":25,"column":18,"offset":1203},"indent":[]}}],"position":{"start":{"line":25,"column":4,"offset":1189},"end":{"line":25,"column":100,"offset":1285},"indent":[]}}],"position":{"start":{"line":25,"column":4,"offset":1189},"end":{"line":25,"column":100,"offset":1285},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":1186},"end":{"line":25,"column":100,"offset":1285},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://thoughtbot.com/blog/why-factories","children":[{"type":"text","value":"Why Factories?","position":{"start":{"line":26,"column":5,"offset":1290},"end":{"line":26,"column":19,"offset":1304},"indent":[]}}],"position":{"start":{"line":26,"column":4,"offset":1289},"end":{"line":26,"column":63,"offset":1348},"indent":[]}}],"position":{"start":{"line":26,"column":4,"offset":1289},"end":{"line":26,"column":63,"offset":1348},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1286},"end":{"line":26,"column":63,"offset":1348},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":912},"end":{"line":26,"column":63,"offset":1348},"indent":[1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Quick start","position":{"start":{"line":28,"column":4,"offset":1353},"end":{"line":28,"column":15,"offset":1364},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":1350},"end":{"line":28,"column":15,"offset":1364},"indent":[]}},{"type":"code","lang":"s","meta":null,"value":"rails new <project> -- api\ncd <project>\ngem install rspec factory_bot_rails","position":{"start":{"line":30,"column":1,"offset":1366},"end":{"line":34,"column":4,"offset":1450},"indent":[1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Update Gemfile config","position":{"start":{"line":36,"column":4,"offset":1455},"end":{"line":36,"column":25,"offset":1476},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":1452},"end":{"line":36,"column":25,"offset":1476},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In the Gemfile:","position":{"start":{"line":38,"column":1,"offset":1478},"end":{"line":38,"column":16,"offset":1493},"indent":[]}}],"position":{"start":{"line":38,"column":1,"offset":1478},"end":{"line":38,"column":16,"offset":1493},"indent":[]}},{"type":"code","lang":"ruby","meta":null,"value":"group :development, :test do\n  gem 'factory_bot_rails', '~>6.0'\n  gem 'rspec-rails', '>= 3.9.0'\nend","position":{"start":{"line":40,"column":1,"offset":1495},"end":{"line":45,"column":4,"offset":1606},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Run ","position":{"start":{"line":47,"column":1,"offset":1608},"end":{"line":47,"column":5,"offset":1612},"indent":[]}},{"type":"inlineCode","value":"bundle install","position":{"start":{"line":47,"column":5,"offset":1612},"end":{"line":47,"column":21,"offset":1628},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":47,"column":21,"offset":1628},"end":{"line":47,"column":22,"offset":1629},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":1608},"end":{"line":47,"column":22,"offset":1629},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Automatic factory definition loading","position":{"start":{"line":49,"column":4,"offset":1634},"end":{"line":49,"column":40,"offset":1670},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":1631},"end":{"line":49,"column":40,"offset":1670},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"From the docs:","position":{"start":{"line":51,"column":1,"offset":1672},"end":{"line":51,"column":15,"offset":1686},"indent":[]}}],"position":{"start":{"line":51,"column":1,"offset":1672},"end":{"line":51,"column":15,"offset":1686},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"By default, factory_bot_rails will automatically load factories defined in the following locations, relative to the root of the Rails project:","position":{"start":{"line":53,"column":3,"offset":1690},"end":{"line":53,"column":145,"offset":1832},"indent":[]}}],"position":{"start":{"line":53,"column":3,"offset":1690},"end":{"line":53,"column":145,"offset":1832},"indent":[]}}],"position":{"start":{"line":53,"column":1,"offset":1688},"end":{"line":53,"column":145,"offset":1832},"indent":[]}},{"type":"code","lang":"s","meta":null,"value":"factories.rb\ntest/factories.rb\nspec/factories.rb\nfactories/*.rb\ntest/factories/*.rb\nspec/factories/*.rb","position":{"start":{"line":55,"column":1,"offset":1834},"end":{"line":62,"column":4,"offset":1946},"indent":[1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If you want to, you can set custom configuration in ","position":{"start":{"line":64,"column":1,"offset":1948},"end":{"line":64,"column":53,"offset":2000},"indent":[]}},{"type":"inlineCode","value":"config/application.rb","position":{"start":{"line":64,"column":53,"offset":2000},"end":{"line":64,"column":76,"offset":2023},"indent":[]}},{"type":"text","value":" or the appropraite env config.","position":{"start":{"line":64,"column":76,"offset":2023},"end":{"line":64,"column":107,"offset":2054},"indent":[]}}],"position":{"start":{"line":64,"column":1,"offset":1948},"end":{"line":64,"column":107,"offset":2054},"indent":[]}},{"type":"code","lang":"s","meta":null,"value":"config.factory_bot.definition_file_paths = [\"custom/factories\"]","position":{"start":{"line":66,"column":1,"offset":2056},"end":{"line":68,"column":4,"offset":2128},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This will cause factory_bot_rails to automatically load factories in ","position":{"start":{"line":70,"column":1,"offset":2130},"end":{"line":70,"column":70,"offset":2199},"indent":[]}},{"type":"inlineCode","value":"custom/factories.rb","position":{"start":{"line":70,"column":70,"offset":2199},"end":{"line":70,"column":91,"offset":2220},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":70,"column":91,"offset":2220},"end":{"line":70,"column":96,"offset":2225},"indent":[]}},{"type":"inlineCode","value":"custom/factories/*.rb","position":{"start":{"line":70,"column":96,"offset":2225},"end":{"line":70,"column":119,"offset":2248},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":70,"column":119,"offset":2248},"end":{"line":70,"column":120,"offset":2249},"indent":[]}}],"position":{"start":{"line":70,"column":1,"offset":2130},"end":{"line":70,"column":120,"offset":2249},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Config","position":{"start":{"line":72,"column":4,"offset":2254},"end":{"line":72,"column":10,"offset":2260},"indent":[]}}],"position":{"start":{"line":72,"column":1,"offset":2251},"end":{"line":72,"column":10,"offset":2260},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Add the following configuration to ","position":{"start":{"line":74,"column":1,"offset":2262},"end":{"line":74,"column":36,"offset":2297},"indent":[]}},{"type":"inlineCode","value":"test/support/factory_bot.rb","position":{"start":{"line":74,"column":36,"offset":2297},"end":{"line":74,"column":65,"offset":2326},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":74,"column":65,"offset":2326},"end":{"line":74,"column":66,"offset":2327},"indent":[]}}],"position":{"start":{"line":74,"column":1,"offset":2262},"end":{"line":74,"column":66,"offset":2327},"indent":[]}},{"type":"code","lang":"rb","meta":null,"value":"# test/support/factory_bot.rb\nrequire \"factory_bot_rails\"\n\nRSpec.configure do |config|\n  config.include FactoryBot::Syntax::Methods\nend","position":{"start":{"line":76,"column":1,"offset":2329},"end":{"line":83,"column":4,"offset":2474},"indent":[1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Be sure to require that file in ","position":{"start":{"line":85,"column":1,"offset":2476},"end":{"line":85,"column":33,"offset":2508},"indent":[]}},{"type":"inlineCode","value":"test/test_helper.rb","position":{"start":{"line":85,"column":33,"offset":2508},"end":{"line":85,"column":54,"offset":2529},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":85,"column":54,"offset":2529},"end":{"line":85,"column":55,"offset":2530},"indent":[]}}],"position":{"start":{"line":85,"column":1,"offset":2476},"end":{"line":85,"column":55,"offset":2530},"indent":[]}},{"type":"code","lang":"rb","meta":null,"value":"# test/test_helper.rb\nENV[\"RAILS_ENV\"] ||= \"test\"\nrequire_relative \"../config/environment\"\nrequire_relative \"./support/factory_bot\"\nrequire \"rails/test_help\"\nrequire \"rspec/rails\"\n\nclass ActiveSupport::TestCase\n  # Setup all fixtures in test/fixtures/*.yml for all tests in alphabetical order.\n  fixtures :all\n\n  # Add more helper methods to be used by all tests here...\nend","position":{"start":{"line":87,"column":1,"offset":2532},"end":{"line":101,"column":4,"offset":2916},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Create a model","position":{"start":{"line":103,"column":4,"offset":2921},"end":{"line":103,"column":18,"offset":2935},"indent":[]}}],"position":{"start":{"line":103,"column":1,"offset":2918},"end":{"line":103,"column":18,"offset":2935},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"From the ","position":{"start":{"line":105,"column":1,"offset":2937},"end":{"line":105,"column":10,"offset":2946},"indent":[]}},{"type":"link","title":null,"url":"https://guides.rubyonrails.org/getting_started.html#creating-the-article-model","children":[{"type":"text","value":"guides","position":{"start":{"line":105,"column":11,"offset":2947},"end":{"line":105,"column":17,"offset":2953},"indent":[]}}],"position":{"start":{"line":105,"column":10,"offset":2946},"end":{"line":105,"column":98,"offset":3034},"indent":[]}},{"type":"text","value":", we are going to generate a new model.","position":{"start":{"line":105,"column":98,"offset":3034},"end":{"line":105,"column":137,"offset":3073},"indent":[]}}],"position":{"start":{"line":105,"column":1,"offset":2937},"end":{"line":105,"column":137,"offset":3073},"indent":[]}},{"type":"code","lang":"s","meta":null,"value":"rails generate model Article title:string text:text\n# run the migration\nrails db:migrate","position":{"start":{"line":107,"column":1,"offset":3075},"end":{"line":111,"column":4,"offset":3172},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If successful, the migration should return:","position":{"start":{"line":113,"column":1,"offset":3174},"end":{"line":113,"column":44,"offset":3217},"indent":[]}}],"position":{"start":{"line":113,"column":1,"offset":3174},"end":{"line":113,"column":44,"offset":3217},"indent":[]}},{"type":"code","lang":"s","meta":null,"value":"==  CreateArticles: migrating ==================================================\n-- create_table(:articles)\n   -> 0.0019s\n==  CreateArticles: migrated (0.0020s) =========================================","position":{"start":{"line":115,"column":1,"offset":3219},"end":{"line":120,"column":4,"offset":3430},"indent":[1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Update Ruby","position":{"start":{"line":122,"column":4,"offset":3435},"end":{"line":122,"column":15,"offset":3446},"indent":[]}}],"position":{"start":{"line":122,"column":1,"offset":3432},"end":{"line":122,"column":15,"offset":3446},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Update ","position":{"start":{"line":124,"column":1,"offset":3448},"end":{"line":124,"column":8,"offset":3455},"indent":[]}},{"type":"inlineCode","value":"app/models/article.rb","position":{"start":{"line":124,"column":8,"offset":3455},"end":{"line":124,"column":31,"offset":3478},"indent":[]}},{"type":"text","value":" to look like the following:","position":{"start":{"line":124,"column":31,"offset":3478},"end":{"line":124,"column":59,"offset":3506},"indent":[]}}],"position":{"start":{"line":124,"column":1,"offset":3448},"end":{"line":124,"column":59,"offset":3506},"indent":[]}},{"type":"code","lang":"rb","meta":null,"value":"class Article < ApplicationRecord\n  validates :title, presence: true, length: {minimum: 5}\n  validates :text, presence: true, length: {minimum: 5}\nend","position":{"start":{"line":126,"column":1,"offset":3508},"end":{"line":131,"column":4,"offset":3668},"indent":[1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Add the following to the factories directory","position":{"start":{"line":133,"column":4,"offset":3673},"end":{"line":133,"column":48,"offset":3717},"indent":[]}}],"position":{"start":{"line":133,"column":1,"offset":3670},"end":{"line":133,"column":48,"offset":3717},"indent":[]}},{"type":"code","lang":"rb","meta":null,"value":"# test/factories/articles.rb\nFactoryBot.define do\n  factory :article do\n    title { \"MyString\" }\n    text { \"MyText\" }\n  end\nend","position":{"start":{"line":135,"column":1,"offset":3719},"end":{"line":143,"column":4,"offset":3857},"indent":[1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Add an Rspec for the model","position":{"start":{"line":145,"column":4,"offset":3862},"end":{"line":145,"column":30,"offset":3888},"indent":[]}}],"position":{"start":{"line":145,"column":1,"offset":3859},"end":{"line":145,"column":30,"offset":3888},"indent":[]}},{"type":"code","lang":"rb","meta":null,"value":"# test/models/article_test.rb\nrequire \"./test/test_helper\"\n\nclass ArticleTest < ActiveSupport::TestCase\n  describe \"article model\" do\n    before(:all) do\n      @article1 = FactoryBot.create(:article)\n    end\n\n    it \"is valid with valid attributes\" do\n      expect(@article1).to be_valid\n    end\n\n    it \"is not valid without a title\" do\n      article2 = FactoryBot.build(:article, title: nil)\n      expect(article2).to_not be_valid\n    end\n\n    it \"is not valid without text\" do\n      article2 = FactoryBot.build(:article, text: nil)\n      expect(article2).to_not be_valid\n    end\n\n    it \"is not valid without a title of min length 5\" do\n      article2 = FactoryBot.build(:article, title: \"Min\")\n      expect(article2).to_not be_valid\n    end\n\n    it \"is not valid without text of min length 5\" do\n      article2 = FactoryBot.build(:article, text: \"Min\")\n      expect(article2).to_not be_valid\n    end\n  end\nend","position":{"start":{"line":147,"column":1,"offset":3890},"end":{"line":182,"column":4,"offset":4813},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Running the test","position":{"start":{"line":184,"column":4,"offset":4818},"end":{"line":184,"column":20,"offset":4834},"indent":[]}}],"position":{"start":{"line":184,"column":1,"offset":4815},"end":{"line":184,"column":20,"offset":4834},"indent":[]}},{"type":"code","lang":"s","meta":null,"value":"rspec test/models/article_test.rb","position":{"start":{"line":186,"column":1,"offset":4836},"end":{"line":188,"column":4,"offset":4878},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"We should get something like the following out:","position":{"start":{"line":190,"column":1,"offset":4880},"end":{"line":190,"column":48,"offset":4927},"indent":[]}}],"position":{"start":{"line":190,"column":1,"offset":4880},"end":{"line":190,"column":48,"offset":4927},"indent":[]}},{"type":"code","lang":"s","meta":null,"value":".....\n\nFinished in 0.04765 seconds (files took 0.90722 seconds to load)\n5 examples, 0 failures\n\nRun options: --seed 18801\n\n# Running:\n\n\n\nFinished in 0.001607s, 0.0000 runs/s, 0.0000 assertions/s.\n0 runs, 0 assertions, 0 failures, 0 errors, 0 skips","position":{"start":{"line":192,"column":1,"offset":4929},"end":{"line":206,"column":4,"offset":5185},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"export","value":"export const _frontmatter = {}","position":{"start":{"line":209,"column":1,"offset":5188},"end":{"line":209,"column":31,"offset":5218},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":209,"column":31,"offset":5218}}},"scopeImports":[],"scopeIdentifiers":[],"rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\nimport DefaultLayout from \"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/gatsby-theme-docz/src/base/Layout.js\"\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"factory-bot-rails-gem\"\n    }}>{`Factory Bot Rails Gem`}</h1>\n    <h2 {...{\n      \"id\": \"why-factory-bot\"\n    }}>{`Why Factory Bot?`}</h2>\n    <p>{`From the world's most reliable resource `}<a parentName=\"p\" {...{\n        \"href\": \"https://en.wikipedia.org/wiki/Factory_Bot_(Rails_Testing)\"\n      }}>{`Wikipedia`}</a>{`:`}</p>\n    <blockquote>\n      <p parentName=\"blockquote\">{`Factory Bot is often used in testing Ruby on Rails applications; where it replaces Rails' built-in fixture mechanism. Rails' default setup uses a pre-populated database as test fixtures, which are global for the complete test suite. Factory Bot, on the other hand, allows developers to define a different setup for each test and thus helps to avoid dependencies within the test suite.`}</p>\n    </blockquote>\n    <p>{`There is more info on the why on the `}<a parentName=\"p\" {...{\n        \"href\": \"https://thoughtbot.com/blog/why-factories\"\n      }}>{`Why Factories`}</a>{` article.`}</p>\n    <p>{`This is simply a quick start to get up and going to test model validation.`}</p>\n    <h2 {...{\n      \"id\": \"resources\"\n    }}>{`Resources`}</h2>\n    <ol>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"https://github.com/thoughtbot/factory_bot_rails\"\n        }}>{`thoughtbot/factory_bot_rails`}</a></li>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"https://github.com/thoughtbot/factory_bot\"\n        }}>{`thoughtbot/factory_bot`}</a></li>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"https://guides.rubyonrails.org/getting_started.html#creating-the-article-model\"\n        }}>{`Creating an Article model in Rails`}</a></li>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"https://semaphoreci.com/community/tutorials/how-to-test-rails-models-with-rspec\"\n        }}>{`Testing RSpec`}</a></li>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"https://thoughtbot.com/blog/why-factories\"\n        }}>{`Why Factories?`}</a></li>\n    </ol>\n    <h2 {...{\n      \"id\": \"quick-start\"\n    }}>{`Quick start`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-s\"\n      }}>{`rails new <project> -- api\ncd <project>\ngem install rspec factory_bot_rails\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"update-gemfile-config\"\n    }}>{`Update Gemfile config`}</h2>\n    <p>{`In the Gemfile:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-ruby\"\n      }}>{`group :development, :test do\n  gem 'factory_bot_rails', '~>6.0'\n  gem 'rspec-rails', '>= 3.9.0'\nend\n`}</code></pre>\n    <p>{`Run `}<inlineCode parentName=\"p\">{`bundle install`}</inlineCode>{`.`}</p>\n    <h2 {...{\n      \"id\": \"automatic-factory-definition-loading\"\n    }}>{`Automatic factory definition loading`}</h2>\n    <p>{`From the docs:`}</p>\n    <blockquote>\n      <p parentName=\"blockquote\">{`By default, factory_bot_rails will automatically load factories defined in the following locations, relative to the root of the Rails project:`}</p>\n    </blockquote>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-s\"\n      }}>{`factories.rb\ntest/factories.rb\nspec/factories.rb\nfactories/*.rb\ntest/factories/*.rb\nspec/factories/*.rb\n`}</code></pre>\n    <p>{`If you want to, you can set custom configuration in `}<inlineCode parentName=\"p\">{`config/application.rb`}</inlineCode>{` or the appropraite env config.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-s\"\n      }}>{`config.factory_bot.definition_file_paths = [\"custom/factories\"]\n`}</code></pre>\n    <p>{`This will cause factory_bot_rails to automatically load factories in `}<inlineCode parentName=\"p\">{`custom/factories.rb`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`custom/factories/*.rb`}</inlineCode>{`.`}</p>\n    <h2 {...{\n      \"id\": \"config\"\n    }}>{`Config`}</h2>\n    <p>{`Add the following configuration to `}<inlineCode parentName=\"p\">{`test/support/factory_bot.rb`}</inlineCode>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-rb\"\n      }}>{`# test/support/factory_bot.rb\nrequire \"factory_bot_rails\"\n\nRSpec.configure do |config|\n  config.include FactoryBot::Syntax::Methods\nend\n`}</code></pre>\n    <p>{`Be sure to require that file in `}<inlineCode parentName=\"p\">{`test/test_helper.rb`}</inlineCode>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-rb\"\n      }}>{`# test/test_helper.rb\nENV[\"RAILS_ENV\"] ||= \"test\"\nrequire_relative \"../config/environment\"\nrequire_relative \"./support/factory_bot\"\nrequire \"rails/test_help\"\nrequire \"rspec/rails\"\n\nclass ActiveSupport::TestCase\n  # Setup all fixtures in test/fixtures/*.yml for all tests in alphabetical order.\n  fixtures :all\n\n  # Add more helper methods to be used by all tests here...\nend\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"create-a-model\"\n    }}>{`Create a model`}</h2>\n    <p>{`From the `}<a parentName=\"p\" {...{\n        \"href\": \"https://guides.rubyonrails.org/getting_started.html#creating-the-article-model\"\n      }}>{`guides`}</a>{`, we are going to generate a new model.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-s\"\n      }}>{`rails generate model Article title:string text:text\n# run the migration\nrails db:migrate\n`}</code></pre>\n    <p>{`If successful, the migration should return:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-s\"\n      }}>{`==  CreateArticles: migrating ==================================================\n-- create_table(:articles)\n   -> 0.0019s\n==  CreateArticles: migrated (0.0020s) =========================================\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"update-ruby\"\n    }}>{`Update Ruby`}</h2>\n    <p>{`Update `}<inlineCode parentName=\"p\">{`app/models/article.rb`}</inlineCode>{` to look like the following:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-rb\"\n      }}>{`class Article < ApplicationRecord\n  validates :title, presence: true, length: {minimum: 5}\n  validates :text, presence: true, length: {minimum: 5}\nend\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"add-the-following-to-the-factories-directory\"\n    }}>{`Add the following to the factories directory`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-rb\"\n      }}>{`# test/factories/articles.rb\nFactoryBot.define do\n  factory :article do\n    title { \"MyString\" }\n    text { \"MyText\" }\n  end\nend\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"add-an-rspec-for-the-model\"\n    }}>{`Add an Rspec for the model`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-rb\"\n      }}>{`# test/models/article_test.rb\nrequire \"./test/test_helper\"\n\nclass ArticleTest < ActiveSupport::TestCase\n  describe \"article model\" do\n    before(:all) do\n      @article1 = FactoryBot.create(:article)\n    end\n\n    it \"is valid with valid attributes\" do\n      expect(@article1).to be_valid\n    end\n\n    it \"is not valid without a title\" do\n      article2 = FactoryBot.build(:article, title: nil)\n      expect(article2).to_not be_valid\n    end\n\n    it \"is not valid without text\" do\n      article2 = FactoryBot.build(:article, text: nil)\n      expect(article2).to_not be_valid\n    end\n\n    it \"is not valid without a title of min length 5\" do\n      article2 = FactoryBot.build(:article, title: \"Min\")\n      expect(article2).to_not be_valid\n    end\n\n    it \"is not valid without text of min length 5\" do\n      article2 = FactoryBot.build(:article, text: \"Min\")\n      expect(article2).to_not be_valid\n    end\n  end\nend\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"running-the-test\"\n    }}>{`Running the test`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-s\"\n      }}>{`rspec test/models/article_test.rb\n`}</code></pre>\n    <p>{`We should get something like the following out:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-s\"\n      }}>{`.....\n\nFinished in 0.04765 seconds (files took 0.90722 seconds to load)\n5 examples, 0 failures\n\nRun options: --seed 18801\n\n# Running:\n\n\n\nFinished in 0.001607s, 0.0000 runs/s, 0.0000 assertions/s.\n0 runs, 0 assertions, 0 failures, 0 errors, 0 skips\n`}</code></pre>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}