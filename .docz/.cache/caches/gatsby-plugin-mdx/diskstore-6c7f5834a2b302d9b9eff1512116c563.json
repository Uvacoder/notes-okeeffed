{"expireTime":9007200849425501000,"key":"gatsby-plugin-mdx-entire-payload-00eee6b7ab00210961cb6b87b25c3b37-","val":{"mdast":{"type":"root","children":[{"type":"import","value":"import DefaultLayout from \"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/gatsby-theme-docz/src/base/Layout.js\"","position":{"start":{"line":3,"column":1,"offset":2},"end":{"line":3,"column":133,"offset":134},"indent":[]}},{"type":"export","default":true,"value":"export default DefaultLayout","position":{"start":{"line":5,"column":1,"offset":136},"end":{"line":5,"column":29,"offset":164},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Rails Stripe Configuration","position":{"start":{"line":8,"column":3,"offset":169},"end":{"line":8,"column":29,"offset":195},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":167},"end":{"line":8,"column":29,"offset":195},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"References","position":{"start":{"line":10,"column":4,"offset":200},"end":{"line":10,"column":14,"offset":210},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":197},"end":{"line":10,"column":14,"offset":210},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://guides.rubyonrails.org/api_app.html","children":[{"type":"text","value":"Using Rails for API only","position":{"start":{"line":12,"column":5,"offset":216},"end":{"line":12,"column":29,"offset":240},"indent":[]}}],"position":{"start":{"line":12,"column":4,"offset":215},"end":{"line":12,"column":75,"offset":286},"indent":[]}}],"position":{"start":{"line":12,"column":4,"offset":215},"end":{"line":12,"column":75,"offset":286},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":212},"end":{"line":12,"column":75,"offset":286},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://github.com/stripe/stripe-ruby","children":[{"type":"text","value":"Stripe Ruby Github","position":{"start":{"line":13,"column":5,"offset":291},"end":{"line":13,"column":23,"offset":309},"indent":[]}}],"position":{"start":{"line":13,"column":4,"offset":290},"end":{"line":13,"column":63,"offset":349},"indent":[]}}],"position":{"start":{"line":13,"column":4,"offset":290},"end":{"line":13,"column":63,"offset":349},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":287},"end":{"line":13,"column":63,"offset":349},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://github.com/bkeepers/dotenv","children":[{"type":"text","value":"Dotenv Ruby Github","position":{"start":{"line":14,"column":5,"offset":354},"end":{"line":14,"column":23,"offset":372},"indent":[]}}],"position":{"start":{"line":14,"column":4,"offset":353},"end":{"line":14,"column":60,"offset":409},"indent":[]}}],"position":{"start":{"line":14,"column":4,"offset":353},"end":{"line":14,"column":60,"offset":409},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":350},"end":{"line":14,"column":60,"offset":409},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"http://www.xyzpub.com/en/ruby-on-rails/3.2/scaffold_anlegen.html","children":[{"type":"text","value":"Scaffolding routes","position":{"start":{"line":15,"column":5,"offset":414},"end":{"line":15,"column":23,"offset":432},"indent":[]}}],"position":{"start":{"line":15,"column":4,"offset":413},"end":{"line":15,"column":90,"offset":499},"indent":[]}}],"position":{"start":{"line":15,"column":4,"offset":413},"end":{"line":15,"column":90,"offset":499},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":410},"end":{"line":15,"column":90,"offset":499},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://thoughtbot.com/blog/back-to-basics-http-requests","children":[{"type":"text","value":"HTTP Requests in Rails Apps","position":{"start":{"line":16,"column":5,"offset":504},"end":{"line":16,"column":32,"offset":531},"indent":[]}}],"position":{"start":{"line":16,"column":4,"offset":503},"end":{"line":16,"column":91,"offset":590},"indent":[]}}],"position":{"start":{"line":16,"column":4,"offset":503},"end":{"line":16,"column":91,"offset":590},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":500},"end":{"line":16,"column":91,"offset":590},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://guides.rubyonrails.org/v5.2/action_controller_overview.html","children":[{"type":"text","value":"Action Controlller Overview","position":{"start":{"line":17,"column":5,"offset":595},"end":{"line":17,"column":32,"offset":622},"indent":[]}}],"position":{"start":{"line":17,"column":4,"offset":594},"end":{"line":17,"column":102,"offset":692},"indent":[]}}],"position":{"start":{"line":17,"column":4,"offset":594},"end":{"line":17,"column":102,"offset":692},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":591},"end":{"line":17,"column":102,"offset":692},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":212},"end":{"line":17,"column":102,"offset":692},"indent":[1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Getting Started","position":{"start":{"line":19,"column":4,"offset":697},"end":{"line":19,"column":19,"offset":712},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":694},"end":{"line":19,"column":19,"offset":712},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Assuming you have Rails installed, run the following:","position":{"start":{"line":21,"column":1,"offset":714},"end":{"line":21,"column":54,"offset":767},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":714},"end":{"line":21,"column":54,"offset":767},"indent":[]}},{"type":"code","lang":"shell","meta":null,"value":"rails new ruby-rails-stripe\ncd ruby-rails-stripe","position":{"start":{"line":23,"column":1,"offset":769},"end":{"line":26,"column":4,"offset":830},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Add the following to the top of your ","position":{"start":{"line":28,"column":1,"offset":832},"end":{"line":28,"column":38,"offset":869},"indent":[]}},{"type":"inlineCode","value":"Gemfile","position":{"start":{"line":28,"column":38,"offset":869},"end":{"line":28,"column":47,"offset":878},"indent":[]}},{"type":"text","value":" for us to read local dotenv values and bundle Stripe.","position":{"start":{"line":28,"column":47,"offset":878},"end":{"line":28,"column":101,"offset":932},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":832},"end":{"line":28,"column":101,"offset":932},"indent":[]}},{"type":"code","lang":"ruby","meta":null,"value":"gem 'dotenv-rails', groups: [:development, :test]\ngem 'stripe'","position":{"start":{"line":30,"column":1,"offset":934},"end":{"line":33,"column":4,"offset":1008},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"On the console, run ","position":{"start":{"line":35,"column":1,"offset":1010},"end":{"line":35,"column":21,"offset":1030},"indent":[]}},{"type":"inlineCode","value":"bundle","position":{"start":{"line":35,"column":21,"offset":1030},"end":{"line":35,"column":29,"offset":1038},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":35,"column":29,"offset":1038},"end":{"line":35,"column":30,"offset":1039},"indent":[]}}],"position":{"start":{"line":35,"column":1,"offset":1010},"end":{"line":35,"column":30,"offset":1039},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Scaffolding the Charges Route","position":{"start":{"line":37,"column":4,"offset":1044},"end":{"line":37,"column":33,"offset":1073},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":1041},"end":{"line":37,"column":33,"offset":1073},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"From the console run:","position":{"start":{"line":39,"column":1,"offset":1075},"end":{"line":39,"column":22,"offset":1096},"indent":[]}}],"position":{"start":{"line":39,"column":1,"offset":1075},"end":{"line":39,"column":22,"offset":1096},"indent":[]}},{"type":"code","lang":"shell","meta":null,"value":"rails generate controller Charges create","position":{"start":{"line":41,"column":1,"offset":1098},"end":{"line":43,"column":4,"offset":1151},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This will scaffold our ","position":{"start":{"line":45,"column":1,"offset":1153},"end":{"line":45,"column":24,"offset":1176},"indent":[]}},{"type":"inlineCode","value":"app/controllers/charges_controller.rb","position":{"start":{"line":45,"column":24,"offset":1176},"end":{"line":45,"column":63,"offset":1215},"indent":[]}},{"type":"text","value":" controller.","position":{"start":{"line":45,"column":63,"offset":1215},"end":{"line":45,"column":75,"offset":1227},"indent":[]}}],"position":{"start":{"line":45,"column":1,"offset":1153},"end":{"line":45,"column":75,"offset":1227},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Inside that, let's update the code:","position":{"start":{"line":47,"column":1,"offset":1229},"end":{"line":47,"column":36,"offset":1264},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":1229},"end":{"line":47,"column":36,"offset":1264},"indent":[]}},{"type":"code","lang":"ruby","meta":null,"value":"require 'stripe'\n\nclass ChargesController < ApplicationController\n  # POST /charge\n  # POST /charge.json\n  def create\n    # `source` is obtained with Stripe.js; see https://stripe.com/docs/payments/accept-a-payment-charges#web-create-token\n    charge = Stripe::Charge.create({\n      amount: params[:amount],\n      currency: 'aud',\n      source: 'tok_amex',\n      receipt_email: params[:receipt_email],\n      description: 'My First Test Charge (created for API docs)',\n    })\n    render json: charge\n  end\nend","position":{"start":{"line":49,"column":1,"offset":1266},"end":{"line":67,"column":4,"offset":1786},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This code will make a charge to Stripe using the JSON body params ","position":{"start":{"line":69,"column":1,"offset":1788},"end":{"line":69,"column":67,"offset":1854},"indent":[]}},{"type":"inlineCode","value":"amount","position":{"start":{"line":69,"column":67,"offset":1854},"end":{"line":69,"column":75,"offset":1862},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":69,"column":75,"offset":1862},"end":{"line":69,"column":80,"offset":1867},"indent":[]}},{"type":"inlineCode","value":"receipt_email","position":{"start":{"line":69,"column":80,"offset":1867},"end":{"line":69,"column":95,"offset":1882},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":69,"column":95,"offset":1882},"end":{"line":69,"column":96,"offset":1883},"indent":[]}}],"position":{"start":{"line":69,"column":1,"offset":1788},"end":{"line":69,"column":96,"offset":1883},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If the charge is successful, it will return the charge information as JSON.","position":{"start":{"line":71,"column":1,"offset":1885},"end":{"line":71,"column":76,"offset":1960},"indent":[]}}],"position":{"start":{"line":71,"column":1,"offset":1885},"end":{"line":71,"column":76,"offset":1960},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Updating config/routes.rb","position":{"start":{"line":73,"column":4,"offset":1965},"end":{"line":73,"column":29,"offset":1990},"indent":[]}}],"position":{"start":{"line":73,"column":1,"offset":1962},"end":{"line":73,"column":29,"offset":1990},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Ensure routes has the following for POST:","position":{"start":{"line":75,"column":1,"offset":1992},"end":{"line":75,"column":42,"offset":2033},"indent":[]}}],"position":{"start":{"line":75,"column":1,"offset":1992},"end":{"line":75,"column":42,"offset":2033},"indent":[]}},{"type":"code","lang":"ruby","meta":null,"value":"Rails.application.routes.draw do\n  # ... the rest is omitted for brevity\n  post 'charges/create'\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\nend","position":{"start":{"line":77,"column":1,"offset":2035},"end":{"line":83,"column":4,"offset":2249},"indent":[1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This ensures that we can send a POST request to ","position":{"start":{"line":85,"column":1,"offset":2251},"end":{"line":85,"column":49,"offset":2299},"indent":[]}},{"type":"inlineCode","value":"http://localhost:PORT/charges/create","position":{"start":{"line":85,"column":49,"offset":2299},"end":{"line":85,"column":87,"offset":2337},"indent":[]}},{"type":"text","value":" when we run the server.","position":{"start":{"line":85,"column":87,"offset":2337},"end":{"line":85,"column":111,"offset":2361},"indent":[]}}],"position":{"start":{"line":85,"column":1,"offset":2251},"end":{"line":85,"column":111,"offset":2361},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Running the code","position":{"start":{"line":87,"column":4,"offset":2366},"end":{"line":87,"column":20,"offset":2382},"indent":[]}}],"position":{"start":{"line":87,"column":1,"offset":2363},"end":{"line":87,"column":20,"offset":2382},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Run ","position":{"start":{"line":89,"column":1,"offset":2384},"end":{"line":89,"column":5,"offset":2388},"indent":[]}},{"type":"inlineCode","value":"rails server","position":{"start":{"line":89,"column":5,"offset":2388},"end":{"line":89,"column":19,"offset":2402},"indent":[]}},{"type":"text","value":" to get our server up and running (defaulting to 3000), then call ","position":{"start":{"line":89,"column":19,"offset":2402},"end":{"line":89,"column":85,"offset":2468},"indent":[]}},{"type":"inlineCode","value":"http POST http://localhost:3000/charges/create amount:=1700 receipt_email=hello_rails@example.com","position":{"start":{"line":89,"column":85,"offset":2468},"end":{"line":89,"column":184,"offset":2567},"indent":[]}},{"type":"text","value":" (using HTTPie) and we will get back our charge results sent as JSON. Hooray!","position":{"start":{"line":89,"column":184,"offset":2567},"end":{"line":89,"column":261,"offset":2644},"indent":[]}}],"position":{"start":{"line":89,"column":1,"offset":2384},"end":{"line":89,"column":261,"offset":2644},"indent":[]}},{"type":"export","value":"export const _frontmatter = {}","position":{"start":{"line":92,"column":1,"offset":2647},"end":{"line":92,"column":31,"offset":2677},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":92,"column":31,"offset":2677}}},"scopeImports":[],"scopeIdentifiers":[],"rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\nimport DefaultLayout from \"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/gatsby-theme-docz/src/base/Layout.js\"\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"rails-stripe-configuration\"\n    }}>{`Rails Stripe Configuration`}</h1>\n    <h2 {...{\n      \"id\": \"references\"\n    }}>{`References`}</h2>\n    <ol>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"https://guides.rubyonrails.org/api_app.html\"\n        }}>{`Using Rails for API only`}</a></li>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"https://github.com/stripe/stripe-ruby\"\n        }}>{`Stripe Ruby Github`}</a></li>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"https://github.com/bkeepers/dotenv\"\n        }}>{`Dotenv Ruby Github`}</a></li>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"http://www.xyzpub.com/en/ruby-on-rails/3.2/scaffold_anlegen.html\"\n        }}>{`Scaffolding routes`}</a></li>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"https://thoughtbot.com/blog/back-to-basics-http-requests\"\n        }}>{`HTTP Requests in Rails Apps`}</a></li>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"https://guides.rubyonrails.org/v5.2/action_controller_overview.html\"\n        }}>{`Action Controlller Overview`}</a></li>\n    </ol>\n    <h2 {...{\n      \"id\": \"getting-started\"\n    }}>{`Getting Started`}</h2>\n    <p>{`Assuming you have Rails installed, run the following:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`rails new ruby-rails-stripe\ncd ruby-rails-stripe\n`}</code></pre>\n    <p>{`Add the following to the top of your `}<inlineCode parentName=\"p\">{`Gemfile`}</inlineCode>{` for us to read local dotenv values and bundle Stripe.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-ruby\"\n      }}>{`gem 'dotenv-rails', groups: [:development, :test]\ngem 'stripe'\n`}</code></pre>\n    <p>{`On the console, run `}<inlineCode parentName=\"p\">{`bundle`}</inlineCode>{`.`}</p>\n    <h2 {...{\n      \"id\": \"scaffolding-the-charges-route\"\n    }}>{`Scaffolding the Charges Route`}</h2>\n    <p>{`From the console run:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`rails generate controller Charges create\n`}</code></pre>\n    <p>{`This will scaffold our `}<inlineCode parentName=\"p\">{`app/controllers/charges_controller.rb`}</inlineCode>{` controller.`}</p>\n    <p>{`Inside that, let's update the code:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-ruby\"\n      }}>{`require 'stripe'\n\nclass ChargesController < ApplicationController\n  # POST /charge\n  # POST /charge.json\n  def create\n    # \\`source\\` is obtained with Stripe.js; see https://stripe.com/docs/payments/accept-a-payment-charges#web-create-token\n    charge = Stripe::Charge.create({\n      amount: params[:amount],\n      currency: 'aud',\n      source: 'tok_amex',\n      receipt_email: params[:receipt_email],\n      description: 'My First Test Charge (created for API docs)',\n    })\n    render json: charge\n  end\nend\n`}</code></pre>\n    <p>{`This code will make a charge to Stripe using the JSON body params `}<inlineCode parentName=\"p\">{`amount`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`receipt_email`}</inlineCode>{`.`}</p>\n    <p>{`If the charge is successful, it will return the charge information as JSON.`}</p>\n    <h2 {...{\n      \"id\": \"updating-configroutesrb\"\n    }}>{`Updating config/routes.rb`}</h2>\n    <p>{`Ensure routes has the following for POST:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-ruby\"\n      }}>{`Rails.application.routes.draw do\n  # ... the rest is omitted for brevity\n  post 'charges/create'\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\nend\n`}</code></pre>\n    <p>{`This ensures that we can send a POST request to `}<inlineCode parentName=\"p\">{`http://localhost:PORT/charges/create`}</inlineCode>{` when we run the server.`}</p>\n    <h2 {...{\n      \"id\": \"running-the-code\"\n    }}>{`Running the code`}</h2>\n    <p>{`Run `}<inlineCode parentName=\"p\">{`rails server`}</inlineCode>{` to get our server up and running (defaulting to 3000), then call `}<inlineCode parentName=\"p\">{`http POST http://localhost:3000/charges/create amount:=1700 receipt_email=hello_rails@example.com`}</inlineCode>{` (using HTTPie) and we will get back our charge results sent as JSON. Hooray!`}</p>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}