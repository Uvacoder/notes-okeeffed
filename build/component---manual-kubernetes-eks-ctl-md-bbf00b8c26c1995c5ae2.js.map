{"version":3,"sources":["webpack:///../manual/Kubernetes/EKS-Ctl.md"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","alt","src","isMDXComponent"],"mappings":"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","file":"component---manual-kubernetes-eks-ctl-md-bbf00b8c26c1995c5ae2.js","sourcesContent":["import React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/gatsby-theme-docz/src/base/Layout.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"eksctl\"\n    }}>{`eksctl`}</h1>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://eksctl.io/\"\n      }}>{`https://eksctl.io/`}</a></p>\n    <h2 {...{\n      \"id\": \"tldr\"\n    }}>{`tl;dr`}</h2>\n    <h3 {...{\n      \"id\": \"clusters\"\n    }}>{`Clusters`}</h3>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Action`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Command`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Get cluster`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`eksctl get cluster [--name=<name>] [--region=<region>]`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Create cluster`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`eksctl create cluster --name=cluster-1 --nodes=4`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Write kubeconfig`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`eksctl utils write-kubeconfig --name=<name> [--kubeconfig=<path>] [--set-kubeconfig-context=<bool>]`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Delete cluster`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`eksctl delete cluster --name=<name> [--region=<region>]`}</inlineCode></td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`eksctl create cluster --name=cluster-3 --nodes=4 --auto-kubeconfig`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Action`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Flag`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Example`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Name the cluster`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`--name`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`eksctl create cluster --name=cluster-3`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Set default node count`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`--nodes`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`eksctl create cluster --nodes=4`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Auto configure kubectl`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`--auto-kubeconfig`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`eksctl create cluster --auto-kubeconfig`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Use an auth scaling group`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`--nodes-min, --nodes-max`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`eksctl create cluster --nodes-min=3 --nodes-max=5`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <h3 {...{\n      \"id\": \"node-groups\"\n    }}>{`Node Groups`}</h3>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Action`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Command`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Get nodegroup`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`eksctl get nodegroup --cluster=<clusterName> [--name=<nodegroupName>]`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Create nodegroup`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`eksctl create nodegroup --cluster=<clusterName> [--name=<nodegroupName>]`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Scale nodegroup`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`eksctl scale nodegroup --cluster=cluster-1 --nodes=5 ng-a345f4e1`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Delete nodegroup`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`eksctl delete nodegroup --cluster=<clusterName> --nodes=<desiredCount> --name=<nodegroupName>`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`SSH Access Flag`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`--ssh-access`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Full ECR Access`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`--full-ecr-access`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Enable autoscaling`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`--asg-access`}</inlineCode></td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`Once clsuter is running, you'll need to add the autoscaler yourself. See `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/kubernetes/autoscaler/blob/master/cluster-autoscaler/cloudprovider/aws/README.md\"\n      }}>{`https://github.com/kubernetes/autoscaler/blob/master/cluster-autoscaler/cloudprovider/aws/README.md`}</a>{`.`}</p>\n    <h3 {...{\n      \"id\": \"creating-a-cluster-using-a-config-file-instead-of-flags\"\n    }}>{`Creating a cluster using a config file instead of flags`}</h3>\n    <p>{`You can create a cluster using a config file instead of flags.`}</p>\n    <p>{`First, create cluster.yaml file:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: eksctl.io/v1alpha3\nkind: ClusterConfig\n\nmetadata:\n  name: basic-cluster\n  region: eu-north-1\n\nnodeGroups:\n  - name: ng-1\n    instanceType: m5.large\n    desiredCapacity: 10\n`}</code></pre>\n    <p>{`Next, run this command:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`eksctl create cluster -f cluster.yaml\n`}</code></pre>\n    <p>{`This will create a cluster as described.`}</p>\n    <p>{`If you needed to use an existing VPC, you can use a config file like this:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: eksctl.io/v1alpha3\nkind: ClusterConfig\n\nmetadata:\n  name: cluster-in-existing-vpc\n  region: eu-north-1\n\nvpc:\n  subnets:\n    private:\n      eu-north-1a: {id: subnet-0ff156e0c4a6d300c}\n      eu-north-1b: {id: subnet-0549cdab573695c03}\n      eu-north-1c: {id: subnet-0426fb4a607393184}\n\nnodeGroups:\n  - name: ng-1-workers\n    labels: {role: workers}\n    instanceType: m5.xlarge\n    desiredCapacity: 10\n    privateNetworking: true\n  - name: ng-2-builders\n    labels: {role: builders}\n    instanceType: m5.2xlarge\n    desiredCapacity: 2\n    privateNetworking: true\n    iam:\n      withAddonPolicies:\n        imageBuilder: true\n`}</code></pre>\n    <p>{`See `}<img alt=\"examples/\" src=\"https://github.com/weaveworks/eksctl/tree/master/examples\" />{` directory for more sample config files.`}</p>\n    <h2 {...{\n      \"id\": \"usage\"\n    }}>{`Usage`}</h2>\n    <p>{`To download the latest release, run:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`curl --silent --location \"https://github.com/weaveworks/eksctl/releases/download/latest_release/eksctl_$(uname -s)_amd64.tar.gz\" | tar xz -C /tmp\nsudo mv /tmp/eksctl /usr/local/bin\n`}</code></pre>\n    <p>{`Alternatively, macOS users can use Homebrew:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`brew install weaveworks/tap/eksctl\n`}</code></pre>\n    <p>{`You will need to have AWS API credentials configured. What works for AWS CLI or any other tools (kops, Terraform etc), should be sufficient. You can use `}<inlineCode parentName=\"p\">{`~/.aws/credentials`}</inlineCode>{` file or environment variables. For more information read AWS documentation.`}</p>\n    <p>{`To create a basic cluster, run:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`eksctl create cluster\n`}</code></pre>\n    <p>{`A cluster will be created with default parameters:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Exciting auto-generated name, e.g. \"fabulous-mushroom-1527688624\"`}</li>\n      <li parentName=\"ul\">{`2x m5.large nodes (this instance type suits most common use-cases, and is good value for money)`}</li>\n      <li parentName=\"ul\">{`Use official AWS EKS AMI`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`us-west-2`}</inlineCode>{` region`}</li>\n      <li parentName=\"ul\">{`Dedicated VPC (check your quotas)`}</li>\n      <li parentName=\"ul\">{`Using static AMI resolver`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"example-output\"\n    }}>{`Example output`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`$ eksctl create cluster\n[ℹ]  using region us-west-2\n[ℹ]  setting availability zones to [us-west-2c us-west-2a us-west-2b]\n[ℹ]  subnets for us-west-2c - public:192.168.0.0/19 private:192.168.96.0/19\n[ℹ]  subnets for us-west-2a - public:192.168.32.0/19 private:192.168.128.0/19\n[ℹ]  subnets for us-west-2b - public:192.168.64.0/19 private:192.168.160.0/19\n[ℹ]  using \"ami-0ce0ec06e682ee10e\" for nodes\n[ℹ]  creating EKS cluster \"floral-unicorn-1540567338\" in \"us-west-2\" region\n[ℹ]  will create 2 separate CloudFormation stacks for cluster itself and the initial nodegroup\n[ℹ]  if you encounter any issues, check CloudFormation console or try 'eksctl utils describe-stacks --region=us-west-2 --name=floral-unicorn-1540567338'\n[ℹ]  creating cluster stack \"eksctl-floral-unicorn-1540567338-cluster\"\n[ℹ]  creating nodegroup stack \"eksctl-floral-unicorn-1540567338-nodegroup-ng-39d54824\"\n[✔]  all EKS cluster resource for \"floral-unicorn-1540567338\" had been created\n[✔]  saved kubeconfig as \"~/.kube/config\"\n[ℹ]  nodegroup \"ng-39d54824\" has 0 nodes\n[ℹ]  waiting for at least 2 nodes to become ready\n[ℹ]  nodegroup \"ng-39d54824\" has 2 nodes\n[ℹ]  node \"ip-192-168-71-20.us-west-2.compute.internal\" is ready\n[ℹ]  node \"ip-192-168-25-215.us-west-2.compute.internal\" is ready\n[ℹ]  kubectl command should work with \"~/.kube/config\", try 'kubectl get nodes'\n[✔]  EKS cluster \"floral-unicorn-1540567338\" in \"us-west-2\" region is ready\n$\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}