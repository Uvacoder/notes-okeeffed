{"version":3,"sources":["webpack:///../manual/Kubernetes/Kubernetes-Admin.md"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","alt","src","isMDXComponent"],"mappings":"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","file":"component---manual-kubernetes-kubernetes-admin-md-44728aa663e1e40938c9.js","sourcesContent":["import React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/gatsby-theme-docz/src/base/Layout.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"4-kubernetes-administration\"\n    }}>{`4. Kubernetes Administration`}</h1>\n    <h2 {...{\n      \"id\": \"resources\"\n    }}>{`Resources`}</h2>\n    <ol>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"https://github.com/etcd-io/etcd/issues/2512\"\n        }}>{`Why etcd is etcd?`}</a></li>\n    </ol>\n    <h2 {...{\n      \"id\": \"administration\"\n    }}>{`Administration`}</h2>\n    <p><img alt=\"Kubernetes Master Overview\" src=\"https://res.cloudinary.com/gitgoodclub/image/upload/v1540175278/Screen_Shot_2018-10-22_at_1.26.57_pm.png\" /></p>\n    <ul>\n      <li parentName=\"ul\">{`When you deploy a new Pod, the information is stored in `}<inlineCode parentName=\"li\">{`etcd`}</inlineCode>{`. (etcd = `}<inlineCode parentName=\"li\">{`/etc`}</inlineCode>{` config folder and `}<inlineCode parentName=\"li\">{`d`}</inlineCode>{` = distributed)`}</li>\n      <li parentName=\"ul\">{`Schedular talks to REST api.`}</li>\n      <li parentName=\"ul\">{`REST api is used to handle tasks.`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`Interfaces with Kubelets on the nodes.`}</li>\n        </ul></li>\n    </ul>\n    <h2 {...{\n      \"id\": \"41-resource-quotas\"\n    }}>{`4.1 Resource Quotas`}</h2>\n    <ul>\n      <li parentName=\"ul\">{`Resource management is useful when giving access to a person or a team.`}</li>\n      <li parentName=\"ul\">{`You don't want one person or team `}<strong parentName=\"li\">{`taking up all the resources`}</strong>{` (e.g. CPU/Memory) of the cluster.`}</li>\n      <li parentName=\"ul\">{`You can divide the cluster into `}<strong parentName=\"li\">{`namespaces`}</strong>{` and enable resource quotas on it.`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`You can do this using the `}<strong parentName=\"li\">{`ResourceQuota`}</strong>{` and `}<strong parentName=\"li\">{`ObjectQuota`}</strong>{` objects.`}</li>\n        </ul></li>\n      <li parentName=\"ul\">{`Each container can specify `}<strong parentName=\"li\">{`request capacity`}</strong>{` and `}<strong parentName=\"li\">{`capacity limits`}</strong>{`.`}<ul parentName=\"li\">\n          <li parentName=\"ul\"><strong parentName=\"li\">{`Request capacity`}</strong>{` is an `}<strong parentName=\"li\">{`explicit request`}</strong>{` for resources.`}<ul parentName=\"li\">\n              <li parentName=\"ul\">{`The scheduler can use the `}<strong parentName=\"li\">{`request capacity`}</strong>{` to make decisions on where to put the pod on.`}</li>\n              <li parentName=\"ul\">{`You can see it as a `}<strong parentName=\"li\">{`minimum amount of resources the pod needs`}</strong>{`.`}</li>\n            </ul></li>\n          <li parentName=\"ul\"><strong parentName=\"li\">{`Resource limit`}</strong>{` is a limit imposed to the container.`}<ul parentName=\"li\">\n              <li parentName=\"ul\">{`Container will not be able to utilize more resources than specified.`}</li>\n            </ul></li>\n        </ul></li>\n    </ul>\n    <h3 {...{\n      \"id\": \"resource-quota-examples\"\n    }}>{`Resource Quota Examples`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`You run a `}<strong parentName=\"li\">{`deployment`}</strong>{` with a `}<strong parentName=\"li\">{`pod`}</strong>{` with a `}<strong parentName=\"li\">{`CPU resource`}</strong>{` request of `}<strong parentName=\"li\">{`200m`}</strong>{`. (200 millicpu/milliocores).`}</li>\n      <li parentName=\"ul\">{`200m = 0.2 = 20% of CPU core of running node.`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`If node has 2 cores, still 20% of a single core.`}</li>\n        </ul></li>\n      <li parentName=\"ul\">{`You can also put a limit eg 400m.`}</li>\n      <li parentName=\"ul\">{`Memory quotes defined in MB or GB.`}</li>\n      <li parentName=\"ul\">{`Each pod needs the capacity quota defined during creation.`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`Admin can specify default request values for pods that don't specify any values for capacity.`}</li>\n          <li parentName=\"ul\">{`The same is valid for limit quotas.`}</li>\n        </ul></li>\n      <li parentName=\"ul\">{`If resource is requested more than the allowed capacity, the server API will give an error 403 FORBIDDEN and `}<inlineCode parentName=\"li\">{`kubectl`}</inlineCode>{` will show an error.`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"resource-quote-options\"\n    }}>{`Resource Quote options`}</h3>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Resource`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`requests.cpu`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Sum of CPU reqs of all pos cannot exceed this value`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`requests.mem`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Sum of MEM reqs of all pods cannot exceed this value`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`requests.storage`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Sum of storage reqs of all persistent volume claims cannot exceed this value`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`limits.cpu`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Sum of CPU limits of all pods cannot exceed this value`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`limits.memory`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Sum of MEM limits of all pods cannot exceed this value`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`You can also set limits on:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`configmaps`}</li>\n      <li parentName=\"ul\">{`persistentvolumeclaims`}</li>\n      <li parentName=\"ul\">{`pods`}</li>\n      <li parentName=\"ul\">{`replicationcontrollers`}</li>\n      <li parentName=\"ul\">{`resourcequotas`}</li>\n      <li parentName=\"ul\">{`services`}</li>\n      <li parentName=\"ul\">{`services.loadbalancer`}</li>\n      <li parentName=\"ul\">{`services.nodeports`}</li>\n      <li parentName=\"ul\">{`secrets`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"42-namespaces\"\n    }}>{`4.2 Namespaces`}</h2>\n    <p>{`Namespaces allow you to create `}<strong parentName=\"p\">{`virtual clusters`}</strong>{` within the same physical cluster.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Namespaces `}<strong parentName=\"li\">{`logically separates`}</strong>{` your cluster.`}</li>\n      <li parentName=\"ul\">{`The standard namespace is called `}<strong parentName=\"li\">{`\"default\"`}</strong>{` and that's where all the resources are launched by default.`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`There is also `}<strong parentName=\"li\">{`kube-system`}</strong>{` - a namespace for kubernetes specific resources.`}</li>\n        </ul></li>\n      <li parentName=\"ul\">{`Namespaces are intended when you have `}<strong parentName=\"li\">{`multiple teams/projects`}</strong>{` using the Kubernetes cluster.`}</li>\n      <li parentName=\"ul\">{`Resource names within namespace must be unique.`}</li>\n      <li parentName=\"ul\">{`You can divide resources of a Kubernetes cluster using namespaces.`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`You can limit resources on a per namespace basis.`}</li>\n          <li parentName=\"ul\">{`E.g. Marketing team can only use a maximum of 10GiB of memory, 2 loadbalancers, 2 CPU cores.`}</li>\n        </ul></li>\n    </ul>\n    <h3 {...{\n      \"id\": \"namespace-commands\"\n    }}>{`Namespace commands`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`$ kubectl create namespace myspace # create namespace myspace\n$ kubectl get namespaces # list all namespaces\n# Set default namespace to launch resources in\n$ export CONTEXT=$(kubectl config view | awk '/current-context/{print $2}')\n$ kubectl config set-context $CONTEXT --namespace=myspace\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: 1\nkind: ResourceQuota\nmetadata:\n  name: objects-counts\nnamespace: myspace\nspec:\n  hard:\n    configmaps: '10'\npersistentvolumesclaim: '4'\nreplicationcontrollers: '20'\nsecrets: '10'\nservices: '10'\nservices.loadbalancers: '2'\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"demo-resourcequotas\"\n    }}>{`Demo ResourceQuotas`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`# resourcequota.yml\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: myspace\n---\napiVersion: v1\nkind: ResourceQuota\nmetadata:\n  name: compute-quota\n  namespace: myspace\nspec:\n  hard:\n    requests.cpu: '1'\n    requests.memory: 1Gi\n    limits.cpu: '2'\n    limits.memory: 2Gi\n---\napiVersion: v1\nkind: ResourceQuota\nmetadata:\n  name: object-quota\n  namespace: myspace\nspec:\n  hard:\n    configmaps: '10'\n    persistentvolumeclaims: '4'\n    replicationcontrollers: '20'\n    secrets: '10'\n    services: '10'\n    services.loadbalancers: '2'\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`# helloworld-with-quotas.yaml\napiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  name: helloworld-deployment\n  namespace: myspace\nspec:\n  replicas: 3\n  template:\n    metadata:\n      labels:\n        app: helloworld\n    spec:\n      containers:\n        - name: k8s-demo\n          image: wardviaene/k8s-demo\n          ports:\n            - name: nodejs-port\n              containerPort: 3000\n          resources:\n            requests:\n              cpu: 200m\n              memory: 0.5Gi\n            limits:\n              cpu: 400m\n              memory: 1Gi\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`# helloworld-no-quotas.yaml\napiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  name: helloworld-deployment\n  namespace: myspace\nspec:\n  replicas: 3\n  template:\n    metadata:\n      labels:\n        app: helloworld\n    spec:\n      containers:\n        - name: k8s-demo\n          image: wardviaene/k8s-demo\n          ports:\n            - name: nodejs-port\n              containerPort: 3000\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`# default.yaml\napiVersion: v1\nkind: LimitRange\nmetadata:\n  name: limits\n  namespace: myspace\nspec:\n  limits:\n    - default:\n        cpu: 200m\n        memory: 512Mi\n      defaultRequest:\n        cpu: 100m\n        memory: 256Mi\n      type: Container\n`}</code></pre>\n    <p>{`The following commands can be used to get check resources:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`$ kubectl get <% pod_name %> --namespace=myspace\n$ kubectl describe <% pod_name %> --namespace=myspace\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"43-user-management\"\n    }}>{`4.3 User Management`}</h2>\n    <p>{`There are two user types:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Normal user (used to access the cluster externally) ie through kubctl.`}</li>\n      <li parentName=\"ol\">{`Service user (which is managed by an object in Kubernetes).`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`Used to authenticate within the cluster ie from inside pod of kubelet.`}</li>\n          <li parentName=\"ul\">{`These creds are managed like `}<strong parentName=\"li\">{`secrets`}</strong>{`.`}</li>\n        </ul></li>\n    </ol>\n    <h3 {...{\n      \"id\": \"normal-users\"\n    }}>{`Normal Users`}</h3>\n    <p>{`Auth strategies include:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Client certificates`}</li>\n      <li parentName=\"ul\">{`Bearer Tokens`}</li>\n      <li parentName=\"ul\">{`Authentication Proxy`}</li>\n      <li parentName=\"ul\">{`HTTP Basic Authentication`}</li>\n      <li parentName=\"ul\">{`OpenID`}</li>\n      <li parentName=\"ul\">{`Webhooks`}</li>\n    </ul>\n    <p>{`They have the following attributes:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Username (e.g. user123 or email@email.com)`}</li>\n      <li parentName=\"ul\">{`A UID`}</li>\n      <li parentName=\"ul\">{`Groups`}</li>\n      <li parentName=\"ul\">{`Extra fields to store extra info`}</li>\n    </ul>\n    <p>{`After a normal user authenticates, it was hav access to everything.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`To limit, you need to configure auth.`}</li>\n      <li parentName=\"ul\">{`There are multiple offerings:`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`AlwaysAllow / AlwaysDeny`}</li>\n          <li parentName=\"ul\">{`ABAC (Attribute-Based Access Control)`}</li>\n          <li parentName=\"ul\">{`RBAC (Role Based Access Control)`}</li>\n          <li parentName=\"ul\">{`Webhook (auth by remote service)`}</li>\n        </ul></li>\n    </ul>\n    <h3 {...{\n      \"id\": \"service-users\"\n    }}>{`Service Users`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`Service Users are using `}<strong parentName=\"li\">{`Service Account Tokens`}</strong>{`.`}</li>\n      <li parentName=\"ul\">{`They are stored as `}<strong parentName=\"li\">{`credentials using Secrets`}</strong>{`.`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`Those Secrets are also mounted in pods to allow communication between the services.`}</li>\n        </ul></li>\n      <li parentName=\"ul\">{`Service Users are `}<strong parentName=\"li\">{`specific to a namespace`}</strong>{`.`}</li>\n      <li parentName=\"ul\">{`They are created automatically by the API or manually using `}<strong parentName=\"li\">{`objects`}</strong>{`.`}</li>\n      <li parentName=\"ul\">{`Any API call `}<strong parentName=\"li\">{`not authenticated`}</strong>{` is considered as an `}<strong parentName=\"li\">{`anonymous`}</strong>{` user.`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"other-notes-on-user-management\"\n    }}>{`Other notes on User Management`}</h3>\n    <p>{`Auth is still a work in progress. The demo itself shows the creation of a asymmetric key and updating Minikube to allow that as the user.`}</p>\n    <h2 {...{\n      \"id\": \"44-rbac-role-based-access-control\"\n    }}>{`4.4 RBAC (Role Based Access Control)`}</h2>\n    <ul>\n      <li parentName=\"ul\">{`Regulates access using `}<strong parentName=\"li\">{`roles`}</strong>{`.`}</li>\n      <li parentName=\"ul\">{`Allows admins to dynamically configure permission policies.`}</li>\n      <li parentName=\"ul\">{`This is what I'll use in the demo.`}</li>\n    </ul>\n    <p>{`You add RBAC resources with `}<inlineCode parentName=\"p\">{`kubectl`}</inlineCode>{` from a yaml format file.`}</p>\n    <p>{`First, define a role, then assign users/groups to that role.`}</p>\n    <p>{`You can create roles limited to a namespace or that applies across all namespaces.`}</p>\n    <ul>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`Role`}</strong>{` (single namespace) and `}<strong parentName=\"li\">{`ClusterRole`}</strong>{` (cluster-wide).`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`RoleBinding`}</strong>{` (single namespace) and `}<strong parentName=\"li\">{`ClusterRoleBinding`}</strong>{` (cluster-wide).`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"45-networking\"\n    }}>{`4.5 Networking`}</h2>\n    <p>{`Communication topics already covered:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Container to container: communication within a pod.`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`Through `}<strong parentName=\"li\">{`localhost`}</strong>{` and the `}<strong parentName=\"li\">{`port number`}</strong>{`.`}</li>\n        </ul></li>\n      <li parentName=\"ul\">{`Pod-To-Service comms`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`Using `}<strong parentName=\"li\">{`NodePort`}</strong>{` and `}<strong parentName=\"li\">{`DNS`}</strong>{`.`}</li>\n        </ul></li>\n      <li parentName=\"ul\">{`External-To-Service`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`Using `}<strong parentName=\"li\">{`LoadBalancer`}</strong>{`, `}<strong parentName=\"li\">{`NodePort`}</strong>{`.`}</li>\n        </ul></li>\n    </ul>\n    <h3 {...{\n      \"id\": \"pods\"\n    }}>{`Pods`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`The pod should always be routable.`}</li>\n      <li parentName=\"ul\">{`Kubernetes assumes that pods should be able to communicate to other pods, regardless of which node they are running.`}</li>\n      <li parentName=\"ul\">{`Kubernetes assumes that pods should be able to communicate to other pods, regardless of which node they are running.`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`Every pod has its `}<strong parentName=\"li\">{`own IP address`}</strong>{`.`}</li>\n          <li parentName=\"ul\">{`Pods on different nodes need to be able to communicate to each other using those IP addresses.`}<ul parentName=\"li\">\n              <li parentName=\"ul\">{`This is implemented differently depending on your networking setup.`}</li>\n              <li parentName=\"ul\">{`On AWS: kubenet networking (kops default).`}</li>\n            </ul></li>\n        </ul></li>\n    </ul>\n    <h3 {...{\n      \"id\": \"kubenet-networking\"\n    }}>{`Kubenet Networking`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`Every pod can get an IP that is `}<strong parentName=\"li\">{`routable`}</strong>{` using the AWS Virtual Private Network (VPC).`}</li>\n      <li parentName=\"ul\">{`The kubernetes master allocates a /24 subnet to each node (254 IP addresses).`}</li>\n      <li parentName=\"ul\">{`The subnet is added to the VPCs route table.`}</li>\n      <li parentName=\"ul\">{`There is a limit of `}<strong parentName=\"li\">{`50 entries`}</strong>{`, which means you can't have more than 50 nodes in a single AWS cluster.`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"vpc-alternatives\"\n    }}>{`VPC Alternatives`}</h3>\n    <p>{`Not every cloud provider has VPC-tech (GCE and Azure do).`}</p>\n    <p>{`The alternatives for things like on-prem etc are:`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Container Network Interface (CNI)`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">\n            <p parentName=\"li\">{`Software that provides libraries/plugins for network interfaces within containers.`}</p>\n          </li>\n          <li parentName=\"ul\">\n            <p parentName=\"li\">{`Popular solutions are `}<strong parentName=\"p\">{`Calico, Weave`}</strong>{` (standalone or with CNI).`}</p>\n          </li>\n        </ul>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`An Overlay Network`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><strong parentName=\"li\">{`Flannel`}</strong>{` is an easy and popular way.`}</li>\n        </ul>\n      </li>\n    </ol>\n    <h2 {...{\n      \"id\": \"46-node-maintenance\"\n    }}>{`4.6 Node Maintenance`}</h2>\n    <p>{`It is the `}<strong parentName=\"p\">{`Node Controller`}</strong>{` that is responsible for managing the Node object.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`It assigns `}<strong parentName=\"li\">{`IP Space`}</strong>{` to the node when a new node is launched.`}</li>\n      <li parentName=\"ul\">{`It keeps the `}<strong parentName=\"li\">{`node list`}</strong>{` up to date with the available machines.`}</li>\n      <li parentName=\"ul\">{`The node controller is also monitoring the `}<strong parentName=\"li\">{`health of the node`}</strong>{`.`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`If a node is `}<strong parentName=\"li\">{`unhealthy it gets deleted`}</strong>{`.`}</li>\n          <li parentName=\"ul\">{`Pods running on the unhealthy node will then get `}<strong parentName=\"li\">{`rescheduled`}</strong>{`.`}</li>\n        </ul></li>\n    </ul>\n    <h3 {...{\n      \"id\": \"adding-a-new-node\"\n    }}>{`Adding a new node`}</h3>\n    <p>{`When adding a new node, the `}<strong parentName=\"p\">{`kubelet`}</strong>{` will attempt to register itself. This is called `}<strong parentName=\"p\">{`self-registration`}</strong>{` and is the default behaviour.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`It allows you to `}<strong parentName=\"li\">{`easily add more nodes`}</strong>{` to the cluster without making API changes yourself.`}</li>\n      <li parentName=\"ul\">{`A new node object is `}<strong parentName=\"li\">{`automatically`}</strong>{` created with:`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`The metadata (with a name: IP or hostname).`}</li>\n          <li parentName=\"ul\">{`Labels (e.g. cloud region / availability zone / instance size).`}</li>\n        </ul></li>\n      <li parentName=\"ul\">{`Has `}<strong parentName=\"li\">{`node condition`}</strong>{` (e.g. Ready, OutOfDisk).`}</li>\n      <li parentName=\"ul\">{`When you want to `}<strong parentName=\"li\">{`decomission`}</strong>{` a node, you want to do it gracefully.`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`Drain a node before you shut it down or take it out of the cluster.`}</li>\n        </ul></li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`# drain a node\n$ kubectl drain nodename --grace-period=600\n\n# if node runs pods not managed by a controller but just a single pod\n$ kubectl drain nodename --force\n`}</code></pre>\n    <p><img alt=\"Terminal draining\" src=\"https://res.cloudinary.com/gitgoodclub/image/upload/v1540183374/Screen_Shot_2018-10-22_at_3.42.29_pm.png\" /></p>\n    <h2 {...{\n      \"id\": \"47-high-availability\"\n    }}>{`4.7 High Availability`}</h2>\n    <p>{`If you are running in prod, you willwant all master services in `}<strong parentName=\"p\">{`high availability`}</strong>{`.`}</p>\n    <h3 {...{\n      \"id\": \"setup\"\n    }}>{`Setup`}</h3>\n    <ol>\n      <li parentName=\"ol\"><strong parentName=\"li\">{`Clustering etcd:`}</strong>{` at least run 3 etcd nodes.`}</li>\n      <li parentName=\"ol\"><strong parentName=\"li\">{`Replicated API servers:`}</strong>{` with a a LoadBalancer`}</li>\n      <li parentName=\"ol\">{`Running multiple instances of the `}<strong parentName=\"li\">{`scheduler`}</strong>{` and the `}<strong parentName=\"li\">{`controllers`}</strong>{`.`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`only one of them will be the leader, the others are on stand-by.`}</li>\n        </ul></li>\n    </ol>\n    <p><img alt=\"HA Overview\" src=\"https://res.cloudinary.com/gitgoodclub/image/upload/v1540183580/Screen_Shot_2018-10-22_at_3.46.05_pm.png\" /></p>\n    <p><img alt=\"HA diagram\" src=\"https://res.cloudinary.com/gitgoodclub/image/upload/v1540183671/Screen_Shot_2018-10-22_at_3.46.52_pm.png\" /></p>\n    <h3 {...{\n      \"id\": \"kops-with-multiple-masters-for-ha\"\n    }}>{`Kops with multiple masters for HA`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`kops create cluster --name=... --zones=eu-west-1a,eu-west-1b,eu-west-1c --master-zones=eu-west-1a,eu-west-1b,eu-west-1c\n`}</code></pre>\n    <p>{`This becomes more complex for volumes since EBS volumes are based within zones.`}</p>\n    <h2 {...{\n      \"id\": \"48-tls-on-elb-using-annotations\"\n    }}>{`4.8 TLS on ELB using Annotations`}</h2>\n    <p>{`You can setup `}<strong parentName=\"p\">{`cloud specific features`}</strong>{` (like TLS termination) on AWS LoadBalancers that you create in Kubernetes using services of type LoadBalancer.`}</p>\n    <p>{`You can do this using `}<strong parentName=\"p\">{`annotations`}</strong>{` to pass some flags for cloud configuration eg aws-load-balancer-ssl-cert, aws-load-balancer-backend-protocol etc.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`# helloworld-elb-tls-service.yaml\napiVersion: v1\nkind: Service\nmetadata:\n  name: helloworld-service\n  annotations:\n    service.beta.kubernetes.io/aws-load-balancer-ssl-cert: 'arn:aws:acm:region:accountid:certificate/...' #replace this value\n    service.beta.kubernetes.io/aws-load-balancer-backend-protocol: 'http'\n    service.beta.kubernetes.io/aws-load-balancer-ssl-ports: '443'\n    service.beta.kubernetes.io/aws-load-balancer-connection-draining-enabled: 'true'\n    service.beta.kubernetes.io/aws-load-balancer-connection-draining-timeout: '60'\n    service.beta.kubernetes.io/aws-load-balancer-additional-resource-tags: 'environment=dev,app=helloworld'\nspec:\n  ports:\n    - name: http\n      port: 80\n      targetPort: nodejs-port\n      protocol: TCP\n    - name: https\n      port: 443\n      targetPort: nodejs-port\n      protocol: TCP\n  selector:\n    app: helloworld\n  type: LoadBalancer\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}