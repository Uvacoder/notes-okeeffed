{"version":3,"sources":["webpack:///../manual/Kubernetes/EKS-Deploy-Stateful-EFS-App.md"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","alt","src","isMDXComponent"],"mappings":"sfAMO,IAAMA,EAAe,Q,kOAE5B,IAKMC,EAAc,CAClBD,gBAEIE,EAAYC,IACH,SAASC,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGC,E,oIACF,mBACD,OAAO,YAACJ,EAAD,KAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,cAG5E,iBAAQ,CACN,GAAM,oCADR,oCAGA,iBAAQ,CACN,GAAM,eADR,gBAGA,sBACE,kBAAIC,WAAW,MAAf,gDACA,kBAAIA,WAAW,MAAf,6CACA,kBAAIA,WAAW,MAAf,gEAEF,qBAAG,mBAAKC,IAAI,iBAAiBC,IAAI,yHACjC,iBAAQ,CACN,GAAM,sBADR,sBAGA,8HACA,wGACA,iBAAQ,CACN,GAAM,gBADR,gBAGA,0JACA,qBAAG,sBAAQF,WAAW,KAAnB,yHACH,sGACA,oDAAmC,0BAAYA,WAAW,KAAvB,YAAnC,QAAgG,0BAAYA,WAAW,KAAvB,kBAAhG,KACA,yEAAwD,0BAAYA,WAAW,KAAvB,oBAAxD,mCACA,sCAAqB,0BAAYA,WAAW,KAAvB,uFAArB,KACA,iBAAQ,CACN,GAAM,+CADR,+CAGA,qBAAG,mBAAKC,IAAI,SAASC,IAAI,yHACzB,+BACA,sBACE,kBAAIF,WAAW,MAAf,qBACA,kBAAIA,WAAW,MAAf,2BACA,kBAAIA,WAAW,MAAf,0BACA,kBAAIA,WAAW,MAAf,uBACA,kBAAIA,WAAW,MAAf,0C,yNAMNJ,EAAWO,gBAAiB","file":"component---manual-kubernetes-eks-deploy-stateful-efs-app-md-c57ced0e70764991c512.js","sourcesContent":["import React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/gatsby-theme-docz/src/base/Layout.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"deploy-stateful-efs-app-with-eks\"\n    }}>{`Deploy Stateful EFS App with EKS`}</h1>\n    <h2 {...{\n      \"id\": \"what-is-efs\"\n    }}>{`What is EFS?`}</h2>\n    <ul>\n      <li parentName=\"ul\">{`Managed NFS that can be mounted on many EC2.`}</li>\n      <li parentName=\"ul\">{`EFS works with EC2 instances in multi-AZ.`}</li>\n      <li parentName=\"ul\">{`Highly available, scalable, expensive (3xgp2), pay per use.`}</li>\n    </ul>\n    <p><img alt=\"Under the hood\" src=\"https://res.cloudinary.com/gitgoodclub/image/upload/v1548299128/eks-course/Screen_Shot_2019-01-24_at_2.05.15_pm.png\" /></p>\n    <h2 {...{\n      \"id\": \"efs-for-kubernetes\"\n    }}>{`EFS for Kubernetes`}</h2>\n    <p>{`Using EFS, our Wordpress Pods can now be launched into any AZ, and therefore on any K8s worker nodes.`}</p>\n    <p>{`They will all access the same underlying HTML folder (therefore sharing state).`}</p>\n    <h2 {...{\n      \"id\": \"enabling-efs\"\n    }}>{`Enabling EFS`}</h2>\n    <p>{`Heading to the AWS console. Head to the EFS page and create EFS. By default, it will try attach it to whateever VPC is available.`}</p>\n    <p><strong parentName=\"p\">{`Ensure that you attach the correct node worker security groups that we are using for Kubernetes and not the default.`}</strong></p>\n    <p>{`After adding, feel free to add a name tag but then accept the other defaults.`}</p>\n    <p>{`Ensure you take note of the `}<inlineCode parentName=\"p\">{`DNS name`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`File System ID`}</inlineCode>{`.`}</p>\n    <p>{`To be able to enable the EFS, we need to install `}<inlineCode parentName=\"p\">{`amazon-efs-utils`}</inlineCode>{` onto each of the worker nodes.`}</p>\n    <p>{`Example being `}<inlineCode parentName=\"p\">{`ssh -i .ssh/path/to/key.pem ec2-user@REDACTED \"sudo yum install -y amazon-efs-utils`}</inlineCode>{`.`}</p>\n    <h2 {...{\n      \"id\": \"creating-the-namespace-and-prepping-storage\"\n    }}>{`Creating the namespace and prepping storage`}</h2>\n    <p><img alt=\"Layout\" src=\"https://res.cloudinary.com/gitgoodclub/image/upload/v1548300383/eks-course/Screen_Shot_2019-01-24_at_2.26.08_pm.png\" /></p>\n    <p>{`Steps:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Create namespaces`}</li>\n      <li parentName=\"ol\">{`Create RBAC permissions`}</li>\n      <li parentName=\"ol\">{`Create EFS provisioner`}</li>\n      <li parentName=\"ol\">{`Create storageclass`}</li>\n      <li parentName=\"ol\">{`Create PVC's for MySQL and WordPress`}</li>\n    </ol>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}