{"version":3,"sources":["webpack:///../manual/Chef/Chef-Learning-Dev-Ops-Deployment.md"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"mfAMO,IAAMA,EAAe,Q,iOAE5B,IAKMC,EAAc,CAClBD,gBAEIE,EAAYC,IACH,SAASC,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGC,E,oIACF,mBACD,OAAO,YAACJ,EAAD,KAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,cAG5E,iBAAQ,CACN,GAAM,mCADR,mCAMA,sBACE,kBAAIC,WAAW,MAAK,mBAAGA,WAAW,MAAS,CACvC,KAAQ,qCADQ,mCAEwB,kBAAIA,WAAW,MACvD,kBAAIA,WAAW,MAAK,mBAAGA,WAAW,MAAS,CACvC,KAAQ,oCADQ,mCAEwB,kBAAIA,WAAW,MACvD,kBAAIA,WAAW,MAAK,mBAAGA,WAAW,MAAS,CACvC,KAAQ,+DADQ,kEAGpB,kBAAIA,WAAW,MAAK,mBAAGA,WAAW,MAAS,CACvC,KAAQ,wDADQ,2DAGpB,kBAAIA,WAAW,MAAK,mBAAGA,WAAW,MAAS,CACvC,KAAQ,6BADQ,+BAGpB,kBAAIA,WAAW,MAAK,mBAAGA,WAAW,MAAS,CACvC,KAAQ,wCADQ,yCAGpB,kBAAIA,WAAW,MAAK,mBAAGA,WAAW,MAAS,CACvC,KAAQ,4BADQ,+BAIxB,kBAAIA,WAAW,MAAK,mBAAGA,WAAW,MAAS,CACvC,KAAQ,+CADQ,+CAGpB,kBAAIA,WAAW,MAAK,mBAAGA,WAAW,MAAS,CACvC,KAAQ,sCADQ,sCAGpB,kBAAIA,WAAW,MAAK,mBAAGA,WAAW,MAAS,CACvC,KAAQ,yBADQ,yBAGpB,kBAAIA,WAAW,MAAK,mBAAGA,WAAW,MAAS,CACvC,KAAQ,iCADQ,iCAGpB,kBAAIA,WAAW,MAAK,mBAAGA,WAAW,MAAS,CACvC,KAAQ,qBADQ,qBAGpB,kBAAIA,WAAW,MAAK,mBAAGA,WAAW,MAAS,CACvC,KAAQ,8BADQ,8BAGpB,kBAAIA,WAAW,MAAK,mBAAGA,WAAW,MAAS,CACvC,KAAQ,6CADQ,6CAGpB,kBAAIA,WAAW,MAAK,mBAAGA,WAAW,MAAS,CACvC,KAAQ,4CADQ,+CAQ1B,iBAAQ,CACN,GAAM,kCADR,mCAGA,qBAAG,sBAAQA,WAAW,KAAnB,gCACH,sBACE,kBAAIA,WAAW,MAAf,8BACA,kBAAIA,WAAW,MAAf,yDACA,kBAAIA,WAAW,MAAf,+CACA,kBAAIA,WAAW,MAAf,kDACA,kBAAIA,WAAW,MAAf,iCACA,kBAAIA,WAAW,MAAf,+DAEF,oDACA,iJACA,qEACA,sIACA,iBAAQ,CACN,GAAM,6DADR,iEAGA,8KACA,4GACA,oCACA,uBAAK,sBAAMA,WAAW,OAAU,IAA3B,6CAIL,6CAA4B,0BAAYA,WAAW,KAAvB,mBAA5B,wCAAgI,0BAAYA,WAAW,KAAvB,uBAAhI,4CACA,wFACA,qBAAG,sBAAQA,WAAW,KAAnB,SACH,mKACA,sIACA,qBAAG,sBAAQA,WAAW,KAAnB,iBACH,uFACA,kGACA,4CAA2B,0BAAYA,WAAW,KAAvB,SAA3B,KACA,gIACA,uFACA,uBAAK,sBAAMA,WAAW,OAAU,IAA3B,6DAEL,+EACA,kEACA,iGACA,mCAAkB,0BAAYA,WAAW,KAAvB,SAAlB,kDACA,4BAAW,0BAAYA,WAAW,KAAvB,0EACX,uBAAK,sBAAMA,WAAW,OAAU,IAA3B,6IAEL,6GACA,iIACA,2LACA,6DAA4C,0BAAYA,WAAW,KAAvB,eAA5C,iEACA,qBAAG,sBAAQA,WAAW,KAAnB,yBACH,uBAAK,sBAAMA,WAAW,OAAU,IAA3B,iCAEL,yEAAwD,0BAAYA,WAAW,KAAvB,QAAxD,oFACA,qBAAG,0BAAYA,WAAW,KAAvB,cAAH,yBAAmF,0BAAYA,WAAW,KAAvB,cAAnF,yBACA,kGACA,qBAAG,sBAAQA,WAAW,KAAnB,0BACH,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,kBADZ,wJAUL,qCAAoB,0BAAYA,WAAW,KAAvB,WAApB,SAAiF,0BAAYA,WAAW,KAAvB,aAAjF,sBAA6J,0BAAYA,WAAW,KAAvB,WAA7J,eACA,qBAAG,0BAAYA,WAAW,KAAvB,kBACH,qBAAG,sBAAQA,WAAW,KAAnB,kCACH,uBAAK,sBAAMA,WAAW,OAAU,IAA3B,uKAML,oCAAmB,0BAAYA,WAAW,KAAvB,cAAnB,sBAAgG,0BAAYA,WAAW,KAAvB,cAAhG,2EACA,qBAAG,sBAAQA,WAAW,KAAnB,6BACH,uBAAK,sBAAMA,WAAW,OAAU,IAA3B,2CAEL,0IACA,uBAAK,sBAAMA,WAAW,OAAU,IAA3B,iCAEL,+KACA,oEACA,uBAAK,sBAAMA,WAAW,OAAU,IAA3B,yDAEL,mEAAkD,0BAAYA,WAAW,KAAvB,QAAlD,wIACA,uCAAsB,0BAAYA,WAAW,KAAvB,eAAtB,iFAA+J,0BAAYA,WAAW,KAAvB,QAA/J,mCAAmP,0BAAYA,WAAW,KAAvB,QAAnP,0DACA,sCAAqB,0BAAYA,WAAW,KAAvB,aAArB,4IACA,iBAAQ,CACN,GAAM,sDADR,0DAGA,+GACA,wIACA,gHACA,6JACA,wQACA,mFACA,0IACA,mKACA,4GACA,yEACA,iBAAQ,CACN,GAAM,2BADR,8BAGA,6DACA,4GACA,wGACA,wJAAuI,0BAAYA,WAAW,KAAvB,QAAvI,6HACA,qBAAG,sBAAQA,WAAW,KAAnB,kBACH,wKACA,gGACA,iNACA,qJACA,8DACA,uBAAK,sBAAMA,WAAW,OAAU,IAA3B,4HASL,4FACA,iBAAQ,CACN,GAAM,sCADR,wCAGA,uEACA,qBAAG,sBAAQA,WAAW,KAAnB,YACH,8MACA,sDAAqC,0BAAYA,WAAW,KAAvB,YAArC,kEAA4J,0BAAYA,WAAW,KAAvB,uBAA5J,aACA,qBAAG,sBAAQA,WAAW,KAAnB,aACH,iHACA,oJACA,4HACA,qBAAG,sBAAQA,WAAW,KAAnB,gBACH,qGACA,+KACA,qBAAG,sBAAQA,WAAW,KAAnB,gBACH,iIACA,kFACA,qBAAG,sBAAQA,WAAW,KAAnB,wBACH,oIACA,4HACA,qBAAG,sBAAQA,WAAW,KAAnB,cACH,8EACA,uHACA,qBAAG,sBAAQA,WAAW,KAAnB,aACH,wIACA,kIACA,qBAAG,sBAAQA,WAAW,KAAnB,eACH,qOACA,qBAAG,sBAAQA,WAAW,KAAnB,cACH,uGACA,kFACA,qBAAG,sBAAQA,WAAW,KAAnB,gBACH,wHACA,mLACA,qBAAG,sBAAQA,WAAW,KAAnB,gBACH,mIACA,qMACA,qBAAG,sBAAQA,WAAW,KAAnB,UACH,mHACA,qBAAG,sBAAQA,WAAW,KAAnB,cACH,iGACA,qBAAG,sBAAQA,WAAW,KAAnB,SACH,mJACA,qBAAG,kBAAIA,WAAW,KAAf,oEACH,qBAAG,sBAAQA,WAAW,KAAnB,gBACH,mGACA,qBAAG,sBAAQA,WAAW,KAAnB,cACH,oNACA,qBAAG,sBAAQA,WAAW,KAAnB,iBACH,gIACA,oIACA,qBAAG,sBAAQA,WAAW,KAAnB,iBACH,yGAAwF,kBAAIA,WAAW,KAAf,aACxF,4EACA,qBAAG,sBAAQA,WAAW,KAAnB,gBACH,2HACA,+HACA,iBAAQ,CACN,GAAM,0BADR,4BAGA,qBAAG,sBAAQA,WAAW,KAAnB,6BACH,sBACE,kBAAIA,WAAW,MAAf,2BAEF,sBACE,kBAAIA,WAAW,MAAf,wBACA,kBAAIA,WAAW,MAAf,4JAEF,2JACA,oEACA,iBAAQ,CACN,MAAS,GAET,kBAAIA,WAAW,MAAf,oCAEF,sBACE,kBAAIA,WAAW,MAAf,sBACA,kBAAIA,WAAW,MAAf,2BACA,kBAAIA,WAAW,MAAf,oBACA,kBAAIA,WAAW,MAAf,kCAEF,kGACA,iBAAQ,CACN,MAAS,GAET,kBAAIA,WAAW,MAAf,wCAEF,sBACE,kBAAIA,WAAW,MAAf,sBACA,kBAAIA,WAAW,MAAf,2BACA,kBAAIA,WAAW,MAAf,0CACA,kBAAIA,WAAW,MAAf,qBAEF,qFACA,qBAAG,sBAAQA,WAAW,KAAnB,oBACH,sBACE,kBAAIA,WAAW,MAAf,4dACA,kBAAIA,WAAW,MAAf,qGACA,kBAAIA,WAAW,MAAf,iHACA,kBAAIA,WAAW,MAAf,+FAEF,qBAAG,sBAAQA,WAAW,KAAnB,uBACH,sBACE,kBAAIA,WAAW,MAAf,yDACA,kBAAIA,WAAW,MAAf,wCACA,kBAAIA,WAAW,MAAf,oCACA,kBAAIA,WAAW,MAAf,oGACA,kBAAIA,WAAW,MAAf,oFAEF,6KACA,8HACA,sFACA,qBAAG,sBAAQA,WAAW,KAAnB,YACH,sQACA,iIAAgH,0BAAYA,WAAW,KAAvB,SAAhH,kCACA,qJACA,oHACA,iBAAQ,CACN,GAAM,6CADR,8CAGA,iBAAQ,CACN,GAAM,oCADR,qCAGA,iBAAQ,CACN,GAAM,uBADR,wBAGA,iBAAQ,CACN,GAAM,+BADR,gCAGA,iBAAQ,CACN,GAAM,mBADR,oBAGA,iBAAQ,CACN,GAAM,4BADR,6BAGA,iBAAQ,CACN,GAAM,2CADR,4CAGA,iBAAQ,CACN,GAAM,0CADR,4C,wNAOJJ,EAAWK,gBAAiB","file":"component---manual-chef-chef-learning-dev-ops-deployment-md-88a7d0fc3cbbb291cc51.js","sourcesContent":["import React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/gatsby-theme-docz/src/base/Layout.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"learning-chef-devops-deployment\"\n    }}>{`Learning Chef DevOps Deployment`}</h1>\n    {\n      /* TOC */\n    }\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#learning-chef-devops-deployment\"\n        }}>{`Learning Chef DevOps Deployment`}</a><ul parentName=\"li\">\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#chefops-1-introduction-to-chef\"\n            }}>{`CHEFOPS-1: Introduction to Chef`}</a><ul parentName=\"li\">\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#chefops-11-chef-head-first-build-and-deploy-a-motd-recipe\"\n                }}>{`CHEFOPS-1.1: Chef Head first! Build and Deploy a MOTD Recipe.`}</a></li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#chefops-12-what-is-devops-and-its-relation-to-chef\"\n                }}>{`CHEFOPS-1.2: What is DevOps and it's relation to Chef?`}</a></li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#chefops-13-what-is-chef\"\n                }}>{`CHEFOPS-1.3: What is Chef?`}</a></li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#chefops-14-common-chef-terminology\"\n                }}>{`CHEFOPS-1.4: Common Chef Terminology`}</a></li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#chefops-15-chef-server\"\n                }}>{`CHEFOPS-1.5: Chef Server`}</a></li>\n            </ul></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#chefops-2-building-the-webserver-cookbook\"\n            }}>{`CHEFOPS-2: Building the Webserver Cookbook`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#chefops-3-node-object-and-search\"\n            }}>{`CHEFOPS-3: Node Object and Search`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#chefops-4-data-bags\"\n            }}>{`CHEFOPS-4: Data-Bags`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#chefops-5-chef-environments\"\n            }}>{`CHEFOPS-5: Chef Environments`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#chefops-6-roles\"\n            }}>{`CHEFOPS-6: Roles`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#chefops-7-extending-chef\"\n            }}>{`CHEFOPS-7: Extending Chef`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#chefops-8-deploying-nodes-in-production\"\n            }}>{`CHEFOPS-8: Deploying Nodes in Production`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#chefops-9-using-opensource-chef-server\"\n            }}>{`CHEFOPS-9: Using OpenSource Chef Server`}</a></li>\n        </ul></li>\n    </ul>\n    {\n      /* /TOC */\n    }\n    <h2 {...{\n      \"id\": \"chefops-1-introduction-to-chef\"\n    }}>{`CHEFOPS-1: Introduction to Chef`}</h2>\n    <p><strong parentName=\"p\">{`After this, you should know`}</strong></p>\n    <ol>\n      <li parentName=\"ol\">{`Understand DevOps and Chef`}</li>\n      <li parentName=\"ol\">{`Know the role of workstations, nodes, and Chef server`}</li>\n      <li parentName=\"ol\">{`Deploy and automate configurations of nodes`}</li>\n      <li parentName=\"ol\">{`Understanding of writing Recipes and Cookbooks`}</li>\n      <li parentName=\"ol\">{`Understand the Chef work flow`}</li>\n      <li parentName=\"ol\">{`Use Chef to automate the deployment of your infrastructure`}</li>\n    </ol>\n    <p>{`Starting with single nodes.`}</p>\n    <p>{`Learn the concepts and then cook Cookbooks and then start bootstrapping nodes. You will also learn about the LAMP stack.`}</p>\n    <p>{`Have at least one \"node\" to touch base with.`}</p>\n    <p>{`You will know how to deploy out other applications and be able to use it in your own deployment environments.`}</p>\n    <h3 {...{\n      \"id\": \"chefops-11-chef-head-first-build-and-deploy-a-motd-recipe\"\n    }}>{`CHEFOPS-1.1: Chef Head first! Build and Deploy a MOTD Recipe.`}</h3>\n    <p>{`Have a lab server set up that will be a workstation. The workstation will be where the DevOp uses this to write the scripts and send this up to Chef.`}</p>\n    <p>{`Each DevOps engineer has a Workstation that they work on (generally your computer).`}</p>\n    <p>{`In the Node`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`sudo su\ncd /etc/ssh\nnano sshd_config\n`}</code></pre>\n    <p>{`Here, you can change `}<inlineCode parentName=\"p\">{`PermitRootLogin`}</inlineCode>{` to allow. To apply, you need to use `}<inlineCode parentName=\"p\">{`service ssh restart`}</inlineCode>{` (for Ubuntu -> check online for others)`}</p>\n    <p>{`We'll use the free tier with Chef to be able to learn and test.`}</p>\n    <p><strong parentName=\"p\">{`Chef`}</strong></p>\n    <p>{`In the management console, we need to create an Organisation. This will keep our policies seperate to other applications and environments.`}</p>\n    <p>{`Download the StarterKit, then you can move the files across to the workstation using a client like FileZilla.`}</p>\n    <p><strong parentName=\"p\">{`In FileZilla`}</strong></p>\n    <p>{`Connect using SFTP with the correct port if you are using NAT.`}</p>\n    <p>{`Once this is done, you can upload the ChefStarterKit to that workstation.`}</p>\n    <p>{`Move it to root and `}<inlineCode parentName=\"p\">{`unzip`}</inlineCode>{`.`}</p>\n    <p>{`Whenever you're working on policies, cookbooks etc. we will be inside of this repo in order to do work.`}</p>\n    <p>{`We want to be installing the software the workstation as well.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`curl -L https://www.opscode.com/chef/install.sh | bash\n`}</code></pre>\n    <p>{`This will run the bash command and install everything.`}</p>\n    <p>{`Now, let's go ahead and Bootstrap a node.`}</p>\n    <p>{`Currently for our organisation, we're going to bootstrap our first node!`}</p>\n    <p>{`We can use `}<inlineCode parentName=\"p\">{`knife`}</inlineCode>{` on the workstation to configure these things.`}</p>\n    <p>{`eg. `}<inlineCode parentName=\"p\">{`knife bootstrap 127.0.0.1 -p 3302 -x username -P password -N testnode`}</inlineCode></p>\n    <pre><code parentName=\"pre\" {...{}}>{`knife bootstrap ADDRESS --ssh-port  PORT --ssh-user USERNAME --ssh-password 'PASSWORD' --sudo --use-sudo-password --node-name NODENAME\n`}</code></pre>\n    <p>{`In a Production environment, we are also going to require -N to specify a Node name.`}</p>\n    <p>{`A Node can be anything that can run the Chef client. This can be linux systems like Ubuntu, Android etc.`}</p>\n    <p>{`If the Node can communicate with the Chef Server, then our Workstation will upload policies to the Chef Server and the Node will communicate with the Chef Server.`}</p>\n    <p>{`Now, in the \"Node\" instance, can run `}<inlineCode parentName=\"p\">{`chef-client`}</inlineCode>{` and see if we can actually communicate with the Chef Client.`}</p>\n    <p><strong parentName=\"p\">{`To create a cookbook`}</strong></p>\n    <pre><code parentName=\"pre\" {...{}}>{`knife cookbook create motd\n`}</code></pre>\n    <p>{`you can now move into cookbooks and see motd. In `}<inlineCode parentName=\"p\">{`motd`}</inlineCode>{` we are going to jump over a lot of things and seeing how things are being done.`}</p>\n    <p><inlineCode parentName=\"p\">{`cd recipes`}</inlineCode>{` and you will see the `}<inlineCode parentName=\"p\">{`default.rb`}</inlineCode>{` file. Edit the file.`}</p>\n    <p>{`Note: chef NEEDS to work as root, so you need to give those root details!`}</p>\n    <p><strong parentName=\"p\">{`In recipes/default.rb`}</strong></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-ruby\"\n      }}>{`// this will create a template\n// set the permissions to write read read\n\ntemplate \\`/etc/motd\\` do\n    source 'motd.erb'\n    mode '0644'\nend\n`}</code></pre>\n    <p>{`Now, cd from `}<inlineCode parentName=\"p\">{`recipes`}</inlineCode>{` into `}<inlineCode parentName=\"p\">{`templates`}</inlineCode>{` and head into the `}<inlineCode parentName=\"p\">{`default`}</inlineCode>{` directory.`}</p>\n    <p><inlineCode parentName=\"p\">{`nano motd.erb`}</inlineCode></p>\n    <p><strong parentName=\"p\">{`In templates/default/motd.erb`}</strong></p>\n    <pre><code parentName=\"pre\" {...{}}>{`// ensure you put the = sign to say\n// evaluate the attr here\n// denoted by node[\"motd\"][\"author\"]\n\nThis is an MOTD created by <%= node[\"motd\"][\"author\"] %>\n`}</code></pre>\n    <p>{`Head to the `}<inlineCode parentName=\"p\">{`attributes`}</inlineCode>{` folder and create `}<inlineCode parentName=\"p\">{`default.rb`}</inlineCode>{` and define an attribute. We need to set the precedence for importance.`}</p>\n    <p><strong parentName=\"p\">{`in attributes/default.rb`}</strong></p>\n    <pre><code parentName=\"pre\" {...{}}>{`default[\"motd\"][\"author\"] = \"Dennis\"\n`}</code></pre>\n    <p>{`After this is done, we need to upload this to the chef enterprise. We have to upload and tell the node to run it.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`knife cookbook upload motd\n`}</code></pre>\n    <p>{`After uploading, we can head to the Chef Enterprise and under policies we can see the motd cookbook. Under recipes, we will be able to see our recipe!`}</p>\n    <p>{`We need to tell our node to run our recipe!`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`knife node run_list add [nodename] \"recipe[motd]\"\"\n`}</code></pre>\n    <p>{`If you use the default.rb file, we name it `}<inlineCode parentName=\"p\">{`motd`}</inlineCode>{` (we used the default file in the recipe cookbook). There can be multiple cookbooks in a recipe but we don't run all of our recipes.`}</p>\n    <p>{`We can now run `}<inlineCode parentName=\"p\">{`chef-client`}</inlineCode>{` to run a convergence. Afterwards, we can change to our /etc file and cat our `}<inlineCode parentName=\"p\">{`motd`}</inlineCode>{` file. If there was an existing `}<inlineCode parentName=\"p\">{`motd`}</inlineCode>{` file already, it would create a back up of that file.`}</p>\n    <p>{`If we head to `}<inlineCode parentName=\"p\">{`/var/chef`}</inlineCode>{`, we can find a backup file and we can find the backup file. It even creates a back up of the backup just in case we need to back it up.`}</p>\n    <h3 {...{\n      \"id\": \"chefops-12-what-is-devops-and-its-relation-to-chef\"\n    }}>{`CHEFOPS-1.2: What is DevOps and it's relation to Chef?`}</h3>\n    <p>{`DevOps is how well people work together and how streamlined our projects actually are.`}</p>\n    <p>{`You split the teams into Development teams and Operations teams. They are essentially in separate environments.`}</p>\n    <p>{`The Ops team are system engineers who take care of the underlying OS that these run on.`}</p>\n    <p>{`DevOps is a bridge between these two teams. A new term from over the last couple of years. Building things like automated tests etc.`}</p>\n    <p>{`If you think DevOps, think automation. Continuous integration! You can run on cycles. DevOps is Infrastructure as nodes. It runs through the entire LAMP deployment. This entire automation for Chef is working closely Infrastructure as code.`}</p>\n    <p>{`This is even more the case when you're running on AWS etc.`}</p>\n    <p>{`We can deploy all these things like ELBs, DBs etc and we work with system teams to deploy this in an optimal way.`}</p>\n    <p>{`DevOps is essentially becoming a role for everybody. Doing things like patch updates, server updates etc with just a single piece of code.`}</p>\n    <p>{`As SysAdmins it's about being able to deploy and manage infrastructures using code.`}</p>\n    <p>{`DevOps is one of the biggest requests right now.`}</p>\n    <h3 {...{\n      \"id\": \"chefops-13-what-is-chef\"\n    }}>{`CHEFOPS-1.3: What is Chef?`}</h3>\n    <p>{`Chef turns Infrastructure into code.`}</p>\n    <p>{`You can let the cookbook dictate things like what packages we need to download etc.`}</p>\n    <p>{`This means when you deploy, you need it to touch base with the chef enterprise.`}</p>\n    <p>{`Recipes themselves are built with the Ruby language. Chef also relies on 'resources' - the resource defined the /etc change for `}<inlineCode parentName=\"p\">{`motd`}</inlineCode>{` before. Here we can define what packages to get, what directories to make etc. What services to start and at what level.`}</p>\n    <p><strong parentName=\"p\">{`What is Chef?`}</strong></p>\n    <p>{`Chef relies on either OpenSource Chef server or Chef enterprise to host configuration recipes, cookbooks and node auth for your infrastructure.`}</p>\n    <p>{`With Chef enterprise, we don't have to configure the OpenSource server.`}</p>\n    <p>{`Nodes when performing a convergence will check in with the enterprise server and check it has everything it needs to have, download the required config and run the recipe instructions.`}</p>\n    <p>{`As we learn how to write recipes, we will learn how to automate the process so that the chef-client is run every 30 minutes.`}</p>\n    <p>{`Chef itself eventually works like so:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`Work Station\n    |\n    |\nChef Server\n    |\n    |\n  Nodes\n(Web Server, Cisco Router, Varnish Server, DB Server)\n`}</code></pre>\n    <p>{`We can have chef jump into these servers and update certain things.`}</p>\n    <h3 {...{\n      \"id\": \"chefops-14-common-chef-terminology\"\n    }}>{`CHEFOPS-1.4: Common Chef Terminology`}</h3>\n    <p>{`If you understand this, it will click quicker.`}</p>\n    <p><strong parentName=\"p\">{`Recipes`}</strong></p>\n    <p>{`These are the fundamental configuration element. They are created using the Ruby language using patterns with Ruby code. It is required to cover everything that is part of a system.`}</p>\n    <p>{`Recipes need to be added to a `}<inlineCode parentName=\"p\">{`run list`}</inlineCode>{` before being executed and run in order. This is done with the `}<inlineCode parentName=\"p\">{`knife node run_list`}</inlineCode>{` command.`}</p>\n    <p><strong parentName=\"p\">{`Cookbook`}</strong></p>\n    <p>{`Defines a scenario and is the fundamental unit of configuration and policy distribution.`}</p>\n    <p>{`It is made up of recipes. We have the ability to set attributes for reusable sets of resources and helpers using Ruby code.`}</p>\n    <p>{`We can specify things like versions, metadata and more of our data in the cookbook for our recipes.`}</p>\n    <p><strong parentName=\"p\">{`Chef-Client`}</strong></p>\n    <p>{`Agent that runs locally on the node that is registered with the chef server.`}</p>\n    <p>{`This will register and authenticate when it is first run. It will sync the cookbooks and take appropriate action to align with what the cookbook says.`}</p>\n    <p><strong parentName=\"p\">{`Convergence`}</strong></p>\n    <p>{`Occurs when chef-client configures the system/node based off the information collected from chef-server.`}</p>\n    <p>{`When we run the convergence, the node will be up to date.`}</p>\n    <p><strong parentName=\"p\">{`Configuration Drift`}</strong></p>\n    <p>{`Occurs when the node state does not reflect the updated state of polices/configurations on the chef server.`}</p>\n    <p>{`Recipes are primarily made up of resources and the CD and it configures in liason with the element.`}</p>\n    <p><strong parentName=\"p\">{`Resources`}</strong></p>\n    <p>{`A statement of configuration policay within a recipe.`}</p>\n    <p>{`Describes the desired state of an element in the infrastructure and steps needed to configure.`}</p>\n    <p><strong parentName=\"p\">{`Provider`}</strong></p>\n    <p>{`Defines the steps that are needed to bring the piece of the system from its current state to the desired state.`}</p>\n    <p>{`This works with resources and brings the piece of the system from the current state to the desired state.`}</p>\n    <p><strong parentName=\"p\">{`Attributes`}</strong></p>\n    <p>{`Specific details about the node, used by chef-client to understand current state of the node, the state of the node on the previous chef-client run, and the state of the node at the end of the client run.`}</p>\n    <p><strong parentName=\"p\">{`Data-bags`}</strong></p>\n    <p>{`A global variables stored as JSON data and is accessible from the Chef server.`}</p>\n    <p>{`We can use these when defining local users on our system.`}</p>\n    <p><strong parentName=\"p\">{`Workstation`}</strong></p>\n    <p>{`A computer configured with Knife and used to sync with chef-repo and interact with chef server.`}</p>\n    <p>{`The workstation is what we are going to work on our recipes on. We can configure out Chef server for our node state and server state from the workstation.`}</p>\n    <p><strong parentName=\"p\">{`Chef Server`}</strong></p>\n    <p>{`Chef server is the hub for all configuration data, stores cookbooks, and the policies applied to the node.`}</p>\n    <p>{`The node communicates with the Chef Server and our work to build out policies is done on the workstation and sent to the server and the Node converges with the Chef Client.`}</p>\n    <p><strong parentName=\"p\">{`Knife`}</strong></p>\n    <p>{`Command line tool which provides an interface between the local chef-repo and chef-server.`}</p>\n    <p><strong parentName=\"p\">{`client.rb`}</strong></p>\n    <p>{`Config file for chef_client located at /etc/chef/client.rb on each node.`}</p>\n    <p><strong parentName=\"p\">{`Ohai`}</strong></p>\n    <p>{`Tool used to detect attributes on a node and then provide attributes to chef-client at the start of every chef-client run.`}</p>\n    <p><em parentName=\"p\">{`We will use all the above tools to automate our infrastructure.`}</em></p>\n    <p><strong parentName=\"p\">{`Node Object`}</strong></p>\n    <p>{`Consists of run-list and node attributes that describe states of the node.`}</p>\n    <p><strong parentName=\"p\">{`Chef-Repo`}</strong></p>\n    <p>{`Located on the workstation and installed with the starter kit, should be synchronised with a version control system and stores Cookbooks, roles, data bags, environments, and config files.`}</p>\n    <p><strong parentName=\"p\">{`Organisation`}</strong></p>\n    <p>{`Used in chef enterprise server to restrict access to objects, nodes environments, roles, data-bags etc.`}</p>\n    <p>{`An organisation is used to make sure that your Chef infrastructure or organisation is separate from others.`}</p>\n    <p><strong parentName=\"p\">{`Environments`}</strong></p>\n    <p>{`Used to organise environments (Prod/Staging/Dev/QA) generally used with cookbook `}<em parentName=\"p\">{`versions`}</em></p>\n    <p>{`You can name things like which versions to use etc.`}</p>\n    <p><strong parentName=\"p\">{`Idempotence`}</strong></p>\n    <p>{`Means a recipe can run multiple times on the same system and the results will always be identical.`}</p>\n    <p>{`If we continue to run a recipe over and over again, it will give the same results based on our policy.`}</p>\n    <h3 {...{\n      \"id\": \"chefops-15-chef-server\"\n    }}>{`CHEFOPS-1.5: Chef Server`}</h3>\n    <p><strong parentName=\"p\">{`Two Types of Chef Server`}</strong></p>\n    <ol>\n      <li parentName=\"ol\">{`OpenSource Chef-server`}</li>\n    </ol>\n    <ul>\n      <li parentName=\"ul\">{`Free version of Chef`}</li>\n      <li parentName=\"ul\">{`Each instance of the server must be configured and managed locally (includes all aspects of managing the server, updates, migrations, scalability etc.)`}</li>\n    </ul>\n    <p>{`The limitations with this is that it is not inherently scalable by default. Organisations also cannot communicate with each other.`}</p>\n    <p>{`Enterprise, however, is scalable by design.`}</p>\n    <ol {...{\n      \"start\": 2\n    }}>\n      <li parentName=\"ol\">{`Chef-server Enterprise (hosted)`}</li>\n    </ol>\n    <ul>\n      <li parentName=\"ul\">{`Scalable by design`}</li>\n      <li parentName=\"ul\">{`Available organisations`}</li>\n      <li parentName=\"ul\">{`Always available`}</li>\n      <li parentName=\"ul\">{`Resource-based access control`}</li>\n    </ul>\n    <p>{`This is always available. It is inherently another back up of our set up.`}</p>\n    <ol {...{\n      \"start\": 3\n    }}>\n      <li parentName=\"ol\">{`Chef-server enterprise (on-premise)`}</li>\n    </ol>\n    <ul>\n      <li parentName=\"ul\">{`Scalable by design`}</li>\n      <li parentName=\"ul\">{`Available organisations`}</li>\n      <li parentName=\"ul\">{`Hosted on-premise behind your firewall`}</li>\n      <li parentName=\"ul\">{`Managed yourself`}</li>\n    </ul>\n    <p>{`Onus is on the user to deal with organisations and policies.`}</p>\n    <p><strong parentName=\"p\">{`Chef Enterprise`}</strong></p>\n    <ul>\n      <li parentName=\"ul\">{`Allows the creation of organisations - Organisations separate the infrastructure, policies and cookbooks - Nodes are registered in organisations - Nothing shared between organisations - Enterprise chef server can contain many different organisations - OpenSource chef the local individual server acts as an organisation and does not allow creation of organisations. - Organisations can represent different companies, department, infrastructures, applications and so forth.`}</li>\n      <li parentName=\"ul\">{`For each organisation in order to start bootstrapping nodes you need to download the starter kit.`}</li>\n      <li parentName=\"ul\">{`Starter kit provides security credentials (validation.pem keys) to authenticate each node to the chef server.`}</li>\n      <li parentName=\"ul\">{`Chef enterprise scales by design to handle thousands of nodes and different organisations.`}</li>\n    </ul>\n    <p><strong parentName=\"p\">{`Role of the server`}</strong></p>\n    <ul>\n      <li parentName=\"ul\">{`Stores system config information (policies for nodes)`}</li>\n      <li parentName=\"ul\">{`Authenticates workstations and nodes`}</li>\n      <li parentName=\"ul\">{`Delivers configurations to nodes`}</li>\n      <li parentName=\"ul\">{`Chef server holds the config and the node check-ins to receive instructions on its desired state`}</li>\n      <li parentName=\"ul\">{`The node downloads config instructions from the server and does all of the work`}</li>\n    </ul>\n    <p>{`In the Chef Server website, we can see the policies of what's required and see things like content to see what files are there and what it requires.`}</p>\n    <p>{`Again, the node communicates back with the chef server to figure out how it should become configured.`}</p>\n    <p>{`Ohai will populate attributes about information for the node.`}</p>\n    <p><strong parentName=\"p\">{`Summary`}</strong></p>\n    <p>{`Everything we stored on our Chef Workstation is backed up on the Chef Server, and the Node will converge with the Chef server. When the info on the server is different to the Node, that is a convergence drift resolved by the convergence.`}</p>\n    <p>{`On the Chef Server GUI, we can actually configure things like the Run List etc without having to use the `}<inlineCode parentName=\"p\">{`knife`}</inlineCode>{` commands, even though we can.`}</p>\n    <p>{`Everytime you download a Starter Kit, it overrides the keys etc. Always download it everytime you create a new organisation.`}</p>\n    <p>{`For AWS, Chef Solo is used. Check the web or upcoming docs for how to use and its relation.`}</p>\n    <h2 {...{\n      \"id\": \"chefops-2-building-the-webserver-cookbook\"\n    }}>{`CHEFOPS-2: Building the Webserver Cookbook`}</h2>\n    <h2 {...{\n      \"id\": \"chefops-3-node-object-and-search\"\n    }}>{`CHEFOPS-3: Node Object and Search`}</h2>\n    <h2 {...{\n      \"id\": \"chefops-4-data-bags\"\n    }}>{`CHEFOPS-4: Data-Bags`}</h2>\n    <h2 {...{\n      \"id\": \"chefops-5-chef-environments\"\n    }}>{`CHEFOPS-5: Chef Environments`}</h2>\n    <h2 {...{\n      \"id\": \"chefops-6-roles\"\n    }}>{`CHEFOPS-6: Roles`}</h2>\n    <h2 {...{\n      \"id\": \"chefops-7-extending-chef\"\n    }}>{`CHEFOPS-7: Extending Chef`}</h2>\n    <h2 {...{\n      \"id\": \"chefops-8-deploying-nodes-in-production\"\n    }}>{`CHEFOPS-8: Deploying Nodes in Production`}</h2>\n    <h2 {...{\n      \"id\": \"chefops-9-using-opensource-chef-server\"\n    }}>{`CHEFOPS-9: Using OpenSource Chef Server`}</h2>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}