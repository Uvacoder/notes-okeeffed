(window.webpackJsonp=window.webpackJsonp||[]).push([[167],{UxuO:function(e,t,i){"use strict";i.r(t),i.d(t,"_frontmatter",(function(){return a})),i.d(t,"default",(function(){return c}));i("1c7q"),i("abGl"),i("gZHo"),i("Fdmb"),i("Ir+3"),i("2mQt"),i("mXGw");var n=i("/FXl"),o=i("TjRS");i("aD51");function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var a={};void 0!==a&&a&&a===Object(a)&&Object.isExtensible(a)&&!a.hasOwnProperty("__filemeta")&&Object.defineProperty(a,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"manual/Design-Patterns/Visitor.md"}});var r={_frontmatter:a},m=o.a;function c(e){var t=e.components,i=function(e,t){if(null==e)return{};var i,n,o={},s=Object.keys(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||(o[i]=e[i]);return o}(e,["components"]);return Object(n.b)(m,s({},r,i,{components:t,mdxType:"MDXLayout"}),Object(n.b)("h1",{id:"visitor"},"Visitor"),Object(n.b)("h2",{id:"example"},"Example"),Object(n.b)("pre",null,Object(n.b)("code",s({parentName:"pre"},{className:"language-typescript"}),"interface Visitable {\n  accept(visitor: IVisitor): void;\n}\n\ninterface IVisitor {\n  visitMainItem?(mainItem: MainItem): void;\n  visitSideItem?(sideItem: SideItem): void;\n}\n\nclass MainItem implements Visitable {\n  accept(visitor: IVisitor) {\n    if (visitor.visitMainItem) {\n      visitor.visitMainItem(this);\n    }\n  }\n}\n\nclass SideItem implements Visitable {\n  accept(visitor: IVisitor) {\n    if (visitor.visitSideItem) {\n      visitor.visitSideItem(this);\n    }\n  }\n}\n\nclass LogVisitor implements IVisitor {\n  visitMainItem(mainItem: MainItem): void {\n    console.log('Log mainItem, and add new logics');\n  }\n\n  visitSideItem(sideItem: SideItem): void {\n    console.log('Log sideItem, and add new logics');\n  }\n}\n\nclass DecorateVisitor implements IVisitor {\n  visitMainItem(mainItem: MainItem): void {\n    console.log('Decorate mainItem, and add new logics');\n  }\n\n  visitSideItem(sideItem: SideItem): void {\n    console.log('Decorate sideItem, and add new logics');\n  }\n}\n\nclass ItemsGroup implements Visitable {\n  private _items: Object[];\n\n  constructor() {\n    this._items = [];\n  }\n\n  public addItem(item: Object) {\n    this._items.push(item);\n  }\n\n  public popItem() {\n    return this._items.pop();\n  }\n\n  accept(visitor: IVisitor): void {\n    this._items.map((item: Visitable) => {\n      item.accept(visitor);\n    });\n  }\n}\n\n(function main() {\n  const group = new ItemsGroup();\n  group.addItem(new MainItem());\n  group.addItem(new SideItem());\n\n  const mainVisitor = new LogVisitor();\n  const sideVisitor = new DecorateVisitor();\n\n  group.accept(mainVisitor);\n  group.accept(sideVisitor);\n\n  // remove\n  const removedItem = group.popItem();\n  console.log('removedItem:', removedItem); // SideItem\n\n  // attempt to accept again\n  group.accept(mainVisitor);\n  group.accept(sideVisitor); // not accepted this time\n})();\n")))}c&&c===Object(c)&&Object.isExtensible(c)&&!c.hasOwnProperty("__filemeta")&&Object.defineProperty(c,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"manual/Design-Patterns/Visitor.md"}}),c.isMDXComponent=!0}}]);
//# sourceMappingURL=component---manual-design-patterns-visitor-md-54c0288f29a21d4f895f.js.map