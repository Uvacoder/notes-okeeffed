{"version":3,"sources":["webpack:///../manual/Kubernetes/Helm.md"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"component---manual-kubernetes-helm-md-84a6d0ed9ee580bb6e73.js","sourcesContent":["import React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/gatsby-theme-docz/src/base/Layout.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"5-packaging-and-deploying-on-kubernetes\"\n    }}>{`5. Packaging and Deploying on Kubernetes`}</h1>\n    <h2 {...{\n      \"id\": \"51-intro-to-helm\"\n    }}>{`5.1 Intro to Helm`}</h2>\n    <p>{`Helm is the best way to find, share and use software built for Kubernetes.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Package manager for Kubernetes.`}</li>\n      <li parentName=\"ul\">{`Helps you manage Kubernetes apps.`}</li>\n      <li parentName=\"ul\">{`Maintained by CNCF.`}</li>\n    </ul>\n    <p>{`To use, download the Helm client.`}</p>\n    <p>{`To run, use `}<inlineCode parentName=\"p\">{`helm init`}</inlineCode>{`.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`This will installer Tiller`}</li>\n      <li parentName=\"ul\">{`If you have RBAC installed (recent clusters have it enabled by default), you'll also need to add a ServiceAccount and RBAC rules.`}</li>\n    </ul>\n    <p>{`Helm uses a packaging format call `}<strong parentName=\"p\">{`charts`}</strong>{`.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`A chart is a collection of files that describe a set of Kubernetes resources.`}</li>\n      <li parentName=\"ul\">{`A single chart can deploy an app, a piece of software or a database.`}</li>\n      <li parentName=\"ul\">{`It can have depencies ie Wordpress chart requires mysql chart.`}</li>\n      <li parentName=\"ul\">{`You can also write your own chart.`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"helm-commands\"\n    }}>{`Helm commands`}</h3>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Command`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`helm init`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Install tiller on the cluser`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`helm reset`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Remove tiller`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`helm install `}<inlineCode parentName=\"td\">{`<CHART>`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Install chart`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`helm search `}<inlineCode parentName=\"td\">{`<CHART>`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Searches for chart`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`helm search redis`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Looks for Redis chart`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`helm install --name myredis stable/redis`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Installs Redis chart found under myredis`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`helm delete myredis`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Delete Redis install named myredis`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`helm create `}<inlineCode parentName=\"td\">{`<CHART_NAME>`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Create your own chart`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`helm update `}<inlineCode parentName=\"td\">{`<OPTIONS>`}</inlineCode>{` `}<inlineCode parentName=\"td\">{`<CHART>`}</inlineCode>{` path/to/chart`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Update the chart`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`helm history `}<inlineCode parentName=\"td\">{`<CHART_NAME>`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`See upgrade history of chart`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`helm rollback `}<inlineCode parentName=\"td\">{`<CHART_NAME>`}</inlineCode>{` `}<inlineCode parentName=\"td\">{`<REVISION>`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Rollback to version`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`helm list`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`List running charts`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`helm list --all`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`List all charts that have ran`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`helm delete `}<inlineCode parentName=\"td\">{`<CHART_NAME>`}</inlineCode>{` --purge`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Release deleted chart`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <h3 {...{\n      \"id\": \"installing-helm\"\n    }}>{`Installing Helm`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`curl https://raw.githubusercontent.com/helm/helm/master/scripts/get > get_helm.sh\nchmod 700 get_helm.sh\n./get_helm.sh\n`}</code></pre>\n    <p>{`Alternatively:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`curl https://raw.githubusercontent.com/helm/helm/master/scripts/get | bash\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"linux-distro-install\"\n    }}>{`Linux Distro Install`}</h4>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`wget https://kubernetes-helm.storage.googleapis.com/helm-v2.11.0-linux-amd64.tar.gz\ntar -xzvf helm-v2.11.0-linux-amd64.tar.gz\nsudo mv linux-amd64/helm /usr/local/bin/helm\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"adding-to-cluster\"\n    }}>{`Adding to cluster`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`# helm-rbac.yaml\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: tiller\n  namespace: kube-system\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: tiller\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: cluster-admin\nsubjects:\n  - kind: ServiceAccount\n    name: tiller\n    namespace: kube-system\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`kubectl apply -f helm-rbac.yaml\nhelm init --service-account tiller\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"52-creating-your-own-helm-charts\"\n    }}>{`5.2 Creating your own helm charts`}</h2>\n    <p>{`This is the recommended way to deploy applications.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Packaging the app allows you to deploy the app in 1 command.`}</li>\n      <li parentName=\"ul\">{`Helm allows for upgrades and rollbacks.`}</li>\n      <li parentName=\"ul\">{`Helm chart is also version controlled.`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`# creates director mychart/\nhelm create mychart\nls mychart\n# Displays Chart.yaml  charts  templates  values.yaml\n`}</code></pre>\n    <p><inlineCode parentName=\"p\">{`values.yaml`}</inlineCode>{` will control things such as replicas, image etc.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`# Default values for test.\n# This is a YAML-formatted file.\n# Declare variables to be passed into your templates.\n\nreplicaCount: 1\n\nimage:\n  repository: nginx\n  tag: stable\n  pullPolicy: IfNotPresent\n\nnameOverride: \"\"\nfullnameOverride: \"\"\n\nservice:\n  type: ClusterIP\n  port: 80\n\ningress:\n  enabled: false\n  annotations: {}\n    # kubernetes.io/ingress.class: nginx\n    # kubernetes.io/tls-acme: \"true\"\n  paths: []\n  hosts:\n    - chart-example.local\n  tls: []\n  #  - secretName: chart-example-tls\n  #    hosts:\n  #      - chart-example.local\n\nresources: {}\n  # We usually recommend not to specify default resources and to leave this as a conscious\n  # choice for the user. This also increases chances charts run on environments with little\n  # resources, such as Minikube. If you do want to specify resources, uncomment the following\n  # lines, adjust them as necessary, and remove the curly braces after 'resources:'.\n  # limits:\n  #  cpu: 100m\n  #  memory: 128Mi\n  # requests:\n  #  cpu: 100m\n  #  memory: 128Mi\n\nnodeSelector: {}\n\ntolerations: []\n\naffinity: {}\n`}</code></pre>\n    <p>{`Inside the `}<inlineCode parentName=\"p\">{`mychart/templates`}</inlineCode>{` folder we have...`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`ls mychart/templates\n# shows NOTES.txt  _helpers.tpl  deployment.yaml  ingress.yaml  service.yaml  tests\n`}</code></pre>\n    <p>{`Looking at the `}<inlineCode parentName=\"p\">{`deployment.yaml`}</inlineCode>{` we see the following:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: {{ include \"test.fullname\" . }}\n  labels:\n    app.kubernetes.io/name: {{ include \"test.name\" . }}\n    helm.sh/chart: {{ include \"test.chart\" . }}\n    app.kubernetes.io/instance: {{ .Release.Name }}\n    app.kubernetes.io/managed-by: {{ .Release.Service }}\nspec:\n  replicas: {{ .Values.replicaCount }}\n  selector:\n    matchLabels:\n      app.kubernetes.io/name: {{ include \"test.name\" . }}\n      app.kubernetes.io/instance: {{ .Release.Name }}\n  template:\n    metadata:\n      labels:\n        app.kubernetes.io/name: {{ include \"test.name\" . }}\n        app.kubernetes.io/instance: {{ .Release.Name }}\n    spec:\n      containers:\n        - name: {{ .Chart.Name }}\n          image: \"{{ .Values.image.repository }}:{{ .Values.image.tag }}\"\n          imagePullPolicy: {{ .Values.image.pullPolicy }}\n          ports:\n            - name: http\n              containerPort: 80\n              protocol: TCP\n          livenessProbe:\n            httpGet:\n              path: /\n              port: http\n          readinessProbe:\n            httpGet:\n              path: /\n              port: http\n          resources:\n            {{- toYaml .Values.resources | nindent 12 }}\n      {{- with .Values.nodeSelector }}\n      nodeSelector:\n        {{- toYaml . | nindent 8 }}\n      {{- end }}\n    {{- with .Values.affinity }}\n      affinity:\n        {{- toYaml . | nindent 8 }}\n    {{- end }}\n    {{- with .Values.tolerations }}\n      tolerations:\n        {{- toYaml . | nindent 8 }}\n    {{- end }}\n`}</code></pre>\n    <p>{`These values will be filled out when deployed.`}</p>\n    <p>{`The spec values are generally defined by the earlier `}<inlineCode parentName=\"p\">{`values.yaml`}</inlineCode>{`.`}</p>\n    <p>{`The `}<inlineCode parentName=\"p\">{`mychart/service.yaml`}</inlineCode>{` also templates how the service file will be created:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: v1\nkind: Service\nmetadata:\n  name: {{ include \"test.fullname\" . }}\n  labels:\n    app.kubernetes.io/name: {{ include \"test.name\" . }}\n    helm.sh/chart: {{ include \"test.chart\" . }}\n    app.kubernetes.io/instance: {{ .Release.Name }}\n    app.kubernetes.io/managed-by: {{ .Release.Service }}\nspec:\n  type: {{ .Values.service.type }}\n  ports:\n    - port: {{ .Values.service.port }}\n      targetPort: http\n      protocol: TCP\n      name: http\n  selector:\n    app.kubernetes.io/name: {{ include \"test.name\" . }}\n    app.kubernetes.io/instance: {{ .Release.Name }}\n`}</code></pre>\n    <p>{`From here, you can directly install the helm chart using `}<inlineCode parentName=\"p\">{`helm install mychart/`}</inlineCode>{`.`}</p>\n    <p>{`Using the default chart, there is a `}<inlineCode parentName=\"p\">{`nginx`}</inlineCode>{` configuration you then port forward and curl.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`kubectl port-forward 80:8080\n# Press ^z here\nbg # set to background\ncurl localhost:8080 \n# result should be default nginx html\nfg # bring port-forward back to foreground\n`}</code></pre>\n    <h1 {...{\n      \"id\": \"demo-with-a-nodejs-app\"\n    }}>{`Demo with a Nodejs app`}</h1>\n    <p>{`Create a chart and update the required value for your image etc.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`# Default values for test.\n# This is a YAML-formatted file.\n# Declare variables to be passed into your templates.\n\nreplicaCount: 1\n\nimage:\n  repository: okeeffed/repo\n  tag: latest\n  pullPolicy: IfNotPresent\n\n# Could also be LoadBalancer\nservice:\n  type: ClusterIP\n  port: 80\n\ningress:\n  enabled: false\n  annotations: {}\n    # kubernetes.io/ingress.class: nginx\n    # kubernetes.io/tls-acme: \"true\"\n  paths: []\n  hosts:\n    - chart-example.local\n    # this could also be whatever.domain.com\n  tls: []\n  #  - secretName: chart-example-tls\n  #    hosts:\n  #      - chart-example.local\n\nresources: {}\n  # We usually recommend not to specify default resources and to leave this as a conscious\n  # choice for the user. This also increases chances charts run on environments with little\n  # resources, such as Minikube. If you do want to specify resources, uncomment the following\n  # lines, adjust them as necessary, and remove the curly braces after 'resources:'.\n  # limits:\n  #  cpu: 100m\n  #  memory: 128Mi\n  # requests:\n  #  cpu: 100m\n  #  memory: 128Mi\n\nnodeSelector: {}\n\ntolerations: []\n\naffinity: {}\n\n# Here you can add dependencies\n`}</code></pre>\n    <p>{`If your helm has depencies, these can be defined in a `}<inlineCode parentName=\"p\">{`requirements.yaml`}</inlineCode>{` file. Example:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`dependencies:\n  - name: mariadb\n    version: 4.x.x\n    repository: https://kubernetes-charts.storage.googleapis.com/\n    condition: mariadb.enabled\n    tags:\n      - node-app-database\n`}</code></pre>\n    <p>{`Ensure you update the chart if you need to change the `}<inlineCode parentName=\"p\">{`containerPort`}</inlineCode>{` or env variables etc.`}</p>\n    <p>{`Once the chart is up and running, you can update charts which will update the orchestration. Use `}<inlineCode parentName=\"p\">{`helm update <OPTIONS> <CHART> path/to/chart`}</inlineCode></p>\n    <p>{`Rollbacks can easily be done as well. `}</p>\n    <p>{`Use `}<inlineCode parentName=\"p\">{`helm history <CHART>`}</inlineCode>{` to get a history of deployments. Say we want to rollback to revision one, we can then just run `}<inlineCode parentName=\"p\">{`helm rollback <CHART> 1`}</inlineCode>{`. `}</p>\n    <h2 {...{\n      \"id\": \"53-setting-up-helm-repo-with-s3\"\n    }}>{`5.3 Setting up Helm Repo with S3`}</h2>\n    <p>{`If you have charts stored on S3:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`# Install plugin\nhelm plugin install https://github.com/hypnoglow/helm-s3.git\n\n# Initialise s3 bucket\nhelm s3 init s3://helm-bucket/charts\n\n# Add report to helm\nhelm repo add my-charts s3://helm-bucket/charts\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}